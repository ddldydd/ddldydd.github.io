<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 7.0.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"ddldydd.github.io","root":"/","scheme":"Gemini","version":"7.8.0","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":false,"show_result":false,"style":null},"back2top":{"enable":true,"sidebar":false,"scrollpercent":false},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":true,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},"path":"search.xml"};
  </script>

  <meta name="description" content="书山有路勤为径，学海无涯苦作舟。">
<meta property="og:type" content="website">
<meta property="og:title" content="夏蝉之家">
<meta property="og:url" content="http://ddldydd.github.io/index.html">
<meta property="og:site_name" content="夏蝉之家">
<meta property="og:description" content="书山有路勤为径，学海无涯苦作舟。">
<meta property="og:locale" content="zh_CN">
<meta property="article:author" content="阿呆">
<meta name="twitter:card" content="summary">

<link rel="canonical" href="http://ddldydd.github.io/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : true,
    isPost : false,
    lang   : 'zh-CN'
  };
</script>

  <title>夏蝉之家</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">夏蝉之家</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
        <i class="fa fa-search fa-fw fa-lg"></i>
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-home fa-fw"></i>首页</a>

  </li>
        <li class="menu-item menu-item-about">

    <a href="/about/" rel="section"><i class="fa fa-user fa-fw"></i>关于</a>

  </li>
        <li class="menu-item menu-item-tags">

    <a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>标签</a>

  </li>
        <li class="menu-item menu-item-categories">

    <a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>分类</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>归档</a>

  </li>
        <li class="menu-item menu-item-commonweal">

    <a href="/404/" rel="section"><i class="fa fa-heartbeat fa-fw"></i>公益 404</a>

  </li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>搜索
        </a>
      </li>
  </ul>
</nav>



  <div class="search-pop-overlay">
    <div class="popup search-popup">
        <div class="search-header">
  <span class="search-icon">
    <i class="fa fa-search"></i>
  </span>
  <div class="search-input-container"></div>
  <span class="popup-btn-close">
    <i class="fa fa-times-circle"></i>
  </span>
</div>
<div class="algolia-results">
  <div id="algolia-stats"></div>
  <div id="algolia-hits"></div>
  <div id="algolia-pagination" class="algolia-pagination"></div>
</div>

      
    </div>
  </div>

</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content index posts-expand">
            
      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://ddldydd.github.io/2024/01/10/hello-world/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="阿呆">
      <meta itemprop="description" content="书山有路勤为径，学海无涯苦作舟。">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="夏蝉之家">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2024/01/10/hello-world/" class="post-title-link" itemprop="url">Hello World</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>
              

              <time title="创建时间：2024-01-10 22:03:51 / 修改时间：22:03:53" itemprop="dateCreated datePublished" datetime="2024-01-10T22:03:51+08:00">2024-01-10</time>
            </span>

          <br>
            <span class="post-meta-item" title="本文字数">
              <span class="post-meta-item-icon">
                <i class="far fa-file-word"></i>
              </span>
                <span class="post-meta-item-text">本文字数：</span>
              <span>367</span>
            </span>
            <span class="post-meta-item" title="阅读时长">
              <span class="post-meta-item-icon">
                <i class="far fa-clock"></i>
              </span>
                <span class="post-meta-item-text">阅读时长 &asymp;</span>
              <span>1 分钟</span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>Welcome to <a target="_blank" rel="noopener" href="https://hexo.io/">Hexo</a>! This is your very first post. Check <a target="_blank" rel="noopener" href="https://hexo.io/docs/">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a target="_blank" rel="noopener" href="https://hexo.io/docs/troubleshooting.html">troubleshooting</a> or you can ask me on <a target="_blank" rel="noopener" href="https://github.com/hexojs/hexo/issues">GitHub</a>.</p>
<h2 id="Quick-Start"><a href="#Quick-Start" class="headerlink" title="Quick Start"></a>Quick Start</h2><h3 id="Create-a-new-post"><a href="#Create-a-new-post" class="headerlink" title="Create a new post"></a>Create a new post</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo new <span class="string">&quot;My New Post&quot;</span></span><br></pre></td></tr></table></figure>

<p>More info: <a target="_blank" rel="noopener" href="https://hexo.io/docs/writing.html">Writing</a></p>
<h3 id="Run-server"><a href="#Run-server" class="headerlink" title="Run server"></a>Run server</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo server</span><br></pre></td></tr></table></figure>

<p>More info: <a target="_blank" rel="noopener" href="https://hexo.io/docs/server.html">Server</a></p>
<h3 id="Generate-static-files"><a href="#Generate-static-files" class="headerlink" title="Generate static files"></a>Generate static files</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo generate</span><br></pre></td></tr></table></figure>

<p>More info: <a target="_blank" rel="noopener" href="https://hexo.io/docs/generating.html">Generating</a></p>
<h3 id="Deploy-to-remote-sites"><a href="#Deploy-to-remote-sites" class="headerlink" title="Deploy to remote sites"></a>Deploy to remote sites</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo deploy</span><br></pre></td></tr></table></figure>

<p>More info: <a target="_blank" rel="noopener" href="https://hexo.io/docs/one-command-deployment.html">Deployment</a></p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://ddldydd.github.io/2024/01/10/VM%E8%99%9A%E6%8B%9F%E6%9C%BA-%E9%83%A8%E7%BD%B2%E7%AF%87/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="阿呆">
      <meta itemprop="description" content="书山有路勤为径，学海无涯苦作舟。">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="夏蝉之家">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2024/01/10/VM%E8%99%9A%E6%8B%9F%E6%9C%BA-%E9%83%A8%E7%BD%B2%E7%AF%87/" class="post-title-link" itemprop="url">VM 虚拟机_部署篇</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2024-01-10 21:58:21" itemprop="dateCreated datePublished" datetime="2024-01-10T21:58:21+08:00">2024-01-10</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2024-01-11 12:29:28" itemprop="dateModified" datetime="2024-01-11T12:29:28+08:00">2024-01-11</time>
              </span>

          <br>
            <span class="post-meta-item" title="本文字数">
              <span class="post-meta-item-icon">
                <i class="far fa-file-word"></i>
              </span>
                <span class="post-meta-item-text">本文字数：</span>
              <span>20k</span>
            </span>
            <span class="post-meta-item" title="阅读时长">
              <span class="post-meta-item-icon">
                <i class="far fa-clock"></i>
              </span>
                <span class="post-meta-item-text">阅读时长 &asymp;</span>
              <span>37 分钟</span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="部署文档："><a href="#部署文档：" class="headerlink" title="部署文档："></a>部署文档：</h1><hr>
<p>声明</p>
<p>部署本地win10的VMos虚拟机的CentOS7 服务器</p>
<p><strong>后续安装都是在VMos虚拟机的CentOS7 服务器里进行的安装！！！</strong></p>
<p>VMOS部署CentOS部分，网络资源较多，可参考网络</p>
<p>在 局域网络访问CentOS主机的网络配置，可参考网络，注意（大多网络配置都是将虚拟机到部署到NET上，实际部署到物理地址会更方面局域网的其他主机的访问。）</p>
<hr>
<p>ssh链接常用命令：</p>
<p>ssh  <a href="mailto:&#x72;&#x6f;&#x6f;&#x74;&#64;&#49;&#x39;&#x32;&#46;&#49;&#54;&#56;&#x2e;&#48;&#46;&#49;&#x33;&#x33;">&#x72;&#x6f;&#x6f;&#x74;&#64;&#49;&#x39;&#x32;&#46;&#49;&#54;&#56;&#x2e;&#48;&#46;&#49;&#x33;&#x33;</a></p>
<hr>
<h2 id="0-Linux-常用命令"><a href="#0-Linux-常用命令" class="headerlink" title="0 Linux 常用命令"></a>0 Linux 常用命令</h2><p>将一个文件夹下的所有内容复制到另一个文件夹下</p>
<blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">cp -r /home/packageA/* /home/cp/packageB/`</span><br><span class="line">或</span><br><span class="line">`cp -r /home/packageA/. /home/cp/packageB/</span><br></pre></td></tr></table></figure>
</blockquote>
<p>vim 多删除</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">全选（高亮显示）：按esc后，然后ggvG或者ggVG</span><br><span class="line"></span><br><span class="line">全部复制：按esc后，然后ggyG</span><br><span class="line"></span><br><span class="line">全部删除：按esc后，然后dG</span><br><span class="line"></span><br><span class="line">解析：</span><br><span class="line"></span><br><span class="line">gg：是让光标移到首行，在vim才有效，vi中无效 </span><br><span class="line"></span><br><span class="line">v ： 是进入Visual(可视）模式 </span><br><span class="line"></span><br><span class="line">G ：光标移到最后一行 </span><br><span class="line"></span><br><span class="line">选中内容以后就可以其他的操作了，比如： </span><br><span class="line">d  删除选中内容 </span><br><span class="line">y  复制选中内容到0号寄存器 </span><br></pre></td></tr></table></figure>



<p>创建文件夹子</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mkdir -p forward  #可创建孩子目录</span><br></pre></td></tr></table></figure>



<p>删除一个文件夹及其下面的所有文件</p>
<blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">rm -rf /home/packageA</span><br></pre></td></tr></table></figure>

<ul>
<li><code>-r</code>表示向下递归，不管有多少级目录，一并删除</li>
<li><code>-f</code>表示直接强行删除，不作任何提示的意思</li>
</ul>
</blockquote>
<p>rm[选项] 文件或目录</p>
<p>选项：</p>
<p>-f：强制删除（force），和-i选项相反，使用-f，系统将不再询问，而是直接删除目标文件或目录。</p>
<p>-i：和-f正好相反，在删除文件或目录之前，系统会给出提示信息，使用-i可以有效防止不小心删除有用的文件或目录。</p>
<p>-r：递归删除，主要用于删除目录，可删除指定目录及包含的所有内容，包括所有的子目录和文件。</p>
<hr>
<h2 id="1-安装CentOs7-虚拟机"><a href="#1-安装CentOs7-虚拟机" class="headerlink" title="1 安装CentOs7 虚拟机"></a>1 安装CentOs7 虚拟机</h2><p>VMware配置CentOS操作系统<br>1.VMware创建虚拟机<br>2.虚拟机安装CentOS系统<br>3.常见问题(含7和8常见问题)<br>4.VMware安装+Linux镜像下载+Linux系统安装全教程<br>1.VMware创建虚拟机<br>安装前说明：<br>对于之前下载好ios文件，尽量应该为他们放在一个专门的文件夹(例如：Linux-os)，方便以后操作。</p>
<p>注意需要的软件安装源地址</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http://mirrors.aliyun.com/centos/7/os/x86_64</span><br></pre></td></tr></table></figure>



<p><img src="/2024/01/10/VM%E8%99%9A%E6%8B%9F%E6%9C%BA-%E9%83%A8%E7%BD%B2%E7%AF%87/image-20231024142751853-1698128875955-1-1698128878358-3-1704895567126-2.png" alt="image-20231024142751853"></p>
<p><img src="/2024/01/10/VM%E8%99%9A%E6%8B%9F%E6%9C%BA-%E9%83%A8%E7%BD%B2%E7%AF%87/image-20231024142854241-1698128935974-5-1704895567127-3.png" alt="image-20231024142854241"></p>
<hr>
<h2 id="2-双系统安装教程"><a href="#2-双系统安装教程" class="headerlink" title="2 双系统安装教程"></a>2 双系统安装教程</h2><p>Windows+Ubuntu20.04</p>
<p>少一点包容</p>
<p>由于需要在Linux下写代码，之前虚拟机安装过centos，但运行速度不理想，使用颇为受限，故安装双系统，这篇教程没有繁琐赘述，重要之处以及我所遇到的一些BUG都会详细说明。</p>
<ol>
<li>为什么选择Ubuntu20.04</li>
</ol>
<p>之前使用centos，但是centos8.x已经不再维护，综合其他一些原因选择Ubuntu，而且这个发行版本会维护5年（具体到哪一年忘记了），很多需要用到的软件也会一直支持。</p>
<ol start="2">
<li>我的电脑配置</li>
</ol>
<ul>
<li>惠普战99 工作站</li>
<li>Windows10 家庭版 64</li>
<li>16GRAM</li>
<li>固态硬盘256，2T机械</li>
</ul>
<ol start="3">
<li>安装方式</li>
</ol>
<p>上面说到了，我的固态硬盘其实所剩无几，于是选择安装在机械硬盘（需要几百兆SSD容量），我压缩了500G的机械硬盘空间来给·Ubuntu，有条件的全部在分在固态硬盘就行。</p>
<p><strong>另外重要两点</strong></p>
<ul>
<li>Ubuntu的&#x2F;SWAP（虚拟内存）分区最好在固态硬盘这样读写速度会快一点（建议），具体大小根据RAM决定，后面会说明。</li>
<li>Ubuntu的&#x2F;boot分区要分在Windows系统盘，这样才能Ubuntu启动下读取到Windows，在开机的时候可以选择加载哪个系统。</li>
</ul>
<p>一、制作启动硬盘</p>
<ol>
<li>下载Ubuntu20.04 ISO</li>
</ol>
<p><a href="https://link.zhihu.com/?target=https://ubuntu.com/%23download">官网入口</a>下载LTS版本，我是直接下载的，搭配迅雷下载器还是很快的几分钟吧，如果速度很慢可以从华为或者<a href="https://link.zhihu.com/?target=https://mirrors.tuna.tsinghua.edu.cn/%23">清华大学镜像网站</a>下载。</p>
<p>2.下载 UltraISO并制作启动U盘</p>
<p><a href="https://link.zhihu.com/?target=https://cn.ultraiso.net/xiazai.html">UltraISO官网入口</a>点免费下载试用，安装好后打开点击免费试用。</p>
<p><strong>准备一个4G以上大小的U盘，制作过程中会格式化U盘，记得备份文件</strong></p>
<p>选择好下载的UbuntuISO文件打开，点击【启动】→【写入硬盘映像】如图：</p>
<p><img src="/2024/01/10/VM%E8%99%9A%E6%8B%9F%E6%9C%BA-%E9%83%A8%E7%BD%B2%E7%AF%87/v2-a7582ef91bab7b459ada9b1ad7ac76a0_720w-1704895567127-4.webp" alt="img"></p>
<p>写入方式选择【USB-HDD+】</p>
<p><img src="/2024/01/10/VM%E8%99%9A%E6%8B%9F%E6%9C%BA-%E9%83%A8%E7%BD%B2%E7%AF%87/v2-998a12e393050e4b79e082d5872efede_720w-1704895567127-5.webp" alt="img"></p>
<p>点击【写入】会弹出格式化U盘提示点击确定等待写入完成即可。</p>
<p>二、为Ubuntu分配磁盘空间</p>
<p>我们需要在固态硬盘（也就是系统盘）分出300M-500M的空间用于Ubuntu的&#x2F;boot分区来作为启动引导文件（否则无法启动Ubuntu，具体原因百度），另外如果固态硬盘充足可以预留处&#x2F;SWAP分区的空间。</p>
<p>swap,电脑内存8G大小就分配内存两倍的空间,8G以上跟内存一样大或者稍大1、2个G,交换空间,虚拟内存，这个建议分固态硬盘的区，不然会影响运行速度，机械硬盘也是可以用的.</p>
<p>右键点击【此电脑】，选择【管理】→【磁盘管理】，选择想压缩的盘右键单击可以看到压缩卷，点进去就能看到可压缩大小，单位是MB，我在机械硬盘分了500G大小，固态硬盘分了20G大小。</p>
<p><img src="/2024/01/10/VM%E8%99%9A%E6%8B%9F%E6%9C%BA-%E9%83%A8%E7%BD%B2%E7%AF%87/v2-a7b3b17c831d141d7c371e2bf69688cc_720w-1704895567127-6.webp" alt="img"></p>
<p><img src="/2024/01/10/VM%E8%99%9A%E6%8B%9F%E6%9C%BA-%E9%83%A8%E7%BD%B2%E7%AF%87/v2-9d643a569316c7e7ceba52c14146b880_720w-1704895567127-7.webp" alt="img"></p>
<p>这是我压缩好后的样子：</p>
<p><img src="/2024/01/10/VM%E8%99%9A%E6%8B%9F%E6%9C%BA-%E9%83%A8%E7%BD%B2%E7%AF%87/v2-81eb00993ff47329a64f190f4cd684ce_720w-1704895567128-8.webp" alt="img"></p>
<p><strong>由于电脑存储文件并非连续的，比如前面20G使用了，之间空了10G，后面的又占用了，那么这10G也就无法压缩。所以会出现可压缩空间远远小于剩余空间</strong></p>
<p><strong>解决方法参考：</strong></p>
<p><a href="https://link.zhihu.com/?target=https://blog.csdn.net/yturhd87b_gdvy/article/details/87933467?utm_medium=distribute.pc_relevant.none-task-blog-2~default~BlogCommendFromMachineLearnPai2~default-4.control&dist_request_id=&depth_1-utm_source=distribute.pc_relevant.none-task-blog-2~default~BlogCommendFromMachineLearnPai2~default-4.control">进行磁盘分区时，“可用压缩空间”远小于真实的空间大小时的设置方法</a></p>
<p><a href="https://link.zhihu.com/?target=https://blog.csdn.net/Rained_99/article/details/54023914?ops_request_misc=%257B%2522request%255Fid%2522%253A%2522161781081216780264038570%2522%252C%2522scm%2522%253A%252220140713.130102334..%2522%257D&request_id=161781081216780264038570&biz_id=0&utm_medium=distribute.pc_search_result.none-task-blog-2~all~baidu_landing_v2~default-1-54023914.first_rank_v2_pc_rank_v29&utm_term=c%E7%9B%98%E5%8E%8B%E7%BC%A9%E5%8D%B7%E5%8E%8B%E7%BC%A9%E7%A9%BA%E9%97%B4%E9%9D%9E%E5%B8%B8%E5%B0%8F%E6%80%8E%E4%B9%88%E5%8A%9E&spm=1018.2226.3001.4187">Windows系统压缩卷时可压缩空间远小于实际剩余空间解决方法</a></p>
<p>三、安装Ubuntu</p>
<ol>
<li>查看电脑BIOS模式</li>
</ol>
<p>WIN+R输入msinfo32，回车确认</p>
<p><img src="/2024/01/10/VM%E8%99%9A%E6%8B%9F%E6%9C%BA-%E9%83%A8%E7%BD%B2%E7%AF%87/v2-7f496b1b55827200e22c656c2e6c2ebc_720w-1704895567128-9.webp" alt="img"></p>
<p><strong>BIOS模式，传统代表MBR，另外就是UEFI，Ubuntu是UFFI模式</strong></p>
<ol start="2">
<li>BiOS安装准备</li>
</ol>
<p>插入我们制作好的启动硬盘，开机按F10进入BiOS模式（不同的电脑进入方式可能不同，另外建议把英文改为中文，方法自行百度）</p>
<p>不会操作先看说明，我的是按F1，选择【系统设置】→【启动选项】</p>
<p><img src="/2024/01/10/VM%E8%99%9A%E6%8B%9F%E6%9C%BA-%E9%83%A8%E7%BD%B2%E7%AF%87/v2-9cf9f2a77e9d27444360e3eb09840230_720w-1704895567128-10.webp" alt="img"></p>
<p>将【U盘&#x2F;USB硬盘】更改为首选项，我的电脑是按F5&#x2F;F6移动，F10保存。</p>
<p>保存退出后，电脑会自动重启进入Ubuntu的安装。</p>
<ol start="3">
<li>开始安装</li>
</ol>
<p>①. 将语言改为中文或者英文，点击安装Ubuntu</p>
<p><img src="/2024/01/10/VM%E8%99%9A%E6%8B%9F%E6%9C%BA-%E9%83%A8%E7%BD%B2%E7%AF%87/v2-9da46c5c372bea8efcaa0526502d9572_720w-1704895567128-11.webp" alt="img"></p>
<p>②. 键盘布局选择【Chinese】，后面的连接网络我就跳过了，如果要选择【正常安装】要联网。</p>
<p><img src="/2024/01/10/VM%E8%99%9A%E6%8B%9F%E6%9C%BA-%E9%83%A8%E7%BD%B2%E7%AF%87/v2-bd7878b3d797ae7e13bb21378e5140d5_720w-1704895567128-13.webp" alt="img"></p>
<p>③. 由于我准备的硬盘大小充足，所以我选择【正常安装】，也可以选择【最小安装】不影响使用。其他的在图中。</p>
<p><img src="/2024/01/10/VM%E8%99%9A%E6%8B%9F%E6%9C%BA-%E9%83%A8%E7%BD%B2%E7%AF%87/v2-6e985f05038a1659dba87319f00ce9ea_720w-1704895567128-12.webp" alt="img"></p>
<p>④. 安装类型选择其他选择其他选项。</p>
<p><img src="/2024/01/10/VM%E8%99%9A%E6%8B%9F%E6%9C%BA-%E9%83%A8%E7%BD%B2%E7%AF%87/v2-80415169d39eafc47d7bd734c4280daf_720w-1704895567128-14.webp" alt="img"></p>
<p><strong>⑤. 创建分区，这是最重要的一步，我的分区如下：</strong></p>
<p><strong>- 注意：先分逻辑区，再分主分区</strong></p>
<ul>
<li>1.&#x2F;swap交换分区（虚拟内存），逻辑分区，我分了16GB（8G及以下RAM选择两倍大小，以上跟RAM大小一样就行）</li>
<li>2.&#x2F;boot分区 ，逻辑分区，默认ext4。 我分了将近300M，放置Ubuntu的启动引导文件，</li>
<li>3.&#x2F; 根分区（root分区），逻辑分区，我选择100G就可以，默认ext4，</li>
<li>4.&#x2F;home分区，主分区，默认ext4，我选择400G，用户的所有文件都在这里。</li>
</ul>
<p><strong>说明：交换分区和&#x2F;boot分区容量我都是在c盘压缩的，&#x2F;和&#x2F;home分区总共500G是在机械硬盘分的，另外根据自己的实际情况合理分配就行了，按照我的比例。</strong></p>
<p>不清楚Linux分区的自行百度或者查看这篇文章：<a target="_blank" rel="noopener" href="https://zhuanlan.zhihu.com/p/122335496">Linux下硬盘分区：根分区（&#x2F;）交换分区（&#x2F;swap）和&#x2F;boot分区</a></p>
<p>分区按照我上面的说明来就行，我就不一一展示了，位置选择压缩好的空闲分区（或者用分区助手创建的分区，看大小和使用量就知道，创建的分区不是空闲分区，不能点加号，更改为可用就行），点左下角加号创建。</p>
<p><img src="/2024/01/10/VM%E8%99%9A%E6%8B%9F%E6%9C%BA-%E9%83%A8%E7%BD%B2%E7%AF%87/v2-bd361fb1ce1e6c8f1abafbb146c3dec2_720w-1704895567128-15.webp" alt="img"></p>
<p><strong>安装启动引导器的设备选择&#x2F;boot分区那个路径，然后点击【现在安装】</strong></p>
<p><img src="/2024/01/10/VM%E8%99%9A%E6%8B%9F%E6%9C%BA-%E9%83%A8%E7%BD%B2%E7%AF%87/v2-c74b8274a6c903632a9619ab7144090f_720w-1704895567128-16.webp" alt="img"></p>
<p>⑥. 开始安装，我只用了20分钟不到就安装好了，没有几个小时，一次成功。</p>
<p><img src="/2024/01/10/VM%E8%99%9A%E6%8B%9F%E6%9C%BA-%E9%83%A8%E7%BD%B2%E7%AF%87/v2-8fdb63519abad7388c511a6cf07511dd_720w-1704895567128-17.webp" alt="img"></p>
<ol start="4">
<li>更改BIOS启动选项</li>
</ol>
<p>安装好Ubuntu之后，<strong>拔下U盘（不拔等会开机还会进入Ubuntu安装）</strong>，右上角关机，彻底关机后开机F10进入BIOS，跟之前的步骤一样，<strong>选择【系统设置】→【启动选项】，将【操作系统的启动管理员】上移</strong></p>
<p><img src="/2024/01/10/VM%E8%99%9A%E6%8B%9F%E6%9C%BA-%E9%83%A8%E7%BD%B2%E7%AF%87/v2-9a01398f2c9ffbb690b97a0243d9fec4_720w-1704895567128-18.webp" alt="img"></p>
<p>按ENTER将Ubuntu启动移到第一位，保存退出，开机进入启动界面就可以看到选项了，第一位是Ubuntu，第三个是Windows.</p>
<p><img src="/2024/01/10/VM%E8%99%9A%E6%8B%9F%E6%9C%BA-%E9%83%A8%E7%BD%B2%E7%AF%87/v2-590a928c37fe067ae3cfd4e46130d694_720w-1704895567128-19.webp" alt="img"></p>
<p><img src="/2024/01/10/VM%E8%99%9A%E6%8B%9F%E6%9C%BA-%E9%83%A8%E7%BD%B2%E7%AF%87/v2-c75430f0a3deaa05ba46b6a81bb7d95e_720w-1704895567128-20.webp" alt="img"></p>
<p>四. 安装完成</p>
<p>至此Ubuntu安装全部完成，接下来就可以愉快的使用Linux了，遇到不会的建议先查看官方文档。如果教程有什么不足之处欢迎指正评论。学无止境，希望这篇文章对你有所帮助！</p>
<p>编辑于 2021-04-11 19:50</p>
<hr>
<h2 id="3-直接复制虚拟机出现网络问题"><a href="#3-直接复制虚拟机出现网络问题" class="headerlink" title="3 直接复制虚拟机出现网络问题"></a>3 直接复制虚拟机出现网络问题</h2><p><a target="_blank" rel="noopener" href="http://phpzyw.com/bc853B2wHB1lWCwQ.html">http://phpzyw.com/bc853B2wHB1lWCwQ.html</a></p>
<p>首先我的虚拟机是复制出来的，选择我已经移到，但是结果会出现了以下情况，导致了我无法ping 通，先看下提示：</p>
<p><img src="/2024/01/10/VM%E8%99%9A%E6%8B%9F%E6%9C%BA-%E9%83%A8%E7%BD%B2%E7%AF%87/454642-20190327130547818-180375002-1704895567128-21.jpg" alt="img"></p>
<p>使用：ipconfig –all 命令查寻，果然再现有打开的虚拟机中，存在两个mac地址相同的虚拟机，所以就有思路了，修改mac地址。</p>
<p><strong>尝试1：直接利用虚拟机自带的修改mac地址</strong></p>
<p>选择对应的虚拟机，直接在虚拟机设置中进行修改，修改步骤如下</p>
<p><img src="/2024/01/10/VM%E8%99%9A%E6%8B%9F%E6%9C%BA-%E9%83%A8%E7%BD%B2%E7%AF%87/454642-20190327130555796-713925591-1704895567128-22.jpg" alt="img"></p>
<p>不知道是不是虚拟机没关闭的原因导致的修改无效，所以我采用了第二种方法，简单粗暴点。</p>
<p><strong>尝试2：修改网卡的mac地址</strong></p>
<p>选中网卡后右击，在右击菜单中点击属性，在本地连接属性对话框中，点击“配置”按钮</p>
<p><img src="/2024/01/10/VM%E8%99%9A%E6%8B%9F%E6%9C%BA-%E9%83%A8%E7%BD%B2%E7%AF%87/454642-20190327130602386-1146755331-1704895567128-23.jpg" alt="img"></p>
<p>在打开的网卡属性对话框中，点击高级选项卡；找到本地管理的地址；默认选择不存在，需要设定实际值，点击上一个圆圈选项后，输入一个12位的16进制数(我这里是已经修改过的，所以填了数字)</p>
<p><img src="/2024/01/10/VM%E8%99%9A%E6%8B%9F%E6%9C%BA-%E9%83%A8%E7%BD%B2%E7%AF%87/454642-20190327130608863-1309058065-1704895567129-24.jpg" alt="img"></p>
<p>然后再看，网络就好了</p>
<p><strong>当然还有第三种方法，修改注册表，</strong>不过我觉得注册表修改有点麻烦，需要先找到对应的网卡，步骤如下：</p>
<p>1、在Cortana搜索栏输入regedit，按回车键进入注册表编辑器</p>
<p>2、定位到HKEY_LOCAL_MACHINESYSTEMCurrentControlSetControlClass{4D36E972-E325-11CE-BFC1-08002bE10318}</p>
<p>3、每个00XX的代号都代表一个网卡（要想分辨出你想要的网卡型号，得在点击编号后，在右侧的DriverDesc值中确定型号，如下图）</p>
<p><img src="/2024/01/10/VM%E8%99%9A%E6%8B%9F%E6%9C%BA-%E9%83%A8%E7%BD%B2%E7%AF%87/454642-20190327130624051-1893751589-1704895567129-25.jpg" alt="img"></p>
<p>4、确定好网卡后，就在这个网卡的项目中新建一个字符串值，命名为NetworkAddress，内容是新的MAC地址，如下图</p>
<p><img src="/2024/01/10/VM%E8%99%9A%E6%8B%9F%E6%9C%BA-%E9%83%A8%E7%BD%B2%E7%AF%87/454642-20190327130631043-1941151696-1704895567129-26.jpg" alt="img"></p>
<p><img src="/2024/01/10/VM%E8%99%9A%E6%8B%9F%E6%9C%BA-%E9%83%A8%E7%BD%B2%E7%AF%87/454642-20190327130635687-781689277-1704895567129-27.png" alt="img"></p>
<p>5、点击“确定”后修改完毕，此时需要重启连接进行验证。可以在相应的“网络连接”中单击右键，选择“禁用”，然后再点击“启用”即可</p>
<h2 id="2-安装SSH"><a href="#2-安装SSH" class="headerlink" title="2 安装SSH"></a>2 安装SSH</h2><h3 id="2-1-安装"><a href="#2-1-安装" class="headerlink" title="2.1 安装"></a>2.1 安装</h3><p>Step 1: 检查是否已安装OpenSSH</p>
<p>在安装OpenSSH之前，需要检查系统是否已经安装了OpenSSH。可以通过以下命令来检查：</p>
<p>`&#96;&#96;</p>
<p>rpm -qa | grep openssh</p>
<p>如果输出结果中包含openssh，那么说明已经安装了OpenSSH，否则需要进行安装。</p>
<p>Step 2: 安装OpenSSH</p>
<p>CentOS 7使用yum软件包管理器来进行软件安装。可以通过以下命令来安装OpenSSH：</p>
<p>sudo yum install openssh-server</p>
<p>安装完成后，可以通过以下命令来启动OpenSSH：</p>
<p>sudo systemctl start sshd</p>
<p>Step 3: 配置OpenSSH</p>
<p>默认情况下，OpenSSH配置文件位于&#x2F;etc&#x2F;ssh&#x2F;sshd_config。可以通过编辑该文件来配置OpenSSH。可以通过以下命令来编辑该文件：</p>
<p>sudo vi &#x2F;etc&#x2F;ssh&#x2F;sshd_config</p>
<p>在该文件中，可以配置以下内容：</p>
<p>- 端口号：默认情况下，OpenSSH使用22端口。可以通过修改Port字段来更改端口号。</p>
<p>- 允许的用户：默认情况下，OpenSSH允许所有用户登录。可以通过修改AllowUsers字段来限制允许登录的用户。</p>
<p>- 允许的IP地址：可以通过修改AllowUsers字段来限制允许登录的IP地址。</p>
<p>修改完成后，需要重新启动OpenSSH才能使配置生效：</p>
<p>sudo systemctl restart sshd</p>
<p>Step 4: 连接到远程计算机</p>
<p>安装和配置OpenSSH后，可以使用ssh命令连接到远程计算机。可以使用以下命令连接到IP地址为192.168.1.100的远程计算机：</p>
<p>ssh <a href="mailto:&#x75;&#115;&#101;&#114;&#x6e;&#x61;&#109;&#x65;&#64;&#x31;&#57;&#x32;&#46;&#x31;&#x36;&#x38;&#x2e;&#49;&#46;&#x31;&#x30;&#x30;">&#x75;&#115;&#101;&#114;&#x6e;&#x61;&#109;&#x65;&#64;&#x31;&#57;&#x32;&#46;&#x31;&#x36;&#x38;&#x2e;&#49;&#46;&#x31;&#x30;&#x30;</a></p>
<p>username是远程计算机上的用户名。如果连接成功，将会提示输入密码。</p>
<hr>
<h3 id="2-2-使用"><a href="#2-2-使用" class="headerlink" title="2.2 使用"></a>2.2 使用</h3><p>在CentOS中开启SSH服务需要以下步骤：</p>
<p>1.安装OpenSSH服务</p>
<p>打开终端，输入以下命令安装OpenSSH服务：</p>
<p>sudo yum install openssh-server</p>
<p>2.开启SSH服务</p>
<p>输入以下命令启动SSH服务并设置为开机启动：</p>
<p>sudo systemctl enable sshd</p>
<p>sudo systemctl start sshd</p>
<p>3.设置防火墙规则</p>
<p>输入以下命令来开启SSH端口：</p>
<p>sudo firewall-cmd –permanent –add-service&#x3D;ssh</p>
<p>sudo firewall-cmd –reload</p>
<p>4.测试SSH服务</p>
<p>在另一台计算机或移动设备上安装SSH客户端，并使用CentOS机器的IP地址或域名进行连接。若连接成功则说明SSH服务已开启成功。</p>
<p>cnetOS7</p>
<p>安装mysql 5 ，参考链接 </p>
<p><a target="_blank" rel="noopener" href="https://zhuanlan.zhihu.com/p/519001709">安装配置_MySQL安装配置(Linux) - 知乎 (zhihu.com)</a></p>
<h2 id="3-删除mysql数据-："><a href="#3-删除mysql数据-：" class="headerlink" title="3 删除mysql数据 ："></a>3 删除mysql数据 ：</h2><p>1、查看当前mysql安装状况</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">rpm -qa | grep mysql``# 或``yum list install | grep mysql</span><br></pre></td></tr></table></figure>

<p>2、查看mysql的服务是否启动</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">systemctl status mysqld</span><br></pre></td></tr></table></figure>

<p>2.1、如果启动则关闭mysql服务</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">systemctl stop mysqld.service  # service可加可不加</span><br><span class="line"># 停止MySQL的服务</span><br><span class="line">[root@chenstudy ~]\# systemctl stop mysqld</span><br><span class="line"># 再次查看MySQL的服务状态</span><br><span class="line">[root@chenstudy ~]\# systemctl status mysqld</span><br></pre></td></tr></table></figure>

<p>3、 卸载上述命令查询出的已安装程序</p>
<p><a href="javascript:void(0);"><img src="/2024/01/10/VM%E8%99%9A%E6%8B%9F%E6%9C%BA-%E9%83%A8%E7%BD%B2%E7%AF%87/copycode.gif" alt="复制代码"></a></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">yum remove mysql-community-libs-8.0.30-1.el7.x86_64</span><br><span class="line">rpm -qa | grep mysql</span><br><span class="line">yum remove mysql-community-client-plugins-8.0.30-1.el7.x86_64</span><br><span class="line">rpm -qa | grep mysql</span><br><span class="line">yum remove mysql-community-server-8.0.30-1.el7.x86_64</span><br><span class="line">rpm -qa | grep mysql</span><br></pre></td></tr></table></figure>

<p>4、删除mysql相关文件</p>
<ul>
<li>查找相关文件</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">find / -name mysql</span><br></pre></td></tr></table></figure>

<ul>
<li>删除上述命令查找出来的相关文件</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"> /usr/lib64/mysql</span><br><span class="line">rm -rf /var/lib/mysql</span><br><span class="line">rm -rf /var/lib/mysql/mysql</span><br><span class="line">rm -rf /etc/selinux/targeted/active/modules/100/mysql</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">rm -rf /etc/selinux/targeted/active/modules/100/mysql</span><br><span class="line">rm -rf /usr/share/mysql</span><br><span class="line">rm -rf /usr/lib64/mysql</span><br></pre></td></tr></table></figure>

<p>5、删除my.cnf</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">rm -rf /etc/my.cnf</span><br></pre></td></tr></table></figure>

<h2 id="4-安装mysql-5-7："><a href="#4-安装mysql-5-7：" class="headerlink" title="4 安装mysql 5.7："></a>4 安装mysql 5.7：</h2><p><strong>1. 使用wget命令下载</strong></p>
<p>用<code>wget</code>命令下载到指定目录：wget -P [目录] [下载链接]</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">wget http://dev.mysql.com/get/Downloads/MySQL-5.7/mysql-5.7.36-linux-glibc2.12-x86_64.tar.gz</span><br></pre></td></tr></table></figure>

<p>二、安装</p>
<p>(参考链接 :[Centos系统安装mysql-5.7.22（tar.gz安装包）_centos.tar.gz 下载-CSDN博客](<a target="_blank" rel="noopener" href="https://blog.csdn.net/dc282614966/article/details/81098074#:~:text=1.%E5%B0%86%E4%B8%8B%E8%BD%BD%E5%A5%BD%E7%9A%84%E5%AE%89%E8%A3%85%E5%88%B0%E8%A7%A3%E5%8E%8B%E5%88%B0%2Fusr%2Flocal%E7%9B%AE%E5%BD%95%E4%B8%8B">https://blog.csdn.net/dc282614966/article/details/81098074#:~:text=1.将下载好的安装到解压到%2Fusr%2Flocal目录下</a> tar -zxvf mysql- 5.7.22 -linux-glibc 2.12 -x,-x 86 _ 64 mysql 4.为centos添加mysql用户组和mysql用户 (-s %2Fbin%2Ffalse参数指定mysql用户仅拥有所有权，而没有登录权限)) )与(<a target="_blank" rel="noopener" href="https://zhuanlan.zhihu.com/p/519001709">安装配置_MySQL安装配置(Linux) - 知乎 (zhihu.com)</a>)</p>
<p>1.将下载好的安装到解压到&#x2F;usr&#x2F;local目录下</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">tar -zxvf mysql-5.7.36-linux-glibc2.12-x86_64.tar.gz -C /usr/local/</span><br></pre></td></tr></table></figure>

<p>2.进入&#x2F;usr&#x2F;local目录</p>
<p>cd &#x2F;usr&#x2F;local&#x2F;</p>
<p>3.为mysql安装目录创建软链接</p>
<p>ln -s mysql-5.7.36-linux-glibc2.12-x86_64&#x2F; mysql</p>
<p>4.为centos添加mysql用户组和mysql用户(-s &#x2F;bin&#x2F;false参数指定mysql用户仅拥有所有权，而没有登录权限)</p>
<p>groupadd mysql<br>useradd -r -g mysql -s &#x2F;bin&#x2F;false mysql</p>
<p>5.进入安装mysql软件的目录，命令如下</p>
<p>cd &#x2F;usr&#x2F;local&#x2F;mysql</p>
<p>6.修改当前目录拥有者为新建的mysql用户，命令如下：</p>
<p>chown -R mysql:mysql .&#x2F;</p>
<p>7.安装mysql，命令如下：</p>
<p>.&#x2F;bin&#x2F;mysqld –user&#x3D;mysql –basedir&#x3D;&#x2F;usr&#x2F;local&#x2F;mysql –datadir&#x3D;&#x2F;usr&#x2F;local&#x2F;mysql&#x2F;data –initialize</p>
<p>如果出现如下图所示则为安装成功，红框部分为生成的默认密码：</p>
<p><img src="/2024/01/10/VM%E8%99%9A%E6%8B%9F%E6%9C%BA-%E9%83%A8%E7%BD%B2%E7%AF%87/Users\XiaoBai\AppData\Roaming\Typora\typora-user-images\image-20231018094241974.png" alt="image-20231018094241974"></p>
<p>8.开启mysql服务，命令如下：</p>
<p>.&#x2F;support-files&#x2F;mysql.server start</p>
<p>如果出现如下错误，则说明mysql配置文件&#x2F;etc&#x2F;my.cnf中的路径不对，修改内容如下，datadir和socket都修改成mysql的安装目录下，增加[client]板块，用于命令行连接mysql数据库。</p>
<p><img src="/2024/01/10/VM%E8%99%9A%E6%8B%9F%E6%9C%BA-%E9%83%A8%E7%BD%B2%E7%AF%87/Users\XiaoBai\AppData\Roaming\Typora\typora-user-images\image-20231018094525894.png" alt="image-20231018094525894"></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line">[mysqld]</span><br><span class="line">port=3306</span><br><span class="line">datadir=/usr/local/mysql/data</span><br><span class="line">socket=/usr/local/mysql/mysql.sock</span><br><span class="line">user=mysql</span><br><span class="line">max_connections=151</span><br><span class="line"></span><br><span class="line"># Disabling symbolic-links is recommended to prevent assorted security risks</span><br><span class="line"></span><br><span class="line">symbolic-links=0</span><br><span class="line"></span><br><span class="line"># 设置忽略大小写</span><br><span class="line"></span><br><span class="line">lower_case_table_names = 1</span><br><span class="line"></span><br><span class="line"># 指定编码</span><br><span class="line"></span><br><span class="line">character-set-server=utf8</span><br><span class="line"></span><br><span class="line">collation-server=utf8_general_ci</span><br><span class="line"></span><br><span class="line"># 开启ip绑定</span><br><span class="line"></span><br><span class="line">bind-address = 0.0.0.0</span><br><span class="line"></span><br><span class="line">[mysqld_safe]</span><br><span class="line">log-error=/var/log/mysqld.log</span><br><span class="line">pid-file=/var/run/mysqld/mysqld.pid</span><br><span class="line"></span><br><span class="line">#指定客户端连接mysql时的socket通信文件路径</span><br><span class="line">[client]</span><br><span class="line">socket=/usr/local/mysql/mysql.sock</span><br><span class="line"></span><br><span class="line">default-character-set=utf8</span><br></pre></td></tr></table></figure>

<p>9.重新启开启mysql服务，如下图所示则开启成功！</p>
<p>.&#x2F;support-files&#x2F;mysql.server start</p>
<p>10.将mysql进程放入系统进程中，命令如下：</p>
<p>cp support-files&#x2F;mysql.server &#x2F;etc&#x2F;init.d&#x2F;mysqld</p>
<p>11.重新启动mysql服务，命令如下：</p>
<p>service mysqld restart</p>
<p>12.配置mysql环境变量</p>
<p>vi &#x2F;etc&#x2F;profile<br>export PATH&#x3D;$PATH:&#x2F;usr&#x2F;local&#x2F;mysql&#x2F;bin</p>
<p>保存退出，再编译下：</p>
<p>source &#x2F;etc&#x2F;profile<br>13.使用随机密码登录mysql数据库，命令如下：</p>
<p>mysql -u root -p</p>
<p>14.进入mysql操作行，为root用户设置新密码（小编设为<strong>root</strong>）：</p>
<p>在13条中输入如下命令：</p>
<p>alter user ‘root‘@’localhost’ identified by ‘root’;</p>
<p>15.设置允许远程连接数据库，命令如下：</p>
<p>先选择数据库：</p>
<p>use mysql<br>update user set user.Host&#x3D;’%’ where user.User&#x3D;’root’;<br>查看修改后的值：</p>
<p>select user,host from user;</p>
<p>16.刷新权限，命令如下：</p>
<p>flush privileges;</p>
<p>17、开启3306防火墙端口，然后即可远程连接mysql（因为我的防火墙是全部关闭，所以省略了这步）</p>
<p>18、如果还是无法远程连接，查看&#x2F;etc&#x2F;my.cnf</p>
<p>找到bind-address &#x3D; 127.0.0.1这一行<br>改为bind-address &#x3D; 0.0.0.0即可</p>
<ul>
<li></li>
</ul>
<p>开启mysql服务</p>
<p>5.进入安装mysql软件的目录，命令如下</p>
<p>cd &#x2F;usr&#x2F;local&#x2F;mysql</p>
<p>8.开启mysql服务，命令如下：</p>
<p>.&#x2F;support-files&#x2F;mysql.server start</p>
<p>关闭防火墙</p>
<p>1:查看防火状态</p>
<p>systemctl status firewalld</p>
<p>(已经被关闭了)</p>
<p><img src="/2024/01/10/VM%E8%99%9A%E6%8B%9F%E6%9C%BA-%E9%83%A8%E7%BD%B2%E7%AF%87/Users\XiaoBai\AppData\Roaming\Typora\typora-user-images\image-20231018102342545.png" alt="image-20231018102342545"></p>
<p>2:暂时关闭防火墙</p>
<p>systemctl stop firewalld</p>
<p>3:重启防火墙</p>
<p>systemctl enable firewalld</p>
<p>然后reboot 重启虚拟机就OK了</p>
<hr>
<h2 id="5-安装-redis-数据库"><a href="#5-安装-redis-数据库" class="headerlink" title="5 安装 redis 数据库"></a>5 安装 redis 数据库</h2><p>参考 [VMware虚拟机如何设置CentOS 7 磁盘扩容？_centos虚拟机磁盘扩容-CSDN博客](<a target="_blank" rel="noopener" href="https://blog.csdn.net/wuliyun88/article/details/128909346#:~:text=%E6%89%93%E5%BC%80">https://blog.csdn.net/wuliyun88/article/details/128909346#:~:text=打开</a> 虚拟机 （必须处于关 机 状态），点击【编辑 虚拟机设置,】，然后点击【 磁盘 】，接着点击【扩展】，输入修改后的最大 磁盘 容量50G，具体操作时最大容量根据自己的需求 设置 即可。)  与 <a target="_blank" rel="noopener" href="https://blog.csdn.net/qq_33479841/article/details/107586714">史上最详细centos 7环境下安装并启动redis_centos7 redis 启动-CSDN博客</a></p>
<p>1 下载安装包<br>首先要下载redis的安装包到centos环境中，下载方式可以先下载到本地，再利用文件传输工具传到centos环境；也可以直接利用wget命令在centos环境中直接下载（前提是centos环境处于联网状态）。本文将直接演示利用wget命令方式进行下载，对应redis的版本是4.0。命令如下：</p>
<p>wget <a target="_blank" rel="noopener" href="http://download.redis.io/releases/redis-4.0.0.tar.gz">http://download.redis.io/releases/redis-4.0.0.tar.gz</a></p>
<p>2.2 解压redis安装包<br>安装包下载完成之后，需要进行解压，具体指令如下：</p>
<p>tar -xvf redis-4.0.0.tar.gz</p>
<p>2.3 安装redis<br>由于在linux环境下安装软件需要先编译再进行安装，因此安装redis步骤如下：<br>1.进入刚才解压的文件夹，指令如下：</p>
<p>cd redis-4.0.0</p>
<p>2.编译安装redis，指令如下：</p>
<p>make install</p>
<p>成功出现</p>
<p><img src="/2024/01/10/VM%E8%99%9A%E6%8B%9F%E6%9C%BA-%E9%83%A8%E7%BD%B2%E7%AF%87/Users\XiaoBai\AppData\Roaming\Typora\typora-user-images\image-20231018112621982.png" alt="image-20231018112621982"></p>
<p>3.执行一下make test命令，若出现以下结果，则表明编译安装失败。</p>
<p><img src="/2024/01/10/VM%E8%99%9A%E6%8B%9F%E6%9C%BA-%E9%83%A8%E7%BD%B2%E7%AF%87/Users\XiaoBai\AppData\Roaming\Typora\typora-user-images\image-20231018112752564.png" alt="image-20231018112752564"></p>
<p>4.若过程中出现测试不通过，有可能是没有安装gcc环境和tcl环境，具体安装步骤可以参考以下blog：</p>
<p>4.1遇到问题1  <a target="_blank" rel="noopener" href="https://blog.csdn.net/qq_35887546/article/details/104794642">https://blog.csdn.net/qq_35887546/article/details/104794642</a><br>1</p>
<p>4.2遇到问题2  <a target="_blank" rel="noopener" href="https://www.cnblogs.com/cxbhakim/p/9150953.html">https://www.cnblogs.com/cxbhakim/p/9150953.html</a><br>1</p>
<p>4.2.1问题2参考</p>
<p>安装redis的时候，出现了这么一个问题</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@etcd3 src]``# make test``You need tcl 8.5 or newer ``in` `order to run the Redis ``test``make``: *** [``test``] Error 1</span><br></pre></td></tr></table></figure>

<p>　　</p>
<p>安装一下8.5或者最新的tcl</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@etcd3 tmp]``# wget http://downloads.sourceforge.net/tcl/tcl8.6.1-src.tar.gz``[root@etcd3 tmp]``# tar xzvf tcl8.6.1-src.tar.gz -C /usr/local/``[root@etcd3 tmp]``# cd /usr/local/tcl8.6.1/unix/``[root@etcd3 unix]``# ./configure``[root@etcd3 unix]``# make``[root@etcd3 unix]``# make isntall</span><br></pre></td></tr></table></figure>

<p>　　</p>
<p>重新执行redis test： [root@etcd3 src]# make test </p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">[root@etcd3 src]# make test</span><br><span class="line">...</span><br><span class="line"></span><br><span class="line">\o/ All tests passed without errors!</span><br><span class="line"></span><br><span class="line">Cleanup: may take some time... OK</span><br></pre></td></tr></table></figure>

<p>以上</p>
<p>按照以上步骤，若均成功安装，则执行make test指令会显示通过。</p>
<p><img src="/2024/01/10/VM%E8%99%9A%E6%8B%9F%E6%9C%BA-%E9%83%A8%E7%BD%B2%E7%AF%87/Users\XiaoBai\AppData\Roaming\Typora\typora-user-images\image-20231018113942407.png" alt="image-20231018113942407"></p>
<p>3.启动redis<br>1.进入redis的安装目录下的src文件夹下，执行ll指令可以查看文件夹下的文件：</p>
<p><img src="/2024/01/10/VM%E8%99%9A%E6%8B%9F%E6%9C%BA-%E9%83%A8%E7%BD%B2%E7%AF%87/Users\XiaoBai\AppData\Roaming\Typora\typora-user-images\image-20231018114510909.png" alt="image-20231018114510909"></p>
<p>2.利用指令 .&#x2F;redis-server来启动redis，启动成功后会出现以下界面：</p>
<p><img src="/2024/01/10/VM%E8%99%9A%E6%8B%9F%E6%9C%BA-%E9%83%A8%E7%BD%B2%E7%AF%87/Users\XiaoBai\AppData\Roaming\Typora\typora-user-images\image-20231018114614033.png" alt="image-20231018114614033"></p>
<p>3.在虚拟机中重新复制一个会话，进入redis的安装目录，也就是src文件夹下：</p>
<p><img src="/2024/01/10/VM%E8%99%9A%E6%8B%9F%E6%9C%BA-%E9%83%A8%E7%BD%B2%E7%AF%87/Users\XiaoBai\AppData\Roaming\Typora\typora-user-images\image-20231018114720737.png" alt="image-20231018114720737"></p>
<p>4.进入到src文件夹下执行.&#x2F;redis-cli指令，启动redis客户端（前提是服务端也处于启动状态），则会显示连接成功。</p>
<p><img src="/2024/01/10/VM%E8%99%9A%E6%8B%9F%E6%9C%BA-%E9%83%A8%E7%BD%B2%E7%AF%87/Users\XiaoBai\AppData\Roaming\Typora\typora-user-images\image-20231018115318043.png" alt="image-20231018115318043"></p>
<p>5.rdis 设置默认密码</p>
<p>5.1 方案一</p>
<p>复制redis.conf文件</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cd</span> /app/redis-6.2.5/</span><br><span class="line"><span class="built_in">cp</span> redis.conf /usr/local/redis/bin</span><br><span class="line"><span class="built_in">cd</span> /usr/local/redis/bin/</span><br></pre></td></tr></table></figure>

<p>修改redis.conf文件</p>
<p><img src="/2024/01/10/VM%E8%99%9A%E6%8B%9F%E6%9C%BA-%E9%83%A8%E7%BD%B2%E7%AF%87/Users\XiaoBai\AppData\Roaming\Typora\typora-user-images\image-20231018145542385.png" alt="image-20231018145542385"></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">vim redis.conf</span><br><span class="line"><span class="comment"># 开启守护模式 224行</span></span><br><span class="line">daemonize <span class="built_in">yes</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 修改密码 901行</span></span><br><span class="line">requirepass juihui@2023</span><br><span class="line"></span><br><span class="line"><span class="comment">#将bind 127.0.0.1须改成 bind 0.0.0.0 否则只能在本机访问</span></span><br><span class="line"><span class="built_in">bind</span> 0.0.0.0 </span><br></pre></td></tr></table></figure>

<p>后台启动项目</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 在redis目录的src下指定配置文件启动</span></span><br><span class="line"><span class="built_in">cd</span> /usr/local/redis-4.0.0/src/</span><br><span class="line">./redis-server .././redis.conf</span><br></pre></td></tr></table></figure>





<p>5.2方案二</p>
<p>然后是不需要重启redis服务的密码设置方式<br>这种相对简单，连接redis之后，通过命令设置，如下：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">config set requirepass 123456</span><br></pre></td></tr></table></figure>


<p>如此，便将密码设置成了123456<br>设置之后，可通过以下指令查看密码</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">config get requirepass</span><br></pre></td></tr></table></figure>



<p><font color="red"> <strong>Redis (error) NOAUTH Authentication required.解决方法</strong> </font> </p>
<p>出现认证问题，应该是设置了认证密码，输入密码既可以啦</p>
<p>注意密码是字符串形式！设置为123456</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">127.0.0.1:6379&gt; auth &quot;123456&quot;</span><br></pre></td></tr></table></figure>

<p>6 启动redis服务</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">cd /usr/local/redis-4.0.0/src/</span><br><span class="line"></span><br><span class="line"> ./redis-server</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">ps aux|grep redis  查看服务</span><br><span class="line"></span><br><span class="line"> kill -s 9 2613  杀死服务</span><br></pre></td></tr></table></figure>



<h2 id="6-安装gitlab"><a href="#6-安装gitlab" class="headerlink" title="6 安装gitlab"></a>6 安装gitlab</h2><p>参考链接（<a target="_blank" rel="noopener" href="https://blog.csdn.net/shy871/article/details/117598669">【精选】centos7安装部署gitlab_centos7 安装gitlab-CSDN博客</a> ） 与（<a target="_blank" rel="noopener" href="https://blog.csdn.net/qq_41694906/article/details/104815384">CentOs7 安装Gitlab_centos7安装gitlab-CSDN博客</a>）<br>1、安装依赖</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">yum install curl openssh-server openssh-clients postfix policycoreutils-python</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>2、启动ssh</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">systemctl enable sshd</span><br><span class="line">systemctl start sshd</span><br></pre></td></tr></table></figure>

<p>3、添加http服务到firewalld,pemmanent表示永久生效，若不加–permanent系统下次启动后就会失效</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">systemctl start firewalld</span><br><span class="line">firewall-cmd --permanent --add-service=http</span><br><span class="line">systemctl reload firewalld</span><br></pre></td></tr></table></figure>

<p>4、启动postfix</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">systemctl enable postfix</span><br><span class="line">systemctl start postfix</span><br></pre></td></tr></table></figure>

<p>4.1出现错误</p>
<p><img src="/2024/01/10/VM%E8%99%9A%E6%8B%9F%E6%9C%BA-%E9%83%A8%E7%BD%B2%E7%AF%87/Users\XiaoBai\AppData\Roaming\Typora\typora-user-images\image-20231018140146231.png" alt="image-20231018140146231"></p>
<p>解决方案（<a target="_blank" rel="noopener" href="https://blog.csdn.net/qq_41438223/article/details/106314215">Centos7.x启动postfix服务失败，提示 Job for postfix.service failed because the control process exited with-CSDN博客</a>）</p>
<p>5、下载安装gitlab</p>
<p>1.添加gitlab镜像</p>
<p>wget <a target="_blank" rel="noopener" href="https://mirrors.tuna.tsinghua.edu.cn/gitlab-ce/yum/el7/gitlab-ce-10.0.0-ce.0.el7.x86_64.rpm">https://mirrors.tuna.tsinghua.edu.cn/gitlab-ce/yum/el7/gitlab-ce-10.0.0-ce.0.el7.x86_64.rpm</a></p>
<p>2.安装gitlab 安装命令：rpm -i gitlab-ce-10.0.0-ce.0.el7.x86_64.rpm</p>
<p>3.修改gitlab配置文件指定服务器ip和自定义端口：</p>
<p>vim  &#x2F;etc&#x2F;gitlab&#x2F;gitlab.rb </p>
<p><img src="/2024/01/10/VM%E8%99%9A%E6%8B%9F%E6%9C%BA-%E9%83%A8%E7%BD%B2%E7%AF%87/Users\XiaoBai\AppData\Roaming\Typora\typora-user-images\image-20231018151728126.png" alt="image-20231018151728126"></p>
<p>4.重置并启动GitLab</p>
<p>执行：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">gitlab-ctl reconfigure  #配置GitLab(配置完自动启动,默认账号root)</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>配置成功-&gt;</p>
<p><img src="/2024/01/10/VM%E8%99%9A%E6%8B%9F%E6%9C%BA-%E9%83%A8%E7%BD%B2%E7%AF%87/Users\XiaoBai\AppData\Roaming\Typora\typora-user-images\image-20231018152257252.png" alt="image-20231018152257252"></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">gitlab-ctl restart</span><br></pre></td></tr></table></figure>

<p>运行成功 -&gt;</p>
<p><img src="/2024/01/10/VM%E8%99%9A%E6%8B%9F%E6%9C%BA-%E9%83%A8%E7%BD%B2%E7%AF%87/Users\XiaoBai\AppData\Roaming\Typora\typora-user-images\image-20231018152340233.png" alt="image-20231018152340233"></p>
<p>6.访问 GitLab页面</p>
<p>如果没有域名，直接输入服务器ip和指定端口进行访问</p>
<p>初始账户: root 密码:5iveL!fe</p>
<p>第一次登录修改密码（后边会讲）</p>
<p>关闭防火墙；登录地址 http:192.168.0.133:9090&#x2F;users&#x2F;sign_in</p>
<p><img src="/2024/01/10/VM%E8%99%9A%E6%8B%9F%E6%9C%BA-%E9%83%A8%E7%BD%B2%E7%AF%87/Users\XiaoBai\AppData\Roaming\Typora\typora-user-images\image-20231018152820669.png" alt="image-20231018152820669"></p>
<hr>
<p>将gitlab的密码改为了 admin_gitlab</p>
<hr>
<p><strong>端口命令</strong></p>
<p>CentOS 7 开放防火墙端口 命令<br>        最近CentOS7的防火墙和6不一样了， 发现以前CentOS 6 系列中的 iptables 相关命令不能用了，查了下，发现Centos 7使用firewalld代替了原来的iptables。</p>
<p>使用方法如下：</p>
<blockquote>
<blockquote>
<blockquote>
<p><strong>关闭防火墙</strong></p>
</blockquote>
</blockquote>
</blockquote>
<p>systemctl stop firewalld.service             #停止firewall<br>systemctl disable firewalld.service        #禁止firewall开机启动</p>
<blockquote>
<blockquote>
<blockquote>
<p>开启端口</p>
</blockquote>
</blockquote>
</blockquote>
<p>firewall-cmd –zone&#x3D;public –add-port&#x3D;80&#x2F;tcp –permanent<br> 命令含义：<br>–zone #作用域<br>–add-port&#x3D;80&#x2F;tcp #添加端口，格式为：端口&#x2F;通讯协议<br>–permanent #永久生效，没有此参数重启后失效</p>
<blockquote>
<blockquote>
<blockquote>
<p>重启防火墙<br>firewall-cmd –reload</p>
</blockquote>
</blockquote>
</blockquote>
<p>常用命令介绍</p>
<p>firewall-cmd –state                           ##查看防火墙状态，是否是running<br>firewall-cmd –reload                          ##重新载入配置，比如添加规则之后，需要执行此命令<br>firewall-cmd –get-zones                       ##列出支持的zone<br>firewall-cmd –get-services                    ##列出支持的服务，在列表中的服务是放行的<br>firewall-cmd –query-service ftp               ##查看ftp服务是否支持，返回yes或者no<br>firewall-cmd –add-service&#x3D;ftp                 ##临时开放ftp服务<br>firewall-cmd –add-service&#x3D;ftp –permanent     ##永久开放ftp服务<br>firewall-cmd –remove-service&#x3D;ftp –permanent  ##永久移除ftp服务<br>firewall-cmd –add-port&#x3D;80&#x2F;tcp –permanent     ##永久添加80端口<br>iptables -L -n                                 ##查看规则，这个命令是和iptables的相同的<br>man firewall-cmd                               ##查看帮助</p>
<p>更多命令，使用  firewall-cmd –help 查看帮助文件</p>
<p>重新开启防火墙：Failed to start firewalld.service: Unit firewalld.service is masked 问题解决：</p>
<p>Failed to start firewalld.service: Unit firewalld.service is masked_七夜月光的博客-CSDN博客</p>
<blockquote>
<blockquote>
<blockquote>
<p> CentOS 7.0默认使用的是firewall作为防火墙，使用iptables必须重新设置一下</p>
</blockquote>
</blockquote>
</blockquote>
<p>1、直接关闭防火墙<br>systemctl stop firewalld.service           #停止firewall<br>systemctl disable firewalld.service     #禁止firewall开机启动</p>
<p>2、设置 iptables service<br>yum -y install iptables-services<br>如果要修改防火墙配置，如增加防火墙端口3306<br>vi &#x2F;etc&#x2F;sysconfig&#x2F;iptables<br>增加规则<br>-A INPUT -m state –state NEW -m tcp -p tcp –dport 3306 -j ACCEPT</p>
<p>保存退出后<br>systemctl restart iptables.service #重启防火墙使配置生效<br>systemctl enable iptables.service #设置防火墙开机启动<br>最后重启系统使设置生效即可。</p>
<p><strong>关闭gitlab</strong></p>
<p>后来查看了官方文档中的说明后， 使用如下命令：</p>
<p>systemctl stop gitlab-runsvdir</p>
<p>然后</p>
<p>ps -ef | grep gitlab</p>
<p>发现跟gitlab相关的进程都关闭了。</p>
<p>内存也释放了。</p>
<p>free -mh</p>
<p><strong>开启gitlab</strong></p>
<ol>
<li><p>启动systemctl start gitlab-runsvdir.service</p>
<p>若启动时候没反应，则进行第二步，查看系统服务</p>
</li>
<li><p>systemctl -t target</p>
<p>如果存在inactive dead的服务，则意味着这个服务出错了，进行第三步操作</p>
</li>
<li><p>systemctl list-jobs</p>
<p>列出所有正在运行的任务，如果存在某个任务是running，其他任务waiting， 则是该任务堵塞了其他服务，停止该任务即可</p>
</li>
<li><p>systemctl stop xxx.service</p>
<p>停止阻塞服务</p>
</li>
</ol>
<p>5.再次启动systemctl start gitlab-runsvdir.service，则正常启动</p>
<p>6.gitlab-ctl start 启动gitlab成功</p>
<h2 id="7-安装jdk"><a href="#7-安装jdk" class="headerlink" title="7 安装jdk"></a>7 安装jdk</h2><hr>
<h2 id="8-安装nginx"><a href="#8-安装nginx" class="headerlink" title="8 安装nginx"></a>8 安装nginx</h2><p>参考（部署前端项目）</p>
<p><a target="_blank" rel="noopener" href="https://blog.csdn.net/JYSCDNKB/article/details/129632162">https://blog.csdn.net/JYSCDNKB/article/details/129632162</a></p>
<p>CentOs7安装nginx<br>卸载nginx<br>1 先查看是否启动了 nginx 服务</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ps -ef|grep nginx</span><br></pre></td></tr></table></figure>


<p>出现这个则 nginx 没启动服务</p>
<p>出现这个则 nginx 启动了服务</p>
<p>2 如果 nginx 启动了服务，则需要先关闭 nginx 服务 【没启动就略过这一步】</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">kill 进程id</span><br></pre></td></tr></table></figure>



<p>3 查看所有与 nginx 有关的文件夹</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">find / -name nginx</span><br></pre></td></tr></table></figure>



<p>4 除与 nginx 有关的文件夹</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">rm -rf file /usr/local/nginx*</span><br></pre></td></tr></table></figure>


<p>5 卸载Nginx相关的依赖</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum remove nginx</span><br></pre></td></tr></table></figure>


<p>这样就卸载完成了</p>
<p>安装nginx<br>查看安装nginx所需要的环境</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#查看 C++ 环境是否安装（查看版本号）</span></span><br><span class="line">gcc -v</span><br><span class="line"><span class="comment">#查看 zlib 是否安装</span></span><br><span class="line"><span class="built_in">cat</span> /usr/lib64/pkgconfig/zlib.pc</span><br><span class="line"><span class="comment">#查看 pcre 是否安装（查版本号）</span></span><br><span class="line">pcre-config --version</span><br></pre></td></tr></table></figure>


<p>配置 nginx 安装所需的环境</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#一次安装4个插件</span></span><br><span class="line">yum -y install gcc pcre pcre-devel zlib zlib-devel openssl openssl-devel</span><br><span class="line"></span><br><span class="line"><span class="comment">#一次安装如果有问题，可以试一下分开安装（上面命令执行成功了就无需执行以下命令了）</span></span><br><span class="line"> 	<span class="comment">#安装 nginx 需要先将官网下载的源码进行编译，编译依赖 gcc 环境</span></span><br><span class="line">yum install gcc-c++</span><br><span class="line"> 	<span class="comment">#pcre是一个perl库，包括perl兼容的正则表达式库，nginx的http模块使用pcre来解析正则表达式，所以需要安装pcre库</span></span><br><span class="line">yum install -y pcre pcre-devel</span><br><span class="line"> 	<span class="comment">#zlib库提供了很多种压缩和解压缩方式nginx使用zlib对http包的内容进行gzip，所以需要安装</span></span><br><span class="line">yum install -y zlib zlib-devel</span><br><span class="line"> 	<span class="comment">#nginx 不仅支持 http 协议，还支持 https（即在ssl协议上传输http），所以需要在 Centos 安装 OpenSSL 库</span></span><br><span class="line">yum install -y openssl openssl-devel</span><br></pre></td></tr></table></figure>


<p>安装 nginx</p>
<p>安装 nginx</p>
<p>1 方法一：在官网直接下载.tar.gz安装包，然后通过远程工具拉取到 linux 里面【在 &#x2F;usr&#x2F;local 里面创建个nginx文件夹，拉进来。（也可以拉到其他地方）】<br>2 方法二：使用wget命令下载，确保系统已经安装了wget，如果没有安装，执行 yum install wget 安装。<br>这里使用方法二进行安装：</p>
<p>1 进入 usr&#x2F;local 里面创建 nginx 文件夹，方便后期删除干净</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#进入usr下的local目录</span></span><br><span class="line"><span class="built_in">cd</span> usr/local</span><br><span class="line"><span class="comment">#在local目录下创建 mysql 文件夹</span></span><br><span class="line"><span class="built_in">mkdir</span> nginx</span><br><span class="line"><span class="comment">#进入nginx目录</span></span><br><span class="line"><span class="built_in">cd</span> nginx</span><br></pre></td></tr></table></figure>



<p>2 通过 wget 下载 nginx 安装包</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">wget https://nginx.org/download/nginx-1.21.6.tar.gz</span><br></pre></td></tr></table></figure>



<p>3 解压 并进入解压后的目录</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#解压</span></span><br><span class="line">tar xvf nginx-1.21.6.tar.gz</span><br><span class="line"><span class="comment">#进入解压后的目录</span></span><br><span class="line"><span class="built_in">cd</span> nginx-1.21.6</span><br></pre></td></tr></table></figure>



<p>4 配置（带有https模块）【需要进入解压后的目录】</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">./configure --prefix=/usr/local/nginx --with-http_stub_status_module --with-http_ssl_module</span><br></pre></td></tr></table></figure>



<p>5 编译和安装【需要进入解压后的目录】</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#编译</span></span><br><span class="line">make</span><br><span class="line"><span class="comment">#安装</span></span><br><span class="line">make install</span><br></pre></td></tr></table></figure>


<p>6  启动、关闭 nginx 服务</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">###启动服务</span></span><br><span class="line"><span class="comment">#需要先进入sbin目录下</span></span><br><span class="line"><span class="built_in">cd</span> /usr/local/nginx/sbin</span><br><span class="line"><span class="comment">#启动nginx服务</span></span><br><span class="line">./nginx</span><br><span class="line"></span><br><span class="line"><span class="comment">###关闭服务</span></span><br><span class="line"><span class="comment">#需要先进入sbin目录下</span></span><br><span class="line"><span class="built_in">cd</span> /usr/local/nginx/sbin</span><br><span class="line"><span class="comment">#关闭nginx服务</span></span><br><span class="line">./nginx -s stop</span><br></pre></td></tr></table></figure>




<p>到这里 nginx 就安装完成了</p>
<p>其他命令</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">####端口号操作</span></span><br><span class="line"><span class="comment">#查询开启的所有端口</span></span><br><span class="line">firewall-cmd --list-port</span><br><span class="line"><span class="comment">#设置80端口开启</span></span><br><span class="line">firewall-cmd --zone=public --add-port=80/tcp --permanent</span><br><span class="line"><span class="comment">#验证80端口是否开启成功 (单个端口查询)</span></span><br><span class="line">firewall-cmd --zone=public --query-port=80/tcp</span><br><span class="line"><span class="comment">#设置80端口关闭</span></span><br><span class="line">firewall-cmd --zone=public --remove-port=80/tcp --permanent</span><br><span class="line"></span><br><span class="line"><span class="comment">####防火墙操作</span></span><br><span class="line"><span class="comment">#检查防火墙是否开启</span></span><br><span class="line">systemctl status firewalld</span><br><span class="line"><span class="comment">#开机自启防火墙</span></span><br><span class="line">systemctl <span class="built_in">enable</span> firewalld</span><br><span class="line"><span class="comment">#开机禁止自启防火墙</span></span><br><span class="line">systemctl <span class="built_in">disable</span> firewalld</span><br><span class="line"><span class="comment">#启动</span></span><br><span class="line">systemctl start firewalld</span><br><span class="line"><span class="comment">#关闭</span></span><br><span class="line">systemctl stop firewalld</span><br><span class="line"><span class="comment">#重启</span></span><br><span class="line">firewall-cmd --reload</span><br></pre></td></tr></table></figure>



<h1 id="项目启动教程"><a href="#项目启动教程" class="headerlink" title="项目启动教程"></a>项目启动教程</h1><h2 id="1-部署-常用命令"><a href="#1-部署-常用命令" class="headerlink" title="1 部署 常用命令"></a>1 部署 常用命令</h2><p>通过ssh命令 在项目地址下传输文件的命令</p>
<p>在对应的文件下的地址栏目输入cmd </p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"># 将后端jar包传到服务器输入如下代码</span><br><span class="line">scp -r forward-admin.<span class="property">jar</span> root@<span class="number">192.168</span><span class="number">.0</span><span class="number">.133</span>:<span class="regexp">/usr/</span>local/project/forward/server/</span><br><span class="line"></span><br><span class="line">    scp -r dts-admin-api.<span class="property">jar</span> root@<span class="number">192.168</span><span class="number">.0</span><span class="number">.112</span>:<span class="regexp">/usr/</span>local/project/shopping/admin-server/</span><br><span class="line">        nohup  java -jar /usr/local/project/shopping/admin-server/dts-admin-api.<span class="property">jar</span>  &amp;</span><br><span class="line">            </span><br><span class="line">     scp -r dts-merchant-api.<span class="property">jar</span> root@<span class="number">192.168</span><span class="number">.0</span><span class="number">.112</span>:<span class="regexp">/usr/</span>local/project/shopping/merchant-server/    </span><br><span class="line">            nohup  java -jar /usr/local/project/shopping/merchant-server/dts-merchant-api.<span class="property">jar</span>  &amp;</span><br><span class="line">    </span><br><span class="line">     scp -r dts-wx-api.<span class="property">jar</span> root@<span class="number">192.168</span><span class="number">.0</span><span class="number">.112</span>:<span class="regexp">/usr/</span>local/project/shopping/wx-server/ </span><br><span class="line">          nohup  java -jar /usr/local/project/shopping/wx-server/dts-wx-api.<span class="property">jar</span>  &amp;</span><br><span class="line">         </span><br><span class="line">#将前端的dist输入如下的代码</span><br><span class="line">scp -r dist root@<span class="number">192.168</span><span class="number">.0</span><span class="number">.133</span>:<span class="regexp">/usr/</span>local/project/forward/web/</span><br></pre></td></tr></table></figure>



<h2 id="2-后端部署"><a href="#2-后端部署" class="headerlink" title="2 后端部署"></a>2 后端部署</h2><p>2.1 首先将springBoot的项目进行打包 -&gt; 参考网络教程</p>
<p>2.2 将jar包的License文件进行替换操作</p>
<p><img src="/2024/01/10/VM%E8%99%9A%E6%8B%9F%E6%9C%BA-%E9%83%A8%E7%BD%B2%E7%AF%87/image-20231018200412155-1697766901131-5-1698138207603-35-1704895567129-29.png" alt="image-20231018200412155"></p>
<p>2.3 找到jar包文件夹</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"># 将打包的 forward-admin.<span class="property">jar</span> 远程传送到linux服务器的”/usr/local/project/forward/server/“  目录下</span><br><span class="line"></span><br><span class="line">scp -r forward-admin.<span class="property">jar</span> root@<span class="number">192.168</span><span class="number">.0</span><span class="number">.112</span>:<span class="regexp">/usr/</span>local/project/forward/server/</span><br></pre></td></tr></table></figure>

<p><img src="/2024/01/10/VM%E8%99%9A%E6%8B%9F%E6%9C%BA-%E9%83%A8%E7%BD%B2%E7%AF%87/image-20231018200942055-1697766894973-3-1698138207603-38-1704895567129-28.png" alt="image-20231018200942055"></p>
<p>2.4 在服务器启动jar包</p>
<p>2.4.1 进入到jar包保存的目录</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">#进入到jar包目录</span><br><span class="line">cd  /usr/local/project/forward/server/</span><br></pre></td></tr></table></figure>

<p>2.4.2 启动java的jar程序</p>
<p>（1）直接启动，控制台退出则关掉应用</p>
<p>java -jar forward-admin.jar</p>
<p>（2）后台启动，控制台退出不会关掉应用</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#打包命令</span></span><br><span class="line"><span class="built_in">nohup</span> java -jar forward-admin.jar &amp;</span><br><span class="line"><span class="comment">#本服务器的打包命令</span></span><br><span class="line"><span class="built_in">nohup</span> java -jar /usr/local/project/forward/server/forward-admin.jar  &amp;</span><br></pre></td></tr></table></figure>

<p>（3）后台启动并且输出日志，控制台退出不会关掉应用</p>
<p>nohup java -jar forward-admin.jar &gt;&gt; .&#x2F;register.log 2&gt;&amp;1 &amp;</p>
<p>（3）后台启动(加内存)并且输出日志，控制台退出不会关掉应用</p>
<p>nohup java -jar -Xms1024m -Xmx2048m forward-admin.jar&gt;&gt; .&#x2F;register.log 2&gt;&amp;1 &amp;</p>
<p>2.4.3 关闭java程序</p>
<p> （1）查询java应用程序</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ps -ef|grep java</span><br></pre></td></tr></table></figure>

<p> （2）强制杀掉进程</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">kill -<span class="number">9</span> xxx</span><br></pre></td></tr></table></figure>

<h2 id="3-前端部署"><a href="#3-前端部署" class="headerlink" title="3 前端部署"></a>3 前端部署</h2><p>3.1 将前端的vue项目进行打包 -&gt;参考网路</p>
<p>打包命令:  npm run build:test</p>
<p><img src="/2024/01/10/VM%E8%99%9A%E6%8B%9F%E6%9C%BA-%E9%83%A8%E7%BD%B2%E7%AF%87/image-20231019211338924-1697766887567-1-1698138207603-37-1704895567129-31.png" alt="image-20231019211338924"></p>
<p>3.2 将dist文件上传到服务器</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"># 将打包的 dist 远程传送到linux服务器的”/usr/local/project/forward/web/“  目录下</span><br><span class="line"></span><br><span class="line">scp -r dist root@192.168.0.112:/usr/local/project/forward/web/</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">scp -r dist root@192.168.0.112:/usr/local/project/shopping/admin-web/</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p><img src="/2024/01/10/VM%E8%99%9A%E6%8B%9F%E6%9C%BA-%E9%83%A8%E7%BD%B2%E7%AF%87/image-20231018203917602-1698138207603-36-1704895567129-30.png" alt="image-20231018203917602"></p>
<p>3.3 设置nginx的配置 的Server下 插入如下代码</p>
<p>3.3.1 server的配置代码</p>
<figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="section">server</span> &#123;</span><br><span class="line">        <span class="attribute">listen</span>       <span class="number">8082</span>;</span><br><span class="line">        <span class="attribute">server_name</span>  localhost;</span><br><span class="line"></span><br><span class="line">		<span class="section">location</span> / &#123;</span><br><span class="line">            <span class="attribute">root</span>   /usr/local/project/forward/web/dist;</span><br><span class="line">			<span class="attribute">try_files</span> <span class="variable">$uri</span> <span class="variable">$uri</span>/ /index.html;</span><br><span class="line">            <span class="attribute">index</span>  index.html index.htm;</span><br><span class="line">        &#125;</span><br><span class="line">		</span><br><span class="line">        <span class="section">location</span> /test-api/&#123;</span><br><span class="line">            <span class="attribute">proxy_set_header</span> Host <span class="variable">$http_host</span>;</span><br><span class="line">            <span class="attribute">proxy_set_header</span> X-Real-IP <span class="variable">$remote_addr</span>;</span><br><span class="line">            <span class="attribute">proxy_set_header</span> REMOTE-HOST <span class="variable">$remote_addr</span>;</span><br><span class="line">            <span class="attribute">proxy_set_header</span> X-Forwarded-For <span class="variable">$proxy_add_x_forwarded_for</span>;</span><br><span class="line">            <span class="attribute">proxy_pass</span> http://localhost:8081/;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="section">location</span> /profile/ &#123;</span><br><span class="line">            <span class="attribute">proxy_pass</span> http://localhost:808/profile/;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="attribute">error_page</span>   <span class="number">500</span> <span class="number">502</span> <span class="number">503</span> <span class="number">504</span>  /50x.html;</span><br><span class="line">        <span class="section">location</span> = /50x.html &#123;</span><br><span class="line">            <span class="attribute">root</span>   html;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>

<p> 将上面的代码保存到   -&gt;  nginx下的cnfig下的nginx.conf，保存到server同级下，设置如下图所示，</p>
<p><img src="/2024/01/10/VM%E8%99%9A%E6%8B%9F%E6%9C%BA-%E9%83%A8%E7%BD%B2%E7%AF%87/image-20231018210959644-1698138207603-39-1704895567130-33.png" alt="image-20231018210959644"></p>
<p>3.3.2 重启nginx </p>
<p>重启一下nginx -s reload 即可</p>
<hr>
<p>图片地址问题：</p>
<p>图片问题一般需要再后端的 （ 对图片等数据订单一个配置 ）修改后打包。</p>
<p><img src="/2024/01/10/VM%E8%99%9A%E6%8B%9F%E6%9C%BA-%E9%83%A8%E7%BD%B2%E7%AF%87/image-20231103160112329-1704895567129-32.png" alt="image-20231103160112329"></p>
<h2 id="ssh扩展："><a href="#ssh扩展：" class="headerlink" title="ssh扩展："></a>ssh扩展：</h2><p>从服务器下载东西到本地windos</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">scp -r -P 9000  root@192.168.0.119:~/storage/pictures/1.jpg   D:/</span><br></pre></td></tr></table></figure>

<p><img src="/2024/01/10/VM%E8%99%9A%E6%8B%9F%E6%9C%BA-%E9%83%A8%E7%BD%B2%E7%AF%87/image-20231107202542223-1704895567130-34.png" alt="image-20231107202542223"></p>
<p>在本地windos上传东西到服务器</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">scp -r dist root@192.168.0.133:/usr/local/project/forward/web/</span><br><span class="line"></span><br><span class="line"><span class="comment"># dist 是windos的文件夹子 ，-r 递归上传 ，/usr/local/project/forward/web/  服务器的地址</span></span><br></pre></td></tr></table></figure>





<h2 id="常见问题"><a href="#常见问题" class="headerlink" title="常见问题"></a>常见问题</h2><p>1、前端遇到问题如下：</p>
<p><img src="/2024/01/10/VM%E8%99%9A%E6%8B%9F%E6%9C%BA-%E9%83%A8%E7%BD%B2%E7%AF%87/image-20231020090233015-1698138207603-40-1704895567130-35.png" alt="image-20231020090233015"></p>
<p>解决方案：</p>
<p>方法一：指定配置目录</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo /usr/local/nginx/sbin/nginx -c /usr/local/nginx/conf/nginx.conf</span><br></pre></td></tr></table></figure>

<p>方法二：在logs下新建一个nginx.pid文件</p>
<p><strong>1.进入nginx的logs目录查看文件，发现没有nginx.pid文件</strong></p>
<p><img src="/2024/01/10/VM%E8%99%9A%E6%8B%9F%E6%9C%BA-%E9%83%A8%E7%BD%B2%E7%AF%87/image-20231020090613256-1698138207603-42-1704895567130-36.png" alt="image-20231020090613256"></p>
<p><strong>2.创建一个nginx.pid文件</strong></p>
<p><img src="/2024/01/10/VM%E8%99%9A%E6%8B%9F%E6%9C%BA-%E9%83%A8%E7%BD%B2%E7%AF%87/image-20231020090629683-1698138207603-41-1704895567130-37.png" alt="image-20231020090629683"></p>
<p><strong>3.编辑nginx.pid文件，文件内容为1473，保存退出</strong></p>
<p><img src="/2024/01/10/VM%E8%99%9A%E6%8B%9F%E6%9C%BA-%E9%83%A8%E7%BD%B2%E7%AF%87/image-20231020090642496-1698138207603-43-1704895567130-38.png" alt="image-20231020090642496"></p>
<p><strong>4.在sbin目录下启动nginx并测试关闭</strong></p>
<p><img src="/2024/01/10/VM%E8%99%9A%E6%8B%9F%E6%9C%BA-%E9%83%A8%E7%BD%B2%E7%AF%87/image-20231020090657062-1698138207603-45-1704895567130-39.png" alt="image-20231020090657062"></p>
<p>成功解决问题</p>
<p><img src="/2024/01/10/VM%E8%99%9A%E6%8B%9F%E6%9C%BA-%E9%83%A8%E7%BD%B2%E7%AF%87/image-20231020092029001-1698138207603-44-1704895567130-40.png" alt="image-20231020092029001"></p>
<p>需要打包为test文件， npm run build:test </p>
<p>打包其他的环境，需要改变Server配置。</p>
<p>3.4在地址栏进行地址访问 比如当前项目 </p>
<p>后端 192.168.0.133:8081</p>
<p>前端 192.168.0.133:8082</p>
<hr>
<p>遇到问题     <strong>nginx: [alert] kill(17451, 1) failed (3: No such process)</strong></p>
<p><img src="/2024/01/10/VM%E8%99%9A%E6%8B%9F%E6%9C%BA-%E9%83%A8%E7%BD%B2%E7%AF%87/image-20231024170836183-1704895567130-41.png" alt="image-20231024170836183"></p>
<p>解决方案</p>
<p>进入sbin文件执行命令 .&#x2F;nginx -c &#x2F;usr&#x2F;local&#x2F;nginx&#x2F;conf&#x2F;nginx.conf</p>
<p>然后再次执行命令 .&#x2F;nginx -s reload </p>
<hr>
<hr>
<p>2、后端遇到：</p>
<p>常见问题:</p>
<p>org.springframework.context.ApplicationContextException: Failed to start bean ‘webServerStartStop’; nested exception is org.springframework.boot.web.server.WebServerException: Unable to start embedded Tomcat server</p>
<p><img src="/2024/01/10/VM%E8%99%9A%E6%8B%9F%E6%9C%BA-%E9%83%A8%E7%BD%B2%E7%AF%87/image-20231019214926913-1698138207603-46-1704895567130-42.png" alt="image-20231019214926913"></p>
<p>重启服务器</p>
<hr>
<h1 id="常用操作："><a href="#常用操作：" class="headerlink" title="常用操作："></a>常用操作：</h1><h2 id="1、固定-IP地址"><a href="#1、固定-IP地址" class="headerlink" title="1、固定 IP地址"></a>1、固定 IP地址</h2><p>访问配置文件：</p>
<p>vim &#x2F;etc&#x2F;sysconfig&#x2F;network-scripts&#x2F;ifcfg-ens33</p>
<p>进行配置</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">BOOTPROTO=<span class="string">&quot;static&quot;</span></span><br><span class="line"></span><br><span class="line">IPADDR=192.168.0.112</span><br><span class="line">GATEWAY=192.168.0.1</span><br><span class="line">DNS1=114.114.114.114</span><br></pre></td></tr></table></figure>

<p><img src="/2024/01/10/VM%E8%99%9A%E6%8B%9F%E6%9C%BA-%E9%83%A8%E7%BD%B2%E7%AF%87/image-20231027131201590-1704895567130-43.png" alt="image-20231027131201590"></p>
<p>进行重启服务器</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">reboot</span><br></pre></td></tr></table></figure>

<p><img src="/2024/01/10/VM%E8%99%9A%E6%8B%9F%E6%9C%BA-%E9%83%A8%E7%BD%B2%E7%AF%87/image-20231028165617795-1704895567130-44.png" alt="image-20231028165617795"></p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://ddldydd.github.io/2024/01/10/Ubuntu20%E9%83%A8%E7%BD%B2/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="阿呆">
      <meta itemprop="description" content="书山有路勤为径，学海无涯苦作舟。">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="夏蝉之家">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2024/01/10/Ubuntu20%E9%83%A8%E7%BD%B2/" class="post-title-link" itemprop="url">Ubuntu20 部署</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2024-01-10 21:58:04" itemprop="dateCreated datePublished" datetime="2024-01-10T21:58:04+08:00">2024-01-10</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2024-01-11 12:28:40" itemprop="dateModified" datetime="2024-01-11T12:28:40+08:00">2024-01-11</time>
              </span>

          <br>
            <span class="post-meta-item" title="本文字数">
              <span class="post-meta-item-icon">
                <i class="far fa-file-word"></i>
              </span>
                <span class="post-meta-item-text">本文字数：</span>
              <span>14k</span>
            </span>
            <span class="post-meta-item" title="阅读时长">
              <span class="post-meta-item-icon">
                <i class="far fa-clock"></i>
              </span>
                <span class="post-meta-item-text">阅读时长 &asymp;</span>
              <span>25 分钟</span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="使用U盘安装Ubuntu"><a href="#使用U盘安装Ubuntu" class="headerlink" title="使用U盘安装Ubuntu"></a>使用U盘安装Ubuntu</h1><h2 id="准备工作"><a href="#准备工作" class="headerlink" title="准备工作"></a>准备工作</h2><ul>
<li><strong>需要一个8GB或者8GB以上的空U盘（由于制作启动盘需要格式化U盘，建议提前备份U盘数据）</strong></li>
</ul>
<h3 id="下载系统镜像文件"><a href="#下载系统镜像文件" class="headerlink" title="下载系统镜像文件"></a>下载系统镜像文件</h3><ul>
<li><strong>浏览器搜索Ubuntu或者直接复制网址进入网站选择对应的版本进行下载（官网默认最新版本且下载速度较慢，建议使用镜像站下载）</strong></li>
<li><strong>官网网址：<a target="_blank" rel="noopener" href="https://cn.ubuntu.com/download/desktop">https://cn.ubuntu.com/download/desktop</a></strong></li>
</ul>
<p><img src="/2024/01/10/Ubuntu20%E9%83%A8%E7%BD%B2/c995d143ad4bd113fe5811337dcd02044afb0583-1704895158881-1.png" alt="img"></p>
<ul>
<li><strong>清华大学镜像站：<a target="_blank" rel="noopener" href="https://mirrors.tuna.tsinghua.edu.cn/ubuntu-releases/">https://mirrors.tuna.tsinghua.edu.cn/ubuntu-releases/</a></strong></li>
</ul>
<p><img src="/2024/01/10/Ubuntu20%E9%83%A8%E7%BD%B2/9f2f070828381f303516d6918363ea036e06f06d-1704895158883-2.png" alt="img"></p>
<p><img src="/2024/01/10/Ubuntu20%E9%83%A8%E7%BD%B2/58ee3d6d55fbb2fb5efd2e6d7f2886af4723dc6c-1704895158883-3.png" alt="img"></p>
<h3 id="下载启动盘制作工具"><a href="#下载启动盘制作工具" class="headerlink" title="下载启动盘制作工具"></a>下载启动盘制作工具</h3><ul>
<li><strong>rufus 官网网址：<a target="_blank" rel="noopener" href="http://rufus.ie/zh/">http://rufus.ie/zh/</a></strong></li>
</ul>
<p><img src="/2024/01/10/Ubuntu20%E9%83%A8%E7%BD%B2/e7cd7b899e510fb3b9042467fd516e9ed0430c8a-1704895158883-4.png" alt="img"></p>
<p><strong>然后就有如图所示下载得到的2个文件</strong></p>
<p><img src="/2024/01/10/Ubuntu20%E9%83%A8%E7%BD%B2/6f061d950a7b020809fae29340bb54d8572cc87b-1704895158883-5.png" alt="img"></p>
<h3 id="制作启动盘"><a href="#制作启动盘" class="headerlink" title="制作启动盘"></a>制作启动盘</h3><p><strong>双击打开下载好的rufus程序，设备选择插入的U盘，引导类型选择下载好的Ubuntu镜像文件，其他保持默认，点击开始</strong></p>
<p><img src="/2024/01/10/Ubuntu20%E9%83%A8%E7%BD%B2/d009b3de9c82d158cbebba97a568bfd3bc3e421c-1704895158883-6.png" alt="img"></p>
<p><strong>当状态提示准备就绪后表示制作完成，点击关闭，U盘内显示以下文件</strong></p>
<p><img src="/2024/01/10/Ubuntu20%E9%83%A8%E7%BD%B2/902397dda144ad34e4bc505cf8c0aaff30ad855c-1704895158884-7.png" alt="img"></p>
<h3 id="查看计算机磁盘格式"><a href="#查看计算机磁盘格式" class="headerlink" title="查看计算机磁盘格式"></a>查看计算机磁盘格式</h3><ol>
<li><strong>Windows系统的磁盘格式一般分为2种：MBR和GPT格式，分别对应主板Bios的Legacy和UEFI的启动方式，同时在linux分区里面对应&#x2F;boot和&#x2F;efi分区</strong></li>
</ol>
<p><img src="/2024/01/10/Ubuntu20%E9%83%A8%E7%BD%B2/bf096b63f6246b60fa670ba4cb9abc47500fa267-1704895158884-8.png" alt="img"></p>
<p><strong>磁盘格式查看方法，在windos系统下，右键点击此电脑，点击管理 找到存储-磁盘管理，点击对应磁盘，右键属性，然后查看卷。</strong></p>
<p><img src="/2024/01/10/Ubuntu20%E9%83%A8%E7%BD%B2/fd039245d688d43f9be7791d4d7c74100ff43b04-1704895158884-9.png" alt="img"></p>
<p><strong>对应分区形式如下：</strong></p>
<p><img src="/2024/01/10/Ubuntu20%E9%83%A8%E7%BD%B2/cf1b9d16fdfaaf515c2eaebead3632e5f11f7a4b-1704895158884-10.png" alt="img"></p>
<h3 id="磁盘分区"><a href="#磁盘分区" class="headerlink" title="磁盘分区"></a>磁盘分区</h3><ul>
<li><strong>Linux的磁盘分区和windows不同，一般常见分区方案如下：</strong></li>
</ul>
<p><img src="/2024/01/10/Ubuntu20%E9%83%A8%E7%BD%B2/2f738bd4b31c8701779ff749001d38240608ffe6-1704895158884-11.png" alt="img"></p>
<p>若磁盘空间较小，可以只划分引导区、内存交换区和系统区三个，不建立home分区也可以。</p>
<h2 id="Ubuntu系统安装"><a href="#Ubuntu系统安装" class="headerlink" title="Ubuntu系统安装"></a>Ubuntu系统安装</h2><p>Ubuntu安装分为两种MBR分区和GPT分区，分别对应Legacy和UEFI引导，注意选择正确的引导启动。</p>
<p><img src="/2024/01/10/Ubuntu20%E9%83%A8%E7%BD%B2/8694a4c27d1ed21b2d4bf23c8c0c7bcf53da3fd2-1704895158884-12.png" alt="img"></p>
<h3 id="进入BIOS设置U盘启动"><a href="#进入BIOS设置U盘启动" class="headerlink" title="进入BIOS设置U盘启动"></a>进入BIOS设置U盘启动</h3><ol>
<li>电脑开机或者重启，不停的按对应的启动快捷键，进入BIOS设置面板</li>
<li>找到<strong>Security</strong>（安全）-<strong>Secure Boot</strong>（安全启动）改为改成<strong>Disabled</strong>（关闭）</li>
<li>找到<strong>Boot</strong>（启动）-<strong>Boot Mode</strong>（启动模式）选项按照自己硬盘格式改为<strong>Legacy</strong> 或者<strong>UEFI</strong>然后按<strong>F10</strong>保存退出</li>
<li>插入制作好的U盘启动盘，开机并长按U盘启动快捷键进入引导界面（如果你实在找不到 U 盘启动快捷键的话，直接在上一步 BIOS 将 U 盘改为第一启动项也可以）选择带有<strong>usb</strong>的引导选项进入U盘（不同品牌，主板的进入方法不同，具体可以通过搜索引擎搜索自己电脑的操作方法）。</li>
</ol>
<p><img src="/2024/01/10/Ubuntu20%E9%83%A8%E7%BD%B2/38dbb6fd5266d0160b88a7e0be49720c37fa35d5-1704895158884-13.png" alt="img"></p>
<p>选择第一项进入安装界面</p>
<p><img src="/2024/01/10/Ubuntu20%E9%83%A8%E7%BD%B2/2f738bd4b31c87011f5f00200f1d38240508fffd-1704895158884-14.png" alt="img"></p>
<h3 id="正式安装并进行系列设置"><a href="#正式安装并进行系列设置" class="headerlink" title="正式安装并进行系列设置"></a>正式安装并进行系列设置</h3><p>语言选择中文简体（当然如果英文很好可以选择English）</p>
<p><img src="/2024/01/10/Ubuntu20%E9%83%A8%E7%BD%B2/dbb44aed2e738bd483cb94a089e921dd267ff922-1704895158884-15.jpeg" alt="img"></p>
<p>键盘布局按照自己喜好选择即可</p>
<p><img src="/2024/01/10/Ubuntu20%E9%83%A8%E7%BD%B2/c83d70cf3bc79f3d41e7fa4b8dc36b1a728b2930-1704895158884-16.jpeg" alt="img"></p>
<p>这个界面正常安装和最小安装都可以（正常安装比最小安装多了些常用的软件视个人所需选择），下载更新建议不勾选</p>
<p><img src="/2024/01/10/Ubuntu20%E9%83%A8%E7%BD%B2/838ba61ea8d3fd1f42b77611192c831494ca5fc8-1704895158884-17.jpeg" alt="img"></p>
<p>安装类型一般选择其他选项，方便个人进行磁盘分区</p>
<p><img src="/2024/01/10/Ubuntu20%E9%83%A8%E7%BD%B2/86d6277f9e2f0708706bed03c1461e92a901f231-1704895158884-18.jpeg" alt="img"></p>
<p>这里显示当前电脑所有的磁盘，选中想要分区的空闲磁盘点击+号进行新建分区。</p>
<p>可以参考下表：</p>
<p><img src="/2024/01/10/Ubuntu20%E9%83%A8%E7%BD%B2/ac6eddc451da81cb2e0c471c7904761d0b2431e2-1704895158884-19.jpeg" alt="img"></p>
<p><img src="/2024/01/10/Ubuntu20%E9%83%A8%E7%BD%B2/cefc1e178a82b901a7f4b84951ef0f7c3812efd9-1704895158884-20.jpeg" alt="img">新建分区</p>
<p><img src="/2024/01/10/Ubuntu20%E9%83%A8%E7%BD%B2/562c11dfa9ec8a13f8a9aa4fd6613784a1ecc058-1704895158885-21.jpeg" alt="img">&#x2F;boot</p>
<p><img src="/2024/01/10/Ubuntu20%E9%83%A8%E7%BD%B2/5882b2b7d0a20cf4992f370c516bed3dadaf9910-1704895158885-22.jpeg" alt="img">swap分区</p>
<p><img src="/2024/01/10/Ubuntu20%E9%83%A8%E7%BD%B2/8644ebf81a4c510f2ded5bdb473b8326d52aa5b0-1704895158885-23.jpeg" alt="img">&#x2F;</p>
<p><img src="/2024/01/10/Ubuntu20%E9%83%A8%E7%BD%B2/9e3df8dcd100baa195f0eb4b6a721f19cafc2ecb-1704895158885-24.jpeg" alt="img">&#x2F;home</p>
<p><img src="/2024/01/10/Ubuntu20%E9%83%A8%E7%BD%B2/0823dd54564e9258ef31131bbce07753cdbf4eaf-1704895158885-27.jpeg" alt="img">分区完成</p>
<p><img src="/2024/01/10/Ubuntu20%E9%83%A8%E7%BD%B2/10dfa9ec8a1363278e8d84e7b7ed06e709fac774-1704895158885-25.jpeg" alt="img">执行格式化分区</p>
<p>地理位置默认或者选择自己所在地即可</p>
<p><img src="/2024/01/10/Ubuntu20%E9%83%A8%E7%BD%B2/e824b899a9014c083d1ee1982319a4037bf4f450-1704895158885-26.jpeg" alt="img"></p>
<p>这里输入自己的用户名和登录密码继续（建议使用英文名字方便后续使用）</p>
<p><img src="/2024/01/10/Ubuntu20%E9%83%A8%E7%BD%B2/810a19d8bc3eb13506ee29ba8e7c0ed8fd1f4477-1704895158885-28.jpeg" alt="img"></p>
<p>等待安装程序自动执行安装，安装完成后会提示是否重启，点击现在重启</p>
<p><img src="/2024/01/10/Ubuntu20%E9%83%A8%E7%BD%B2/d6ca7bcb0a46f21fe92c4f7fd546cd6b0c33ae6b-1704895158885-30.jpeg" alt="img"></p>
<p><img src="/2024/01/10/Ubuntu20%E9%83%A8%E7%BD%B2/960a304e251f95caef21047ff875d93565095294-1704895158885-29.jpeg" alt="img"></p>
<p>重启后系统会出现类似如下提示，拔出U盘安装盘然后按键盘Enter键进行确认即可</p>
<p><img src="/2024/01/10/Ubuntu20%E9%83%A8%E7%BD%B2/c995d143ad4bd113671f812a6acd02044afb0540-1704895158885-31.jpeg" alt="img"></p>
<p>等待一会儿即可进入系统登录界面，点击用户名输入密码进入系统桌面</p>
<p><img src="/2024/01/10/Ubuntu20%E9%83%A8%E7%BD%B2/5366d0160924ab180453aa661d9840c67a890b83-1704895158885-32.jpeg" alt="img"></p>
<p><img src="/2024/01/10/Ubuntu20%E9%83%A8%E7%BD%B2/f11f3a292df5e0fecabfc968760292a35fdf72a5-1704895158885-33.jpeg" alt="img"></p>
<p><img src="/2024/01/10/Ubuntu20%E9%83%A8%E7%BD%B2/562c11dfa9ec8a13902d3489cc613784a0ecc016-1704895158886-34.jpeg" alt="img"></p>
<p>以上大功告成，#Ubuntu系统顺利安装成功。小伙伴儿们不要忘记点赞收藏哦！</p>
<h1 id="linux-环境配置"><a href="#linux-环境配置" class="headerlink" title="linux 环境配置"></a>linux 环境配置</h1><h2 id="ssh-设置"><a href="#ssh-设置" class="headerlink" title="ssh 设置"></a>ssh 设置</h2><p>安装SSH</p>
<p>在Ubuntu系统中安装SSH是配置SSH的第一步。可以通过以下命令来安装SSH：</p>
<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-<span class="keyword">get</span> install openssh-server</span><br></pre></td></tr></table></figure>

<p>安装完成后，SSH服务将自动启动，并且会在系统启动时自动启动。</p>
<p>SSH服务的启动和停止</p>
<p>安装完成后，SSH服务将自动启动，可以使用以下命令来手动启动或停止SSH服务：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sudo service ssh <span class="keyword">start</span></span><br><span class="line">sudo service ssh stop</span><br></pre></td></tr></table></figure>

<p>SSH配置文件</p>
<p>SSH的配置文件位于&#x2F;etc&#x2F;ssh&#x2F;sshd_config，可以使用文本编辑器来修改配置文件。在配置文件中，可以修改SSH的端口、允许登录的用户、禁止root用户登录等。</p>
<p>SSH服务的重启</p>
<p>在修改了SSH的配置文件后，需要重启SSH服务才能使修改生效。可以使用以下命令来重启SSH服务：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo service ssh restart</span><br></pre></td></tr></table></figure>

<p>生成SSH密钥</p>
<p>在配置SSH之前，需要生成SSH密钥对。可以使用以下命令来生成SSH密钥对：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ssh-keygen -t rsa</span><br></pre></td></tr></table></figure>

<p>生成的密钥对将保存在用户的~&#x2F;.ssh目录下，其中id_rsa为私钥，id_rsa.pub为公钥。</p>
<p>密钥的添加和删除</p>
<p>生成的SSH密钥对可以通过以下命令来添加到SSH代理中：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ssh-add ~<span class="regexp">/.ssh/i</span>d_rsa</span><br></pre></td></tr></table></figure>

<p>如果需要删除已添加的密钥，可以使用以下命令：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ssh-add -d ~<span class="regexp">/.ssh/i</span>d_rsa</span><br></pre></td></tr></table></figure>

<p>公钥的复制</p>
<p>将公钥复制到要连接的远程服务器上，可以使用以下命令：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ssh<span class="operator">-</span><span class="keyword">copy</span><span class="operator">-</span>id <span class="keyword">user</span><span class="variable">@remote_host</span></span><br></pre></td></tr></table></figure>

<p>这将把公钥添加到远程服务器的~&#x2F;.ssh&#x2F;authorized_keys文件中，从而实现无密码登录。</p>
<p>密钥的保护</p>
<p>生成的SSH密钥对是非常重要的，需要妥善保护。可以通过设置密钥的权限和使用密码来加强密钥的安全性。</p>
<p>使用SSH连接远程服务器</p>
<p>配置好SSH后，可以使用SSH来连接远程服务器。可以使用以下命令来连接远程服务器：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ssh <span class="keyword">user</span><span class="variable">@remote_host</span></span><br></pre></td></tr></table></figure>

<p>在连接时，可以选择使用不同的身份验证方式，如密码验证、公钥验证等。</p>
<p>公钥验证</p>
<p>使用公钥验证可以实现无密码登录，只需要将公钥添加到远程服务器的~&#x2F;.ssh&#x2F;authorized_keys文件中即可。</p>
<p>密码验证</p>
<p>使用密码验证需要输入远程服务器的密码，可以通过以下命令来连接远程服务器：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ssh <span class="keyword">user</span><span class="variable">@remote_host</span></span><br></pre></td></tr></table></figure>

<p>其他身份验证方式</p>
<p>除了公钥验证和密码验证外，还可以使用其他身份验证方式，如密钥卡、证书等。</p>
<p>配置SSH防火墙</p>
<p>为了加强SSH的安全性，可以配置防火墙来限制对SSH服务的访问。可以使用以下命令来配置防火墙：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo ufw allow OpenSSH</span><br></pre></td></tr></table></figure>

<p>这将允许来自任何IP地址的SSH连接。</p>
<p>配置特定IP地址的访问</p>
<p>可以使用以下命令来允许特定IP地址的SSH连接：</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo ufw allow <span class="selector-tag">from</span> <span class="number">192.168</span>.<span class="number">0.1</span> <span class="selector-tag">to</span> any port <span class="number">22</span></span><br></pre></td></tr></table></figure>

<p>这将允许来自IP地址为192.168.0.1的主机的SSH连接。</p>
<p>配置防火墙的其他规则</p>
<p>除了配置SSH的访问规则外，还可以配置其他防火墙规则来进一步加强系统的安全性。</p>
<p>加强SSH安全</p>
<p>为了加强SSH的安全性，可以采取一些措施来防止未授权访问和恶意攻击。</p>
<p>禁止root用户登录</p>
<p>禁止root用户登录可以防止未授权访问和恶意攻击。可以通过修改SSH的配置文件来禁止root用户登录。</p>
<p>使用SSH密钥登录</p>
<p>使用SSH密钥登录可以实现无密码登录，提高系统的安全性。</p>
<p> 使用防火墙限制访问</p>
<p>使用防火墙可以限制对SSH服务的访问，防止未授权访问和恶意攻击。</p>
<h3 id="内容补充"><a href="#内容补充" class="headerlink" title="内容补充;"></a>内容补充;</h3><p>非root用户开启ssh服务</p>
<p>&#x2F;etc&#x2F;ssh&#x2F;ssh_config 配置文件对 root 无效用户，单独修改该配置文件可开启非 root 用户 ssh 访问</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo vim /etc/ssh/ssh_config</span><br></pre></td></tr></table></figure>

<p>去掉 配置文件中 Port 22 的注释后保存退出</p>
<p>设置root用户远程登录</p>
<p>&#x2F;etc&#x2F;ssh&#x2F;sshd_config 配置文件可以 设置 root 用户 ssh 访问</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo vim /etc/ssh/sshd_config</span><br></pre></td></tr></table></figure>

<p><strong>将 PermitRootLogin prohibit-password</strong><br><strong>去掉注释并修改为</strong><br><strong>PermitRootLogin yes</strong><br><strong>修改后保存并退出</strong></p>
<p>重启ssh服务服务即可</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo service ssh restart</span><br></pre></td></tr></table></figure>



<h3 id="SSH-常见问题"><a href="#SSH-常见问题" class="headerlink" title="SSH 常见问题"></a>SSH 常见问题</h3><p>ssh链接远程服务器出现错误:</p>
<p><img src="/2024/01/10/Ubuntu20%E9%83%A8%E7%BD%B2/image-20231121140233416-1704895158886-35.png" alt="image-20231121140233416"></p>
<p>原因：第一次ssh链接的时候会生成一个认证凭据，存储在客户端中的known_hosts，如果服务器地址重置or重新安装了，就会产生这个问题，巴拉巴拉。。。</p>
<p>解决：</p>
<p>ssh-keygen -R 服务器地址</p>
<p>然后重新链接</p>
<h2 id="gitlab-安装"><a href="#gitlab-安装" class="headerlink" title="gitlab 安装"></a>gitlab 安装</h2><p>参考：</p>
<p><a target="_blank" rel="noopener" href="https://www.zhihu.com/question/37796391">https://www.zhihu.com/question/37796391</a></p>
<h3 id="更新系统包"><a href="#更新系统包" class="headerlink" title="更新系统包"></a>更新系统包</h3><p>让我们首先更新<a target="_blank" rel="noopener" href="https://www.zhihu.com/search?q=%E8%BD%AF%E4%BB%B6%E5%8C%85&search_source=Entity&hybrid_search_source=Entity&hybrid_search_extra=%7B%22sourceType%22:%22answer%22,%22sourceId%22:3155487140%7D">软件包</a>列表并将任何现有软件包升级到最新版本。</p>
<figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ sudo apt update</span><br><span class="line">$ sudo apt upgrade -y</span><br></pre></td></tr></table></figure>

<p>应用更新后重新启动系统。</p>
<figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ sudo reboot</span><br></pre></td></tr></table></figure>

<h3 id="安装依赖项"><a href="#安装依赖项" class="headerlink" title="安装依赖项"></a>安装依赖项</h3><p>GitLab 需要一些依赖项才能正常运行。使用以下命令安装它们：</p>
<figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ sudo apt install -y curl openssh-server ca-certificates postfix</span><br></pre></td></tr></table></figure>

<p>在 postfix 安装过程中，会出现一个配置窗口。选择 “Internet Site”并输入服务器的主机名作为<a target="_blank" rel="noopener" href="https://www.zhihu.com/search?q=%E9%82%AE%E4%BB%B6%E6%9C%8D%E5%8A%A1%E5%99%A8&search_source=Entity&hybrid_search_source=Entity&hybrid_search_extra=%7B%22sourceType%22:%22answer%22,%22sourceId%22:3155487140%7D">邮件服务器</a>名称。这将允许 GitLab 发送电子邮件通知。</p>
<p>选择 “Internet Site”，然后选择 “OK”。</p>
<h3 id="添加-GitLab-Apt-存储库"><a href="#添加-GitLab-Apt-存储库" class="headerlink" title="添加 GitLab Apt 存储库"></a>添加 GitLab Apt 存储库</h3><p>现在，我们将添加 GitLab 仓库，运行以下 <code>curl</code> 命令。它将自动检测你的 Ubuntu 版本并相应地设置仓库。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ curl -sS https://packages.gitlab.com/install/repositories/gitlab/gitlab-ce/script.deb.sh | sudo bash</span><br></pre></td></tr></table></figure>



<h2 id="安装-Gitlab"><a href="#安装-Gitlab" class="headerlink" title="安装 Gitlab"></a>安装 Gitlab</h2><p>运行以下命令在你的 ubuntu 系统上自动安装和配置 gitlab-ce，将服务器的主机名替换为你的设置，</p>
<figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ sudo EXTERNAL_URL=&quot;http://gitlab.linuxtechi.net&quot; apt install gitlab-ce</span><br></pre></td></tr></table></figure>

<p>上面的输出确认 GitLab 已成功安装。gitlab web 界面的用户名是 root，密码存储在 <code>/etc/gitlab/initial_root_password</code>。</p>
<p>注意：如果你的 ubuntu 系统上启用了<a target="_blank" rel="noopener" href="https://www.zhihu.com/search?q=%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F&search_source=Entity&hybrid_search_source=Entity&hybrid_search_extra=%7B%22sourceType%22:%22answer%22,%22sourceId%22:3155487140%7D">操作系统</a>防火墙，那请允许 80 和 443 端口。</p>
<figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ sudo ufw allow http</span><br><span class="line">$ sudo ufw allow https</span><br></pre></td></tr></table></figure>

<h3 id="访问-GitLab-Web-界面"><a href="#访问-GitLab-Web-界面" class="headerlink" title="访问 GitLab Web 界面"></a>访问 GitLab Web 界面</h3><p>安装并配置 GitLab 后，打开 Web 浏览器并输入服务器的 IP 地址或主机名。</p>
<figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http://&lt;Server-IP-Address-or-Hostname&gt;</span><br></pre></td></tr></table></figure>

<ul>
<li>用户名：<code>root</code></li>
<li>密码：从 <code>/etc/gitlab/initial_root_password</code> 获取密码</li>
</ul>
<p>密码：</p>
<p>gitlab 192.168.0.126:80</p>
<p>root  &#x2F;  xiaobai_123!@#</p>
<h3 id="修改gitlab默认端口为8088："><a href="#修改gitlab默认端口为8088：" class="headerlink" title="修改gitlab默认端口为8088："></a>修改gitlab默认端口为8088：</h3><p>第一步：修改&#x2F;etc&#x2F;gitlab&#x2F;gitlab.rb文件，如果有如下参数直接修改，如果没有就新增</p>
<p>nginx[‘listen_port’] &#x3D; 8088<br>第二步：修改默认的gitlab nginx的web服务80端 &#x2F;var&#x2F;opt&#x2F;gitlab&#x2F;nginx&#x2F;conf&#x2F;gitlab-http.conf</p>
<p>server { ## HTTPS server<br>  listen *:8088;<br>第三步：初始化并重启组件：</p>
<p>gitlab-ctl reconfigure<br>gitlab-ctl restart<br>第四步：浏览器访问<a target="_blank" rel="noopener" href="http://ip:8088/">http://ip:8088</a></p>
<h2 id="mysql-安装"><a href="#mysql-安装" class="headerlink" title="mysql 安装"></a>mysql 安装</h2><p>参考：</p>
<p><a target="_blank" rel="noopener" href="https://segmentfault.com/a/1190000039203507">https://segmentfault.com/a/1190000039203507</a></p>
<h3 id="安装命令："><a href="#安装命令：" class="headerlink" title="安装命令："></a>安装命令：</h3><p> <code>sudo apt install mysql-server</code></p>
<p>不需要做的事情：</p>
<ul>
<li>启动</li>
<li>设置开机启动</li>
</ul>
<p>因为，这两件事情已经通过apt自动完成了</p>
<blockquote>
<p><strong>MySQL服务管理</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">sudo service mysql status <span class="comment"># 查看服务状态</span></span><br><span class="line">sudo service mysql start <span class="comment"># 启动服务</span></span><br><span class="line">sudo service mysql stop <span class="comment"># 停止服务</span></span><br><span class="line">sudo service mysql restart <span class="comment"># 重启服务</span></span><br></pre></td></tr></table></figure>
</blockquote>
<h3 id="查看mysql状态"><a href="#查看mysql状态" class="headerlink" title="查看mysql状态"></a>查看mysql状态</h3><p>输入<code>service mysql status</code>就可以看到mysql正在运行中了，差不多要占350MB的内存</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">bot@ubuntu:~/Desktop/python/django/2$ service mysql status</span><br><span class="line">● mysql.service - MySQL Community Server</span><br><span class="line">     Loaded: loaded (/lib/systemd/system/mysql.service; enabled; vendor preset: enabled)</span><br><span class="line">     Active: active (running) since Wed 2021-02-10 16:15:50 CST; 17min ago</span><br><span class="line">    Process: 1008 ExecStartPre=/usr/share/mysql/mysql-systemd-start pre (code=exited, status=0/SUCCESS)</span><br><span class="line">   Main PID: 1168 (mysqld)</span><br><span class="line">     Status: <span class="string">&quot;Server is operational&quot;</span></span><br><span class="line">      Tasks: 37 (<span class="built_in">limit</span>: 4620)</span><br><span class="line">     Memory: 395.2M</span><br><span class="line">     CGroup: /system.slice/mysql.service</span><br><span class="line">             └─1168 /usr/sbin/mysqld</span><br><span class="line"></span><br><span class="line">2月 10 16:15:45 ubuntu systemd[1]: Starting MySQL Community Server...</span><br><span class="line">2月 10 16:15:50 ubuntu systemd[1]: Started MySQL Community Server.</span><br></pre></td></tr></table></figure>





<h3 id="权限设置"><a href="#权限设置" class="headerlink" title="权限设置"></a>权限设置</h3><p><strong>直接进入mysql</strong><br>命令：<code>sudo mysql</code></p>
<p>重置root账户密码</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ALTER USER <span class="string">&#x27;root&#x27;</span>@<span class="string">&#x27;localhost&#x27;</span> IDENTIFIED WITH mysql_native_password BY <span class="string">&#x27;新密码&#x27;</span>;</span><br></pre></td></tr></table></figure>

<p>刷新权限</p>
<p>FLUSH PRIVILEGES;</p>
<h3 id="远程root-用户"><a href="#远程root-用户" class="headerlink" title="远程root 用户"></a>远程root 用户</h3><p>如果需要远程登陆：</p>
<ul>
<li>创建一个 <code>host</code> 字段为 <code>%</code> 的 root 用户（创建用户的同时设置密码）</li>
<li>授权所有数据库的访问权限</li>
<li>刷新权限列表</li>
</ul>
<p><strong>新建一个 host 为 % 的 root用户，密码随意</strong></p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">create</span> <span class="keyword">user</span> <span class="string">&#x27;root&#x27;</span>@<span class="string">&#x27;%&#x27;</span> identified <span class="keyword">by</span> <span class="string">&#x27;yourpassword&#x27;</span>;</span><br></pre></td></tr></table></figure>

<p><strong>授权</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">GRANT ALL PRIVILEGES ON *.* TO &#x27;root&#x27;@&#x27;%&#x27; WITH GRANT OPTION;</span><br></pre></td></tr></table></figure>

<p><strong>刷新权限</strong></p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">FLUSH PRIVILEGES;</span><br></pre></td></tr></table></figure>



<h3 id="远程连接"><a href="#远程连接" class="headerlink" title="远程连接"></a>远程连接</h3><p>光设置需要登陆用户的 host 为 % 是不够的，因为 mysql 的配置文件中静止了远程登录，需要去修改一下配置文件。<br>👇👇👇</p>
<p>如果你遇到了这个问题，并不需要修改防火墙等等，只需按我如下的操作即可</p>
<p><img src="/2024/01/10/Ubuntu20%E9%83%A8%E7%BD%B2/image-20231025202453987.png" alt="image-20231025202453987"></p>
<p>先关停mysql服务</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo systemctl stop mysql</span><br></pre></td></tr></table></figure>

<p>编辑mysql配置文件</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo vim /etc/mysql/mysql.conf.d/mysqld.cnf</span><br></pre></td></tr></table></figure>

<p><img src="/2024/01/10/Ubuntu20%E9%83%A8%E7%BD%B2/bVcOEXA.png" alt="image.png"><br>注销掉</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#bind-address           = 127.0.0.1</span></span><br></pre></td></tr></table></figure>

<p>在开启mysql服务即可<code>sudo service mysql start</code></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">bot@ubuntu:~$ sudo service mysql start</span><br><span class="line">bot@ubuntu:~$ sudo service mysql status</span><br></pre></td></tr></table></figure>



<h2 id="安装redis"><a href="#安装redis" class="headerlink" title="安装redis"></a>安装redis</h2><p>执行以下命令</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sudo apt update</span><br><span class="line">sudo apt install redis-server</span><br></pre></td></tr></table></figure>


<p>一旦安装完成服务器将自动启动，查看服务状态，输入以下命令</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo systemctl status redis-server</span><br></pre></td></tr></table></figure>




<p>注意：</p>
<p>如果你的服务器上禁用ipv6，那么redis服务将启动失败</p>
<p>配置密码</p>
<p><a target="_blank" rel="noopener" href="https://so.csdn.net/so/search?q=vi%E7%BC%96%E8%BE%91%E5%99%A8&spm=1001.2101.3001.7020">vi编辑器</a>打开<strong>redis.conf</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost /]# vi /etc/redis/redis.conf</span><br></pre></td></tr></table></figure>

<p><strong>找到#  requirepass foobared这一行，将注释符号#去掉，将后面修改成自己的密码，例如，设置密码为123abc</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">requirepass juihui@redis</span><br></pre></td></tr></table></figure>

<p>wq保存退出，重启服务器即可</p>
<h3 id="配置远程访问"><a href="#配置远程访问" class="headerlink" title="配置远程访问"></a>配置远程访问</h3><p>如下步骤<br>1.通过sudo打开配置文件</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo vim /etc/redis/redis.conf</span><br></pre></td></tr></table></figure>


<p>2.将 bind 127.0.0.1 ::1 注释掉</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#bind 127.0.0.1 ::1</span></span><br></pre></td></tr></table></figure>

<p>1<br>3.将 protected-mode 改成 no</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">protected-mode no</span><br></pre></td></tr></table></figure>



<p>输入&#x2F;requirepass 找到requirepass关键字，后面跟的就是密码，默认是注释掉的，即不需要密码</p>
<p>注释打开，后面修改为自己的密码</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># The requirepass is not compatable with aclfile option and the ACL LOAD</span></span><br><span class="line"><span class="comment"># command, these will cause requirepass to be ignored.</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"> requirepass 123456</span><br></pre></td></tr></table></figure>



<p>4.保存配置文件<br>5.重启Redis服务器 使其生效</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo systemctl restart redis-server</span><br></pre></td></tr></table></figure>

<p>1<br>6.验证redis服务器正在监听6379端口</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ss -an | grep 6379</span><br></pre></td></tr></table></figure>


<p>能看到如下信息</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">tcp  LISTEN 0   511   0.0.0.0:6379   0.0.0.0:*</span><br><span class="line">tcp  LISTEN 0   511      [::]:6379      [::]:*  </span><br><span class="line"></span><br></pre></td></tr></table></figure>


<p>我自己配置到这里就已经可以了 下面是补充：</p>
<p>下一步，你将需要配置你的防火墙，允许网络流量通过 TCP 端口6379。</p>
<p>通常你想要允许从一个指定 IP 地址或者一个指定 IP 范围来访问 Redis 服务器。例如，想要允许从192.168.121.0&#x2F;24的连接，运行下面的命令：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sudo ufw allow proto tcp from IP地址/24 to any port 6379</span><br><span class="line"><span class="comment">#确保你的防火墙被配置仅仅接受来自受信任 IP 的连接。</span></span><br></pre></td></tr></table></figure>


<p>进行远程连接测试<br>测试</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">redis-cli -h 10.211.55.7 ping</span><br></pre></td></tr></table></figure>

<p>成功会得到：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">PONG</span><br></pre></td></tr></table></figure>


<p>连接</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">redis-cli -h 地址</span><br></pre></td></tr></table></figure>

<p>例如：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">redis-cli -h 192.168.1.1</span><br></pre></td></tr></table></figure>

<h2 id="安装nginx"><a href="#安装nginx" class="headerlink" title="安装nginx"></a>安装nginx</h2><h3 id="安装命令"><a href="#安装命令" class="headerlink" title="安装命令"></a>安装命令</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo apt install nginx</span><br></pre></td></tr></table></figure>

<h3 id="Ubuntu-设置Nginx开机自启"><a href="#Ubuntu-设置Nginx开机自启" class="headerlink" title="Ubuntu 设置Nginx开机自启"></a>Ubuntu 设置Nginx开机自启</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">systemctl <span class="built_in">disable</span> nginx.service 关闭开机自启</span><br><span class="line">systemctl <span class="built_in">enable</span> nginx.service 开启开机自启</span><br><span class="line">systemctl status nginx.service 查看状态</span><br><span class="line">systemctl restart nginx.service 重启服务</span><br><span class="line">systemctl list-units --<span class="built_in">type</span>=service 查看所有服务</span><br></pre></td></tr></table></figure>

<h2 id="安装java"><a href="#安装java" class="headerlink" title="安装java"></a>安装java</h2><h3 id="前提条件"><a href="#前提条件" class="headerlink" title="前提条件"></a><strong>前提条件</strong></h3><p>在你打算安装 <strong>Java 17（OpenJDK 17）</strong> 的 Ubuntu 桌面或服务器上，我们不需要任何特殊配置。我们只需要系统管理员权限（也称为 sudo 权限）以及一个正常的网络连接。所以，如果你都有，只需打开 Ubuntu 的命令终端，按照以下步骤操作：</p>
<h3 id="步骤-1：更新-Ubuntu-软件包列表"><a href="#步骤-1：更新-Ubuntu-软件包列表" class="headerlink" title="步骤 1：更新 Ubuntu 软件包列表"></a><strong>步骤 1：更新 Ubuntu 软件包列表</strong></h3><p>在安装新软件包之前，有必要对 Linux 系统进行更新。这将确保系统拥有已安装软件包的最新版本，并刷新 APT 索引缓存，使其能够下载和安装最新的应用程序。</p>
<figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo apt update</span><br></pre></td></tr></table></figure>

<h3 id="步骤-2：在-Ubuntu-22-04-或-20-04-上安装-OpenJDK-17"><a href="#步骤-2：在-Ubuntu-22-04-或-20-04-上安装-OpenJDK-17" class="headerlink" title="步骤 2：在 Ubuntu 22.04 或 20.04 上安装 OpenJDK 17"></a><strong>步骤 2：在 Ubuntu 22.04 或 20.04 上安装 OpenJDK 17</strong></h3><p>与 Oracle 的 Java 不同，OpenJDK 完全由开源社区维护，因此可以直接通过 Ubuntu Linux 官方软件仓库获得。这意味着我们无需添加任何额外的内容到系统中。只需在终端中使用给定的命令，OpenJDK 17 版本将被安装在你的 Ubuntu 系统上。</p>
<figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo apt install openjdk-17-jdk</span><br></pre></td></tr></table></figure>

<p>当系统要求输入密码时，请输入密码。然后键入 ‘<strong>Y</strong>‘ 并按 ‘<strong>Enter</strong>‘ 继续安装。</p>
<h3 id="步骤-3：确认-OpenJDK-已安装"><a href="#步骤-3：确认-OpenJDK-已安装" class="headerlink" title="步骤 3：确认 OpenJDK 已安装"></a><strong>步骤 3：确认 OpenJDK 已安装</strong></h3><p>虽然通过上面的命令，OpenJDK 17 已经安装在我们的系统上，但仍有人想要确认一下。你可以使用以下命令查看 Ubuntu 上当前安装的 Java 版本。</p>
<figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">java -version</span><br></pre></td></tr></table></figure>

<p><strong>你应该看到类似以下的输出：</strong></p>
<figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">openjdk version &quot;17.0.7&quot; 2023-04-18 </span><br><span class="line">OpenJDK Runtime Environment (build 17.0.7+7-Ubuntu-0ubuntu122.04.2) </span><br><span class="line">OpenJDK 64-Bit Server VM (build 17.0.7+7-Ubuntu-0ubuntu122.04.2, mixed mode, sharing)</span><br></pre></td></tr></table></figure>



<h3 id="步骤-4：设置默认-Java-版本（可选）"><a href="#步骤-4：设置默认-Java-版本（可选）" class="headerlink" title="步骤 4：设置默认 Java 版本（可选）"></a><strong>步骤 4：设置默认 Java 版本（可选）</strong></h3><p>如果你的系统上已经安装了多个 OpenJDK 版本，你可以使用 <strong>update-alternatives</strong> 命令将某个特定版本的 JAVA 设置为全局默认版本，适用于所有应用程序。该命令帮助用户管理多个 Java 安装。</p>
<p>要配置默认的 Java 版本，请使用以下命令：</p>
<figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo update-alternatives --config java</span><br></pre></td></tr></table></figure>

<p>上述命令将显示所有已安装的 Java 版本列表。输入对应于 OpenJDK 条目的编号，即可将其设置为默认版本，然后按 ‘<strong>Enter</strong>‘。</p>
<h3 id="步骤-5：设置-JAVA-HOME-环境变量（可选）"><a href="#步骤-5：设置-JAVA-HOME-环境变量（可选）" class="headerlink" title="步骤 5：设置 JAVA_HOME 环境变量（可选）"></a><strong>步骤 5：设置 JAVA_HOME 环境变量（可选）</strong></h3><p>与前面的步骤一样，这一步也不是必须的，但某些应用程序或工具，特别是开发人员使用的工具，可能需要设置 <strong>JAVA_HOME</strong> 环境变量。要将 JAVA_HOME 变量设置为 OpenJDK 17，请按照以下步骤进行：</p>
<p>找到 OpenJDK 17 的安装路径。你可以使用 update-alternatives 命令来查找：</p>
<figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo update-alternatives --list java</span><br></pre></td></tr></table></figure>

<p>复制对应于 OpenJDK 17 的路径。</p>
<p>使用 Nano 或其他你喜欢的文本编辑器打开 <strong>.bashrc</strong> 文件：</p>
<figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">nano ~/.bashrc</span><br></pre></td></tr></table></figure>

<p>在文件末尾添加以下行，但不要忘记将 <strong>&#x2F;path&#x2F;to&#x2F;your&#x2F;openjdk-17</strong> 替换为实际的路径。</p>
<figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">export JAVA_HOME=/path/to/your/openjdk-17</span><br></pre></td></tr></table></figure>

<p><strong>保存</strong> 文件并退出文本编辑器（在 Nano 编辑器中按 <strong>Ctrl + X</strong>，然后输入 <strong>Y</strong>，最后按 <strong>Enter</strong>）。</p>
<p>要应用更改，可以关闭终端并重新打开，或者使用给定的命令。</p>
<figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">source ~/.bashrc</span><br></pre></td></tr></table></figure>

<hr>
<h4 id="Ubuntu-切换JDK版本"><a href="#Ubuntu-切换JDK版本" class="headerlink" title="Ubuntu-切换JDK版本"></a>Ubuntu-切换JDK版本</h4><p>参考   -&gt;     <a target="_blank" rel="noopener" href="https://blog.csdn.net/qq_34561745/article/details/130763686">https://blog.csdn.net/qq_34561745/article/details/130763686</a></p>
<p>因为不同场景需要的JDK版本不同，所以可以采用这种方法切换不同的JDK版本。<br>首先查看JDK版本：</p>
<p>1| java -version</p>
<p>如：</p>
<p><img src="/2024/01/10/Ubuntu20%E9%83%A8%E7%BD%B2/e7d743fcb082401a9b6d026fc0a902ee-1704895158886-36.png" alt="img"></p>
<p><em><strong>*一、安装jdk*</strong></em></p>
<p>我要切换成另外一个版本。如果没有但是有需要的话，可以先安装另外一个版本，可以直接采用命令行进行安装：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo apt install openjdk-8-jdk</span><br></pre></td></tr></table></figure>

<p>默认路径会安装在&#x2F;usr&#x2F;lib&#x2F;jvm&#x2F;java-8-<a target="_blank" rel="noopener" href="https://so.csdn.net/so/search?q=openjdk&spm=1001.2101.3001.7020">openjdk</a>-amd64中.<br>配置环境变量：</p>
<p>1| sudo vim ~&#x2F;.bashrc</p>
<p>在最后一行添加</p>
<p>1| ##这个添加的就是路径，一定要和自己jdk安装的路径是一致的</p>
<p>2| export JAVA_HOME&#x3D;&#x2F;usr&#x2F;lib&#x2F;jvm&#x2F;java-8-openjdk-amd64</p>
<p>然后读取一下新的~&#x2F;.bashrc</p>
<p>1| source ~&#x2F;.bashrc</p>
<p>查看版本信息，并检测是否安装成功：</p>
<p>1| java -version</p>
<p>你会发现还是原来的版本，因为还没有切换。</p>
<p><em><strong>*二、切换JDK版本*</strong></em></p>
<p>采用update-alternatives命令进行版本切换</p>
<p>1| #这两个都是路径， &#x2F;usr&#x2F;lib&#x2F;jvm&#x2F;java-8-openjdk-amd64&#x2F;bin&#x2F;java，一定要和自己的路径吻合</p>
<p>2| sudo update-alternatives –install &#x2F;usr&#x2F;bin&#x2F;java java &#x2F;usr&#x2F;lib&#x2F;jvm&#x2F;java-8-openjdk-amd64&#x2F;bin&#x2F;java 1070</p>
<p>如果不太清楚安装在哪里的话，可以打开&#x2F;usr&#x2F;lib&#x2F;jvm文件夹下看一看。设置完成后</p>
<p>1| sudo update-alternatives –config java</p>
<p><img src="/2024/01/10/Ubuntu20%E9%83%A8%E7%BD%B2/87b871ee15b5489fae6e9ac1e72f7966-1704895158886-37.png" alt="img"><br>输入编号2，回车。再查看java版本<br><img src="/2024/01/10/Ubuntu20%E9%83%A8%E7%BD%B2/562ae6ca146d48a5902bc964453cd69c-1704895158886-38.png" alt="img"><br>切换成功！</p>
<h1 id="项目部署"><a href="#项目部署" class="headerlink" title="项目部署"></a>项目部署</h1><h2 id="部署-常用命令"><a href="#部署-常用命令" class="headerlink" title="部署 常用命令"></a>部署 常用命令</h2><p>通过ssh命令 在项目地址下传输文件的命令</p>
<p>在对应的文件下的地址栏目输入cmd </p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"># 将后端jar包传到服务器输入如下代码</span><br><span class="line">scp -r forward-admin.<span class="property">jar</span> root@<span class="number">192.168</span><span class="number">.0</span><span class="number">.103</span>:<span class="regexp">/usr/</span>local/project/forward/server/</span><br><span class="line"></span><br><span class="line">    scp -r dts-admin-api.<span class="property">jar</span> root@<span class="number">192.168</span><span class="number">.0</span><span class="number">.112</span>:<span class="regexp">/usr/</span>local/project/shopping/admin-server/</span><br><span class="line">        nohup  java -jar /usr/local/project/shopping/admin-server/dts-admin-api.<span class="property">jar</span>  &amp;</span><br><span class="line">            </span><br><span class="line">     scp -r dts-merchant-api.<span class="property">jar</span> root@<span class="number">192.168</span><span class="number">.0</span><span class="number">.112</span>:<span class="regexp">/usr/</span>local/project/shopping/merchant-server/    </span><br><span class="line">            nohup  java -jar /usr/local/project/shopping/merchant-server/dts-merchant-api.<span class="property">jar</span>  &amp;</span><br><span class="line">    </span><br><span class="line">     scp -r dts-wx-api.<span class="property">jar</span> root@<span class="number">192.168</span><span class="number">.0</span><span class="number">.112</span>:<span class="regexp">/usr/</span>local/project/shopping/wx-server/ </span><br><span class="line">          nohup  java -jar /usr/local/project/shopping/wx-server/dts-wx-api.<span class="property">jar</span>  &amp;</span><br><span class="line">         </span><br><span class="line">#将前端的dist输入如下的代码</span><br><span class="line">scp -r dist root@<span class="number">192.168</span><span class="number">.0</span><span class="number">.133</span>:<span class="regexp">/usr/</span>local/project/forward/web/</span><br></pre></td></tr></table></figure>



<h2 id="后端部署"><a href="#后端部署" class="headerlink" title="后端部署"></a>后端部署</h2><p>首先将springBoot的项目进行打包 -&gt; 参考网络教程</p>
<p>将jar包的License文件进行替换操作</p>
<p><img src="/2024/01/10/Ubuntu20%E9%83%A8%E7%BD%B2/image-20231018200412155-1697766901131-5-1698138207603-35-1704895158886-39.png" alt="image-20231018200412155"></p>
<p>2.3 找到jar包文件夹</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"># 将打包的 forward-admin.<span class="property">jar</span> 远程传送到linux服务器的”/usr/local/project/forward/server/“  目录下</span><br><span class="line"></span><br><span class="line">scp -r forward-admin.<span class="property">jar</span> root@<span class="number">192.168</span><span class="number">.0</span><span class="number">.103</span>:<span class="regexp">/usr/</span>local/project/forward/server/</span><br></pre></td></tr></table></figure>

<p><img src="/2024/01/10/Ubuntu20%E9%83%A8%E7%BD%B2/image-20231018200942055-1697766894973-3-1698138207603-38-1704895158886-40.png" alt="image-20231018200942055"></p>
<p>2.4 在服务器启动jar包</p>
<p>2.4.1 进入到jar包保存的目录</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">#进入到jar包目录</span><br><span class="line">cd  /usr/local/project/forward/server/</span><br></pre></td></tr></table></figure>

<p>2.4.2 启动java的jar程序</p>
<p>（1）直接启动，控制台退出则关掉应用</p>
<p>java -jar forward-admin.jar</p>
<p>（2）后台启动，控制台退出不会关掉应用</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#打包命令</span></span><br><span class="line"><span class="built_in">nohup</span> java -jar forward-admin.jar &amp;</span><br><span class="line"><span class="comment">#本服务器的打包命令</span></span><br><span class="line"><span class="built_in">nohup</span> java -jar /usr/local/project/forward/server/forward-admin.jar  &amp;</span><br></pre></td></tr></table></figure>

<p>（3）后台启动并且输出日志，控制台退出不会关掉应用</p>
<p>nohup java -jar forward-admin.jar &gt;&gt; .&#x2F;register.log 2&gt;&amp;1 &amp;</p>
<p>（3）后台启动(加内存)并且输出日志，控制台退出不会关掉应用</p>
<p>nohup java -jar -Xms1024m -Xmx2048m forward-admin.jar&gt;&gt; .&#x2F;register.log 2&gt;&amp;1 &amp;</p>
<p>2.4.3 关闭java程序</p>
<p> （1）查询java应用程序</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ps -ef|grep java</span><br></pre></td></tr></table></figure>

<p> （2）强制杀掉进程</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">kill -<span class="number">9</span> xxx</span><br></pre></td></tr></table></figure>

<h2 id="前端部署"><a href="#前端部署" class="headerlink" title="前端部署"></a>前端部署</h2><p>将前端的vue项目进行打包 -&gt;参考网路</p>
<p>打包命令:  npm run build:test</p>
<p><img src="/2024/01/10/Ubuntu20%E9%83%A8%E7%BD%B2/image-20231019211338924-1697766887567-1-1698138207603-37-1704895158886-41.png" alt="image-20231019211338924"></p>
<p>将dist文件上传到服务器</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"># 将打包的 dist 远程传送到linux服务器的”/usr/local/project/forward/web/“  目录下</span><br><span class="line"></span><br><span class="line">scp -r dist root@192.168.0.112:/usr/local/project/forward/web/</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">scp -r dist root@192.168.0.112:/usr/local/project/shopping/admin-web/</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p><img src="/2024/01/10/Ubuntu20%E9%83%A8%E7%BD%B2/image-20231018203917602-1698138207603-36-1704895158886-42.png" alt="image-20231018203917602"></p>
<p>设置nginx的配置 的Server下 插入如下代码</p>
<p>server的配置代码</p>
<figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="section">server</span> &#123;</span><br><span class="line">        <span class="attribute">listen</span>       <span class="number">8082</span>;</span><br><span class="line">        <span class="attribute">server_name</span>  localhost;</span><br><span class="line"></span><br><span class="line">		<span class="section">location</span> / &#123;</span><br><span class="line">            <span class="attribute">root</span>   /usr/local/project/forward/web/dist;</span><br><span class="line">			<span class="attribute">try_files</span> <span class="variable">$uri</span> <span class="variable">$uri</span>/ /index.html;</span><br><span class="line">            <span class="attribute">index</span>  index.html index.htm;</span><br><span class="line">        &#125;</span><br><span class="line">		</span><br><span class="line">        <span class="section">location</span> /test-api/&#123;</span><br><span class="line">            <span class="attribute">proxy_set_header</span> Host <span class="variable">$http_host</span>;</span><br><span class="line">            <span class="attribute">proxy_set_header</span> X-Real-IP <span class="variable">$remote_addr</span>;</span><br><span class="line">            <span class="attribute">proxy_set_header</span> REMOTE-HOST <span class="variable">$remote_addr</span>;</span><br><span class="line">            <span class="attribute">proxy_set_header</span> X-Forwarded-For <span class="variable">$proxy_add_x_forwarded_for</span>;</span><br><span class="line">            <span class="attribute">proxy_pass</span> http://localhost:8081/;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="section">location</span> /profile/ &#123;</span><br><span class="line">            <span class="attribute">proxy_pass</span> http://localhost:8081/profile/;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="attribute">error_page</span>   <span class="number">500</span> <span class="number">502</span> <span class="number">503</span> <span class="number">504</span>  /50x.html;</span><br><span class="line">        <span class="section">location</span> = /50x.html &#123;</span><br><span class="line">            <span class="attribute">root</span>   html;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>

<p> 将上面的代码保存到   -&gt;  nginx下的cnfig下的nginx.conf，保存到server同级下，设置如下图所示，</p>
<p><img src="/2024/01/10/Ubuntu20%E9%83%A8%E7%BD%B2/image-20231018210959644-1698138207603-39-1704895158886-43.png" alt="image-20231018210959644"></p>
<p>重启nginx </p>
<p>重启一下nginx -s reload 即可</p>
<hr>
<p>图片地址问题：</p>
<p>图片问题一般需要再后端的 （ 对图片等数据订单一个配置 ）修改后打包。</p>
<p><img src="/2024/01/10/Ubuntu20%E9%83%A8%E7%BD%B2/image-20231103160112329-1704895158886-44.png" alt="image-20231103160112329"></p>
<h3 id="ssh扩展"><a href="#ssh扩展" class="headerlink" title="ssh扩展"></a>ssh扩展</h3><p>从服务器下载东西到本地windos</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">scp -r -P 9000  root@192.168.0.119:~/storage/pictures/1.jpg   D:/</span><br></pre></td></tr></table></figure>

<p><img src="/2024/01/10/Ubuntu20%E9%83%A8%E7%BD%B2/image-20231107202542223-1704895158886-45.png" alt="image-20231107202542223"></p>
<p>在本地windos上传东西到服务器</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">scp -r dist root@192.168.0.133:/usr/local/project/forward/web/</span><br><span class="line"></span><br><span class="line"><span class="comment"># dist 是windos的文件夹子 ，-r 递归上传 ，/usr/local/project/forward/web/  服务器的地址</span></span><br></pre></td></tr></table></figure>





<h2 id="常见问题"><a href="#常见问题" class="headerlink" title="常见问题"></a>常见问题</h2><p>1、前端遇到问题如下：</p>
<p><img src="/2024/01/10/Ubuntu20%E9%83%A8%E7%BD%B2/image-20231020090233015-1698138207603-40-1704895158886-46.png" alt="image-20231020090233015"></p>
<p>解决方案：</p>
<p>方法一：指定配置目录</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo /usr/local/nginx/sbin/nginx -c /usr/local/nginx/conf/nginx.conf</span><br></pre></td></tr></table></figure>

<p>方法二：在logs下新建一个nginx.pid文件</p>
<p><strong>1.进入nginx的logs目录查看文件，发现没有nginx.pid文件</strong></p>
<p><img src="/2024/01/10/Ubuntu20%E9%83%A8%E7%BD%B2/image-20231020090613256-1698138207603-42-1704895158886-47.png" alt="image-20231020090613256"></p>
<p><strong>2.创建一个nginx.pid文件</strong></p>
<p><img src="/2024/01/10/Ubuntu20%E9%83%A8%E7%BD%B2/image-20231020090629683-1698138207603-41-1704895158886-48.png" alt="image-20231020090629683"></p>
<p><strong>3.编辑nginx.pid文件，文件内容为1473，保存退出</strong></p>
<p><img src="/2024/01/10/Ubuntu20%E9%83%A8%E7%BD%B2/image-20231020090642496-1698138207603-43-1704895158886-49.png" alt="image-20231020090642496"></p>
<p><strong>4.在sbin目录下启动nginx并测试关闭</strong></p>
<p><img src="/2024/01/10/Ubuntu20%E9%83%A8%E7%BD%B2/image-20231020090657062-1698138207603-45-1704895158886-50.png" alt="image-20231020090657062"></p>
<p>成功解决问题</p>
<p><img src="/2024/01/10/Ubuntu20%E9%83%A8%E7%BD%B2/image-20231020092029001-1698138207603-44-1704895158886-51.png" alt="image-20231020092029001"></p>
<p>需要打包为test文件， npm run build:test </p>
<p>打包其他的环境，需要改变Server配置。</p>
<p>3.4在地址栏进行地址访问 比如当前项目 </p>
<p>后端 192.168.0.133:8081</p>
<p>前端 192.168.0.133:8082</p>
<hr>
<p>遇到问题     <strong>nginx: [alert] kill(17451, 1) failed (3: No such process)</strong></p>
<p><img src="/2024/01/10/Ubuntu20%E9%83%A8%E7%BD%B2/image-20231024170836183-1704895158886-52.png" alt="image-20231024170836183"></p>
<p>解决方案</p>
<p>进入sbin文件执行命令 .&#x2F;nginx -c &#x2F;usr&#x2F;local&#x2F;nginx&#x2F;conf&#x2F;nginx.conf</p>
<p>然后再次执行命令 .&#x2F;nginx -s reload </p>
<hr>
<p><strong>请求不到后台的接口</strong></p>
<p><img src="/2024/01/10/Ubuntu20%E9%83%A8%E7%BD%B2/image-20231229125307332.png" alt="image-20231229125307332"></p>
<hr>
<p>后端遇到：</p>
<p>常见问题:</p>
<p>org.springframework.context.ApplicationContextException: Failed to start bean ‘webServerStartStop’; nested exception is org.springframework.boot.web.server.WebServerException: Unable to start embedded Tomcat server</p>
<p><img src="/2024/01/10/Ubuntu20%E9%83%A8%E7%BD%B2/image-20231019214926913-1698138207603-46-1704895158886-53.png" alt="image-20231019214926913"></p>
<p>重启服务器</p>
<hr>
<h2 id="常用操作"><a href="#常用操作" class="headerlink" title="常用操作"></a>常用操作</h2><h3 id="固定-IP地址"><a href="#固定-IP地址" class="headerlink" title="固定 IP地址"></a>固定 IP地址</h3><p>访问配置文件：</p>
<p>vim &#x2F;etc&#x2F;sysconfig&#x2F;network-scripts&#x2F;ifcfg-ens33</p>
<p>进行配置</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">BOOTPROTO=<span class="string">&quot;static&quot;</span></span><br><span class="line"></span><br><span class="line">IPADDR=192.168.0.112</span><br><span class="line">GATEWAY=192.168.0.1</span><br><span class="line">DNS1=114.114.114.114</span><br></pre></td></tr></table></figure>

<p><img src="/2024/01/10/Ubuntu20%E9%83%A8%E7%BD%B2/image-20231027131201590-1704895158886-54.png" alt="image-20231027131201590"></p>
<p>进行重启服务器</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">reboot</span><br></pre></td></tr></table></figure>

<p><img src="/2024/01/10/Ubuntu20%E9%83%A8%E7%BD%B2/image-20231028165617795-1704895158887-55.png" alt="image-20231028165617795"></p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://ddldydd.github.io/2024/01/10/termux%E9%83%A8%E7%BD%B2/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="阿呆">
      <meta itemprop="description" content="书山有路勤为径，学海无涯苦作舟。">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="夏蝉之家">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2024/01/10/termux%E9%83%A8%E7%BD%B2/" class="post-title-link" itemprop="url">termux 部署</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2024-01-10 20:55:17" itemprop="dateCreated datePublished" datetime="2024-01-10T20:55:17+08:00">2024-01-10</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2024-01-11 12:27:38" itemprop="dateModified" datetime="2024-01-11T12:27:38+08:00">2024-01-11</time>
              </span>

          <br>
            <span class="post-meta-item" title="本文字数">
              <span class="post-meta-item-icon">
                <i class="far fa-file-word"></i>
              </span>
                <span class="post-meta-item-text">本文字数：</span>
              <span>32k</span>
            </span>
            <span class="post-meta-item" title="阅读时长">
              <span class="post-meta-item-icon">
                <i class="far fa-clock"></i>
              </span>
                <span class="post-meta-item-text">阅读时长 &asymp;</span>
              <span>59 分钟</span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="Termux-实用教程"><a href="#Termux-实用教程" class="headerlink" title="Termux 实用教程"></a>Termux 实用教程</h1><p>说明：（系统换源  自己百度 主要参考 ：</p>
<p><a target="_blank" rel="noopener" href="https://blog.csdn.net/m0_56349886/article/details/129758123">Termux-Ubuntu22.0.4项目部署（手机服务器实操！！）_termux安装ubuntu-CSDN博客</a>）</p>
<p><a target="_blank" rel="noopener" href="https://blog.csdn.net/JingLisen/article/details/130173531">PVE系列教程(二十)、ubuntu22.04安装gitlab服务器_勤奋的凯尔森同学的博客-CSDN博客</a></p>
<h2 id="termux-进行-ssh-连接"><a href="#termux-进行-ssh-连接" class="headerlink" title="termux 进行 ssh 连接"></a>termux 进行 ssh 连接</h2><p>手机端操作,打开 Termux , 当然你得去下载 Termux<br>1.调出出控制辅助按键</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">音量上 + q</span><br></pre></td></tr></table></figure>


<p>这里推荐使用 Google 中文输入法,有些键盘英文不会直接上屏,所以无法成功</p>
<p>2.常规操作一波升级</p>
<p>输入命令</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">apt update</span><br><span class="line">apt upgrade</span><br></pre></td></tr></table></figure>

<p>3.安装 ssh 和用户管理模块</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">apt install openssh</span><br><span class="line">pkg install termux-auth</span><br></pre></td></tr></table></figure>

<p>4.获取用户名</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">whoami</span><br></pre></td></tr></table></figure>


<p>输出结果如: u0_a333</p>
<p>5.设置密码</p>
<p>passwd<br>6.查看本机 ip</p>
<p>ifconfig</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">如 inet addr: 192.168.0.124</span><br></pre></td></tr></table></figure>

<p>7.设置 ssh 端口 为 9000</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sshd -p 9000</span><br></pre></td></tr></table></figure>

<p>电脑端操作<br>打开 powershell 输入</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ssh u0_a333@192.168.0.124 -p 9000</span><br><span class="line">语法 ssh [用户名]@[IP 地址] -p [sshd 设置的端口]</span><br></pre></td></tr></table></figure>

<p>然后回车输入刚才设置的密码就 OK 了</p>
<p>如果提示:<br>WARNING: REMOTE HOST IDENTIFICATION HAS CHANGED!</p>
<p>则清空电脑端 {user}&#x2F;.ssh&#x2F;known_hosts 文件的内容就行</p>
<p>后记</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">然后你就可以通过 ssh 利用 apt 或者 pkg 命令安装 node , git , Python , DB ,sftp 等软件或者协议,接下来你的手机就可以变成一台服务器了,而且是性能强劲的服务器!</span><br></pre></td></tr></table></figure>

<p>如果想要通过电脑端管理手机存储内的文件:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ssh 连接后可以执行 termux-setup-storage 命令,把存储卡挂载到 /data/data/com.termux/files/home/storage/shared 目录下这样就可以用 cd &lt;path&gt;命令访问手机存储的目录了</span><br></pre></td></tr></table></figure>

<p>前提是 Termux 拥有访问存储的权限,就一般软件的权限设置一样</p>
<p>你甚至可以通过 tsudo 命令来获取 root 权限来操控手机系统软件和文件(前提是手机得 root,并且 root 权限已经分配给给 Termux)</p>
<p>接下来你就可以使用一般的 linux 命令来操控你的手机了</p>
<h3 id="ssh下载与上传"><a href="#ssh下载与上传" class="headerlink" title="ssh下载与上传"></a>ssh下载与上传</h3><p>从服务器下载东西到本地windos</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">scp -r -P 9000  root@192.168.0.119:~/storage/pictures/1.jpg   D:/</span><br></pre></td></tr></table></figure>

<p><img src="/2024/01/10/termux%E9%83%A8%E7%BD%B2/image-20231107202542223.png" alt="image-20231107202542223"></p>
<p>在本地windos上传东西到服务器</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">scp -r dist root@192.168.0.133:/usr/local/project/forward/web/</span><br><span class="line"></span><br><span class="line"><span class="comment"># dist 是windos的文件夹子 ，-r 递归上传 ，/usr/local/project/forward/web/  服务器的地址</span></span><br></pre></td></tr></table></figure>



<h3 id="自动启动-ssh"><a href="#自动启动-ssh" class="headerlink" title="自动启动 ssh"></a>自动启动 ssh</h3><p>具体操作：</p>
<ol>
<li><p>添加或编辑文件 ~&#x2F;.bashrc ：</p>
</li>
<li><p>添加如下内容并且保存。<br>好了 手机上重启termux，会发现ssh启动信息显示</p>
</li>
</ol>
<p>电脑到链接如图：</p>
<p>——- 分割线 ——-</p>
<p>termux 默认是 bash，配置文件~&#x2F;.bashrc</p>
<p>如果终端改为了zsh，就需要改动~&#x2F;.zshrc</p>
<h2 id="内网穿透"><a href="#内网穿透" class="headerlink" title="内网穿透"></a>内网穿透</h2><p>参考 ：</p>
<p><a target="_blank" rel="noopener" href="https://blog.csdn.net/qq_58286439/article/details/131017803">https://blog.csdn.net/qq_58286439/article/details/131017803</a> </p>
<p><a target="_blank" rel="noopener" href="https://blog.csdn.net/m0_73868817/article/details/132677565">使用Termux在Android手机上搭建公网远程Web服务器的详细教程_安卓手机成为外网服务器-CSDN博客</a></p>
<p>概述</p>
<p>Termux是一个Android终端仿真应用程序，用于在 Android 手机上搭建一个完整的Linux 环境，能够实现Linux下的许多基本操作，不需要root权限Termux就可以正常运行。</p>
<p>Apache是一个开源网页服务器软件，由于其跨平台和安全性，被广泛使用，是最流行的 Web 服务器软件之一。我们可以在Android手机上使用Termux来搭建Web服务器，同时做内网穿透，实现公网用户也可以访问，将Android变成小型的云服务器。</p>
<p>下面介绍在安卓Termux上搭建apache服务创建个人站点并且结合cpolar内网穿透工具实现公网访问。</p>
<h3 id="搭建-apache"><a href="#搭建-apache" class="headerlink" title="搭建 apache"></a>搭建 apache</h3><p>执行命令安装apache,安装相对简单,一键安装即可</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">pkg install apache2</span><br><span class="line">1</span><br></pre></td></tr></table></figure>

<p>然后启动apache</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">apachectl start</span><br><span class="line">1</span><br></pre></td></tr></table></figure>

<p>启动的时候如出现以下问题</p>
<p><img src="/2024/01/10/termux%E9%83%A8%E7%BD%B2/3cef8a39c03704dca1a4a56ede091f16.png" alt="image-20230510150038202"></p>
<p>解决方法,修改配置文件,如果没有安装<code>vim</code>,执行命令安装一下</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">pkg install vim</span><br><span class="line">1</span><br></pre></td></tr></table></figure>

<p>编辑修改配置文件</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">vim $PREFIX/etc/apache2/httpd.conf</span><br><span class="line">1</span><br></pre></td></tr></table></figure>

<p>找到<code>ServerName</code>解开注释,<code>www.example.com</code>改为<code>127.0.0.1:8080</code>,端口号可以自己改成自己喜欢的</p>
<p><img src="/2024/01/10/termux%E9%83%A8%E7%BD%B2/22b85d99bc5bef7c1b838fbb9b8d29de.png" alt="image-20230510151133736"></p>
<p>修改后再次启动,即可</p>
<p><img src="/2024/01/10/termux%E9%83%A8%E7%BD%B2/6fa7df59ffc84242881abfc08dbb4681.png" alt="image-20230510151344686"></p>
<p>打开浏览器,输入<code>http://127.0.0.1:8080</code>,即可看到apahe欢迎页面，</p>
<p><img src="/2024/01/10/termux%E9%83%A8%E7%BD%B2/73e6ae21cc63b4f2599540205b489079.png" alt="image-20230510151540948"></p>
<p>停止apache</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">apachectl stop</span><br><span class="line">1</span><br></pre></td></tr></table></figure>

<p>重启apache</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">apachectl restart</span><br><span class="line">1</span><br></pre></td></tr></table></figure>

<h3 id="安装cpolar内网穿透"><a href="#安装cpolar内网穿透" class="headerlink" title="安装cpolar内网穿透"></a>安装cpolar内网穿透</h3><blockquote>
<p>cpolar官网：<a target="_blank" rel="noopener" href="https://www.cpolar.com/">https://www.cpolar.com</a></p>
</blockquote>
<p>成功创建了运行站点的一个apache容器后，我们接下来用cpolar做内网穿透来实现公网环境下的访问。</p>
<p>cpolar它是一个安全的内网穿透云服务，支持http&#x2F;https&#x2F;tcp协议，可以永久免费使用还不限制流量，支持映射80&#x2F;443端口。它可以通过创建安全隧道，将本地服务暴露到公网上，让公网用户也可以正常访问内网服务，不需要公网IP，也不用设置路由器。</p>
<p>创建一个<code>sources.list.d</code>的文件夹:</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">mkdir -p $PREFIX/etc/apt/sources.list.d</span><br><span class="line">1</span><br></pre></td></tr></table></figure>

<p>添加cpolar下载源文件</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">echo &quot;deb [trusted=yes] http://termux.cpolar.com termux extras&quot; &gt;&gt; $PREFIX/etc/apt/sources.list.d/cpolar.list</span><br><span class="line">1</span><br></pre></td></tr></table></figure>

<p>更新仓库</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">pkg update</span><br><span class="line">1</span><br></pre></td></tr></table></figure>

<p>安装cpolar</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">pkg install cpolar</span><br><span class="line">1</span><br></pre></td></tr></table></figure>

<p>安装termux服务</p>
<blockquote>
<p>注意：安装完成后记得关闭重启一下termux 才生效!!</p>
</blockquote>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">pkg install termux-services</span><br><span class="line">1</span><br></pre></td></tr></table></figure>

<p>重启完termux后,然后启动cpolar</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sv up cpolar</span><br><span class="line">1</span><br></pre></td></tr></table></figure>

<p>设置开机自启</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sv-enable cpolar</span><br><span class="line">1</span><br></pre></td></tr></table></figure>

<p>这个是停止cpola服务</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sv down cpolar</span><br><span class="line">1</span><br></pre></td></tr></table></figure>

<p>cpolar.yml主配置文件路径位置</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">$</span><span class="language-bash">PREFIX/etc/cpolar/cpolar.yml</span></span><br><span class="line">1</span><br></pre></td></tr></table></figure>

<p>然后在手机浏览器我们输入<code>http://localhost:9200</code>即可看到cpolar管理界面,使用在cpolar官网注册的邮箱账号即可登陆</p>
<p><img src="/2024/01/10/termux%E9%83%A8%E7%BD%B2/ea9d02460ef1a866d6f166d4f244e3a4.png" alt="image-20230509155942139"></p>
<h3 id="公网访问配置"><a href="#公网访问配置" class="headerlink" title="公网访问配置"></a>公网访问配置</h3><p>手机浏览器打开cpolar web ui管理界面,我们点击左侧仪表盘的隧道管理——创建隧道，由于apache上面我们修改配置文件是<code>8080</code>端口(文章是8080,具体端口号以自己的端口为准)，因此我们要来创建一条http隧道，指向8080端口：</p>
<ul>
<li>隧道名称：可自定义，注意不要重复</li>
<li>协议：http</li>
<li>本地地址：8080</li>
<li>域名类型：选择随机域名</li>
<li>地区：选择China VIP</li>
</ul>
<p>点击<code>创建</code></p>
<p><img src="/2024/01/10/termux%E9%83%A8%E7%BD%B2/5f6296bb6be5cc28478991fc676754e2.png" alt="image-20230510153916787"></p>
<p>创建成功后打开在线隧道列表,可以看到公网访问的地址,有两种访问方式,一种是http,一种是https</p>
<p><img src="/2024/01/10/termux%E9%83%A8%E7%BD%B2/8e9ac77ad4a3eb415ddff1d94cf6be78.png" alt="image-20230510155122769"></p>
<p>我们使用http方式，在浏览器输入公网地址，即可访问成功</p>
<p><img src="/2024/01/10/termux%E9%83%A8%E7%BD%B2/a28f438e3a175b235c4edfac9ff50883.png" alt="image-20230510163512036"></p>
<h3 id="固定公网地址"><a href="#固定公网地址" class="headerlink" title="固定公网地址"></a>固定公网地址</h3><p>由于上面创建的是免费随机隧道，所生成的公网地址会在24小时内随机变化,为了方便长久稳定连接,我们可以固定这个公网地址，配置一个cpolar固定的二级子域名【无需备案】，或者也可以配置使用你自己的域名来访问，这里我们以配置固定的二级子域名来举例。</p>
<blockquote>
<p>需升级至基础套餐或以上才支持配置二级子域名</p>
</blockquote>
<p>登录<a target="_blank" rel="noopener" href="https://dashboard.cpolar.com/">cpolar官网后台</a>，点击左侧仪表盘的<code>预留</code>，找到<code>保留二级子域名</code>，为http隧道保留一个二级子域名。</p>
<ul>
<li><em>地区：选择服务器地区</em></li>
<li><em>名称：填写您想要保留的二级子域名（可自定义）</em></li>
<li><em>描述：即备注，可自定义填写</em></li>
</ul>
<p><img src="/2024/01/10/termux%E9%83%A8%E7%BD%B2/581f2c39b4001287bfc71586fb642c78.png" alt="image-20230510171738839"></p>
<p>本例保留一个名称为<code>mywebsitetest</code>的二级子域名。子域名保留成功后，我们将子域名复制下来，接下来需要将其配置到隧道中去。</p>
<p><img src="/2024/01/10/termux%E9%83%A8%E7%BD%B2/48cd0700f5944c3b6ea0e6f56af18e1f.png" alt="image-20230510171806128"></p>
<p>登录cpolar web ui管理界面，点击左侧仪表盘的<code>隧道管理</code>——<code>隧道列表</code>，找到需要配置二级子域名的隧道，点击右侧的<code>编辑</code></p>
<p><img src="/2024/01/10/termux%E9%83%A8%E7%BD%B2/1daf60f0b2296d3ea18d2ad2d8e4820f.png" alt="image-20230510171929758"></p>
<p>修改隧道信息，将二级子域名配置到隧道中：</p>
<ul>
<li><em>域名类型：改为选择<code>二级子域名</code></em></li>
<li><em>Sub Domain：填写我们刚刚所保留的二级子域名（本例为<code>mywebsitetest</code>）</em></li>
</ul>
<p>修改完成后，点击<code>更新</code></p>
<p><img src="/2024/01/10/termux%E9%83%A8%E7%BD%B2/8b78e94f8b96acf9e06bbcd5721cb953.png" alt="image-20230510172124742"></p>
<p>隧道更新成功后，点击左侧仪表盘的<code>状态</code>——<code>在线隧道列表</code>，可以看到隧道的公网地址，已经更新为二级子域名了.</p>
<p><img src="/2024/01/10/termux%E9%83%A8%E7%BD%B2/e70023a463fbddcae17336212d5e093f.png" alt="image-20230510172216408"></p>
<p>固定后我们使用固定的公网地址,在浏览器中打开,即可看到apache默认页面,这样一个固定的公网地址访问就设置好了</p>
<p><img src="/2024/01/10/termux%E9%83%A8%E7%BD%B2/a9a0c20cbf47fac6563ee653c19a6aae.png" alt="image-20230510172352811"></p>
<h3 id="添加站点"><a href="#添加站点" class="headerlink" title="添加站点"></a>添加站点</h3><p>上面我们访问的页面是apache默认页面,不是我们希望的页面,我们可以把自己喜欢的页面放上去,进入apache htdocs文件夹</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">cd $PREFIX/share/apache2/default-site/htdocs</span><br><span class="line">1</span><br></pre></td></tr></table></figure>

<p>安装下载工具<code>wget</code></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">pkg install wget</span><br><span class="line">1</span><br></pre></td></tr></table></figure>

<p>这里做演示,我们下载一个测试站点</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">wget https://www.cpolar.com/static/downloads/meditation-app-master.tar.gz</span><br><span class="line">1</span><br></pre></td></tr></table></figure>

<p>下载好后解压</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">tar xzf meditation-app-master.tar.gz</span><br><span class="line">1</span><br></pre></td></tr></table></figure>

<p>然后我们在浏览器上面输入上面我们的公网地址加上资源路径<code>/meditation-app-master/index.html</code>，就可看到我们的个人站点啦。</p>
<p>现在只要保持隧道为正常在线状态，公网用户就可以通过这个固定公网地址来访问到我们在termux上搭建的web站点。</p>
<p>3、 安装KodBox</p>
<h2 id="安装基础工具"><a href="#安装基础工具" class="headerlink" title="安装基础工具"></a><strong>安装基础工具</strong></h2><p>更换源之后来赶紧来下载安装一些基本工具吧，这些工具基本上是 Linux 系统自带的，因为 Termux 为了体积不过大，默认是没有带这些工具的，执行下面的命令来安装:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">BASHpkg update</span><br><span class="line">pkg install vim curl wget git tree -y</span><br></pre></td></tr></table></figure>

<h3 id="终端配色方案"><a href="#终端配色方案" class="headerlink" title="终端配色方案"></a>终端配色方案</h3><p><strong>脚本项目地址</strong>：<a target="_blank" rel="noopener" href="https://github.com/Cabbagec/termux-ohmyzsh/">https://github.com/Cabbagec/termux-ohmyzsh/</a></p>
<p>执行下面这个命令确保已经安装好了 curl 命令</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sh -c <span class="string">&quot;<span class="subst">$(curl -fsSL https://github.com/Cabbagec/termux-ohmyzsh/raw/master/install.sh)</span>&quot;</span>   <span class="comment">#安装配色命令</span></span><br></pre></td></tr></table></figure>

<p>手机 App 默认只能访问自己的数据，如果要访问手机的存储，需要请求权限，如果你刚刚不小心点了拒绝的话，那么可以执行以下命令来重新获取访问权限：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">termux-setup-storage</span><br></pre></td></tr></table></figure>

<p>脚本允许后先后有如下两个选项:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">BASHEnter a number, leave blank to not to change: 14</span><br><span class="line">Enter a number, leave blank to not to change: 6</span><br></pre></td></tr></table></figure>

<p>分别选择<code>色彩样式</code>和<code>字体样式</code>，重启 Termux app 后生效配置。</p>
<p><strong>设置色彩样式</strong>：</p>
<p>输入 <code>chcolor</code> 命令更换色彩样式，或者执行 <code>~/.termux/colors.sh</code> 命令</p>
<p><strong>设置字体</strong></p>
<p>运行 <code>chfont</code> 命令更换字体，或者执行 <code>~/.termux/fonts.sh</code> 命令</p>
<h2 id="安装Kodbox"><a href="#安装Kodbox" class="headerlink" title="安装Kodbox"></a>安装Kodbox</h2><p>参考</p>
<p><a target="_blank" rel="noopener" href="https://blog.csdn.net/YiBYiH/article/details/127503804">https://blog.csdn.net/YiBYiH/article/details/127503804</a></p>
<p><a target="_blank" rel="noopener" href="https://www.jianshu.com/p/c7d2cffa1998">https://www.jianshu.com/p/c7d2cffa1998</a></p>
<h3 id="基础环境配置"><a href="#基础环境配置" class="headerlink" title="基础环境配置"></a>基础环境配置</h3><p>必须安装的依赖<code>nginx</code>和<code>php</code>。<br>具体的配置在这：<a target="_blank" rel="noopener" href="https://blog.csdn.net/YiBYiH/article/details/127458284#Ngiinx">《Termux开发环境搭建》-Nginx</a>，这里就简单叙述一下：</p>
<p>安装相应组件：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">pkg install nginx php php-fpm -y</span><br><span class="line">1</span><br></pre></td></tr></table></figure>

<p>配置php:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">vim <span class="variable">$PREFIX</span>/etc/php-fpm.d/www.conf</span><br><span class="line">1</span><br></pre></td></tr></table></figure>

<p>找到：<code>listen = /data/data/com.termux/files/usr/var/run/php-fpm.sock</code>修改为: <code>listen = 127.0.0.1:9000</code></p>
<p>配置Nginx对PHP的代理:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">vim <span class="variable">$PREFIX</span>/etc/nginx/nginx.conf</span><br><span class="line">1</span><br></pre></td></tr></table></figure>

<p>找到<code>index index.html index.htm;</code>修改为: <code>index index.html index.htm index.php;</code><br>找到<code>location ~ \.php$</code>所在块，去掉注释修改为：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">location ~ \.php$ &#123;</span><br><span class="line">    root           html;</span><br><span class="line">    fastcgi_pass   127.0.0.1:9000;</span><br><span class="line">    fastcgi_index  index.php;</span><br><span class="line">    fastcgi_param  SCRIPT_FILENAME  /data/data/com.termux/files/usr/share/nginx/html<span class="variable">$fastcgi_script_name</span>;</span><br><span class="line">    include        fastcgi_params;</span><br><span class="line">&#125;</span><br><span class="line">1234567</span><br></pre></td></tr></table></figure>

<h3 id="kodbox下载安装"><a href="#kodbox下载安装" class="headerlink" title="kodbox下载安装"></a>kodbox下载安装</h3><p>官方下载地址：<a target="_blank" rel="noopener" href="https://kodcloud.com/download/%EF%BC%8C%E5%A4%8D%E5%88%B6%E6%9C%80%E6%96%B0%E7%89%88%E6%9C%AC%E4%B8%8B%E8%BD%BD%E9%93%BE%E6%8E%A5%EF%BC%8C%E4%B8%8B%E8%BD%BD%E5%B9%B6%E5%AE%89%E8%A3%85%EF%BC%9A">https://kodcloud.com/download/，复制最新版本下载链接，下载并安装：</a></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cd</span> <span class="variable">$PREFIX</span>/share/nginx/html</span><br><span class="line"><span class="built_in">mkdir</span> kod</span><br><span class="line"><span class="built_in">cd</span> kod</span><br><span class="line">wget https://static.kodcloud.com/update/download/kodbox.1.35.zip</span><br><span class="line">unzip kodbox.1.22.zip &amp;&amp; <span class="built_in">chmod</span> -Rf 777 ./*</span><br><span class="line">12345</span><br></pre></td></tr></table></figure>

<h3 id="登录并配置"><a href="#登录并配置" class="headerlink" title="登录并配置"></a>登录并配置</h3><p>上述步骤完成，就可以通过<code>http://手机IP:8080/kod</code>访问了：<br><img src="/2024/01/10/termux%E9%83%A8%E7%BD%B2/2fc9c488649d443fb281a4310c2fc969.png" alt="在这里插入图片描述"><br>没有任何错误，点击下一步：<br><img src="/2024/01/10/termux%E9%83%A8%E7%BD%B2/ed3ff1657ef34f468bc7e2ed79202606.png" alt="在这里插入图片描述"><br>这里因为没有配置<code>MySQL</code>，就选自带的<code>SQlite</code>就行，文件类型选择<code>缓存文件</code>，点击确定：<br><img src="/2024/01/10/termux%E9%83%A8%E7%BD%B2/8740d57a6e7f452daa552223b3f08aee.png" alt="在这里插入图片描述"><br>管理员账户配置，账号名和密码都可自定义，完成之后就会跳转到登录页面了：<br><img src="/2024/01/10/termux%E9%83%A8%E7%BD%B2/4bd10a971c7d481db76cbdbe1a00c2c3.png" alt="在这里插入图片描述"></p>
<p>至此安装完成，尽情享用伪桌面系统的私人<a target="_blank" rel="noopener" href="https://so.csdn.net/so/search?q=%E4%BA%91%E7%9B%98&spm=1001.2101.3001.7020">云盘</a>吧！ 【免费版支持创建10个用户，日常家庭的日常使用绰绰有余】</p>
<h3 id="关于手机内部存储访问"><a href="#关于手机内部存储访问" class="headerlink" title="关于手机内部存储访问"></a>关于手机内部存储访问</h3><p>首先确保<a target="_blank" rel="noopener" href="https://so.csdn.net/so/search?q=Termux&spm=1001.2101.3001.7020">Termux</a>获取手机存储访问权限:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">termux-setup-storage</span><br><span class="line">1</span><br></pre></td></tr></table></figure>

<p>termux挂载手机存储目录（创建软链接）：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">ln</span> -s &lt;本机文件夹&gt; &lt;termux内部目录&gt;</span><br><span class="line">1</span><br></pre></td></tr></table></figure>

<p>比如将手机的<code>Download</code>映射到termux的<code>home</code>目录下：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">ln</span> -s /sdcard/Download /data/data/com.termux/files/home</span><br><span class="line">1</span><br></pre></td></tr></table></figure>

<p>之后在kodbox界面操作，登陆后依次点击<code>系统设置</code>-&gt;<code>存储管理</code>-&gt;<code>新增</code>：<br><img src="/2024/01/10/termux%E9%83%A8%E7%BD%B2/6fd102acbaaf455fab5ba0f5b7921ae5.png" alt="在这里插入图片描述"><img src="/2024/01/10/termux%E9%83%A8%E7%BD%B2/85c68e0b892c42bdb7d2c8d9e58021e7.png" alt="在这里插入图片描述"></p>
<p>目录填写软链接完整路径示例：<code>/data/data/com.termux/files/home/Download</code>。<br>保存后刷新页面，就能在文件管理的<code>网络挂载</code>中看到了：<br><img src="/2024/01/10/termux%E9%83%A8%E7%BD%B2/4a7a9e0a0531446caa5fcbdb01c678a6.png" alt="在这里插入图片描述"></p>
<h3 id="关于外网访问"><a href="#关于外网访问" class="headerlink" title="关于外网访问"></a>关于外网访问</h3><p>首先，而<code>kodbox</code>默认不支持<code>https</code>的，这里我们需要设置一下：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">vim <span class="variable">$PREFIX</span>/share/nginx/html/kod/config/config.php</span><br><span class="line">1</span><br></pre></td></tr></table></figure>

<p>大概第<code>85</code>行，将: <code>if(!defined(&#39;HOST&#39;))&#123; define(&#39;HOST&#39;,(get_host());&#125; </code>修改为:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span>(!defined(<span class="string">&#x27;HOST&#x27;</span>))&#123; define(<span class="string">&#x27;HOST&#x27;</span>,rtrim(<span class="string">&#x27;/&#x27;</span>,get_host()).<span class="string">&#x27;/&#x27;</span>);&#125;</span><br><span class="line">1</span><br></pre></td></tr></table></figure>

<p><img src="/2024/01/10/termux%E9%83%A8%E7%BD%B2/d88055b817de4878bb043e585f41b1c1.png" alt="在这里插入图片描述"><br>保存，继续修改<code>setting.php</code>文件：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">vim <span class="variable">$PREFIX</span>/share/nginx/html/kod/config/setting.php</span><br><span class="line">1</span><br></pre></td></tr></table></figure>

<p>大概第<code>295</code>行，将: <code>&#39;listType&#39; =&gt; &quot;icon&quot;, // list||icon||split </code>修改为：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&#x27;listType&#x27;</span> =&gt; <span class="string">&quot;list&quot;</span>, // list||icon||<span class="built_in">split</span> </span><br><span class="line">1</span><br></pre></td></tr></table></figure>

<p>如果你有公网IP，那么接下来的部分就不需要看了，可以直接跳转到下一小节。</p>
<p>如果没有公网IP，这里提供两个解决方案。</p>
<h4 id="ipv4内网穿透"><a href="#ipv4内网穿透" class="headerlink" title="ipv4内网穿透"></a><strong>ipv4内网穿透</strong></h4><p>能看到这的都应该对互联网有所了解，我就简单那<code>花生壳的ddns</code>举个例子吧。<br>首先去花生壳官网注册登录账号: <a target="_blank" rel="noopener" href="https://console.hsk.oray.com/">https://console.hsk.oray.com</a>，登陆后会弹出实名认证，避免后续有什么麻烦就认证一下。<br>注册成功后会免费赠送你一个二级域名，接下来我们就那这个免费域名操作：<br><img src="/2024/01/10/termux%E9%83%A8%E7%BD%B2/4aa453e3a95e4940824810685d3f2233.png" alt="在这里插入图片描述"><br>添加一个映射：<img src="/2024/01/10/termux%E9%83%A8%E7%BD%B2/978c31d3463c4aacb605b036e91bdf53.png" alt="在这里插入图片描述"><img src="/2024/01/10/termux%E9%83%A8%E7%BD%B2/3ac3bbcf895c4f2e9570c8fdf987d7e5.png" alt="在这里插入图片描述"><br>之后使用同局域网设备下载花生壳软件，登录账号就可以使用了。脱离内网，用域名直接访问：<img src="/2024/01/10/termux%E9%83%A8%E7%BD%B2/ae062c520fee42f28e31f4d63bd3e86e.png" alt="在这里插入图片描述"><br>其他品牌的ddns服务自行探索。</p>
<h4 id="直接使用ipv6"><a href="#直接使用ipv6" class="headerlink" title="直接使用ipv6"></a><strong>直接使用ipv6</strong></h4><p>随着ipv6的普及，现在家庭宽带基本上都已经支持ipv6了，通过ipv6可易直接进行公网访问而不需要进行内网穿透。<br>首先确保你的路由器关闭了ipv6防火墙，其次开启ipv6地址分配，路由器不同方法不同，根据自己路由器型号自行百度，实在不会的可以私信我。</p>
<p>① Nginx 开启ipv6访问</p>
<p>Termux的Nginx默认就是支持ipv6的，这里我们只要添加一个ipv6监听服务即可。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">vim <span class="variable">$PREFIX</span>/etc/nginx/nginx.conf</span><br><span class="line">1</span><br></pre></td></tr></table></figure>

<p>找到<code>server</code>，在<code>listen 8080;</code>后添加一个ipv6端口: <code>listen [::]:8081 ipv6only=on;</code><br><img src="/2024/01/10/termux%E9%83%A8%E7%BD%B2/b980920882284a1b89d0f9cceddc8ac8.png" alt="在这里插入图片描述"><br>保存配置文件，重启Nginx服务使配置生效：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">nginx -s reload</span><br><span class="line">1</span><br></pre></td></tr></table></figure>

<p>② 获取手机ipv6地址</p>
<p>使用<code>ip</code>命令可以在Termux内直接查询，先安装工具包：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">pkg install iprroute2</span><br><span class="line">1</span><br></pre></td></tr></table></figure>

<p>使用：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ip -6 addr</span><br><span class="line">1</span><br></pre></td></tr></table></figure>

<p><img src="/2024/01/10/termux%E9%83%A8%E7%BD%B2/583578be7a864b8fb23f46888de7732b.png" alt="在这里插入图片描述"><br>这几个<code>inet6</code>代表的就是你的ipv6地址，其中只有后缀为<code>&lt;global&gt;</code>的才是公网地址，<code>fe80</code>开头的是内网地址。</p>
<p>在线查询工具也很多，这里推荐一个:<a target="_blank" rel="noopener" href="http://www.test-ipv6.com/">http://www.test-ipv6.com/</a><br><img src="/2024/01/10/termux%E9%83%A8%E7%BD%B2/ec38a91d74574dc58f055792e1a1a754.png" alt="在这里插入图片描述"><br>③ 使用ipv6登录</p>
<p>复制ipv6地址，在其他设备访问，我这里用只开了数据流量的手机测试，访问地址格式<code>http://[ipv6]:port_ipv6/kod</code>：<img src="/2024/01/10/termux%E9%83%A8%E7%BD%B2/75e06c76b98548ab91244640f7e215ce.png" alt="在这里插入图片描述"><br>然后去登录日志查看：<img src="/2024/01/10/termux%E9%83%A8%E7%BD%B2/fdca244d408f43a899435e79c8d8b26c.png" alt="在这里插入图片描述"><br>也显示了是ipv6登录。</p>
<p>nginx配置</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line">server &#123;</span><br><span class="line">     listen       <span class="number">8080</span>;</span><br><span class="line">     server_name  localhost;</span><br><span class="line"></span><br><span class="line">     location / &#123;</span><br><span class="line">         root   /data/data/com.termux/files/usr/share/nginx/html;</span><br><span class="line">         index  index.html index.htm index.php;</span><br><span class="line">     &#125;</span><br><span class="line"></span><br><span class="line">     error_page   <span class="number">500</span> <span class="number">502</span> <span class="number">503</span> <span class="number">504</span>  /<span class="number">50</span>x.html;</span><br><span class="line">     location = /<span class="number">50</span>x.html &#123;</span><br><span class="line">         root   /data/data/com.termux/files/usr/share/nginx/html;</span><br><span class="line">     &#125;</span><br><span class="line"></span><br><span class="line">     location ~ \.php$ &#123;</span><br><span class="line">         root           html;</span><br><span class="line">         fastcgi_pass   <span class="number">127.0</span><span class="number">.0</span><span class="number">.1</span>:<span class="number">9090</span>;</span><br><span class="line">         fastcgi_index  index.php;</span><br><span class="line">         fastcgi_param  SCRIPT_FILENAME  /data/data/com.termux/files/usr/share/nginx/html$fastcgi_script_name;</span><br><span class="line">         include        fastcgi_params;</span><br><span class="line">     &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"> &#125;</span><br><span class="line"> </span><br><span class="line"> </span><br><span class="line"> server &#123;</span><br><span class="line">     listen       <span class="number">8081</span>;</span><br><span class="line">     server_name  localhost;</span><br><span class="line">     location / &#123;</span><br><span class="line">         root   /data/data/com.termux/files/usr/share/nginx/html;</span><br><span class="line">         index  index.html index.htm index.php;</span><br><span class="line">     &#125;</span><br><span class="line">     error_page   <span class="number">500</span> <span class="number">502</span> <span class="number">503</span> <span class="number">504</span>  /<span class="number">50</span>x.html;</span><br><span class="line">     location = /<span class="number">50</span>x.html &#123;</span><br><span class="line">         root   /data/data/com.termux/files/usr/share/nginx/html;</span><br><span class="line">     &#125;</span><br><span class="line">     location ~ \.php$ &#123;</span><br><span class="line">         root           html;</span><br><span class="line">         fastcgi_pass   <span class="number">127.0</span><span class="number">.0</span><span class="number">.1</span>:<span class="number">9090</span>;</span><br><span class="line">         fastcgi_index  index.php;</span><br><span class="line">         fastcgi_param  SCRIPT_FILENAME  /data/data/com.termux/files/usr/share/nginx/html$fastcgi_script_name;</span><br><span class="line">         include        fastcgi_params;</span><br><span class="line">     &#125;</span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure>



<h2 id="安装-Hexo"><a href="#安装-Hexo" class="headerlink" title="安装 Hexo"></a>安装 Hexo</h2><p>Hexo 是用 Nodejs 编写的，所以安装的话得使用 npm 命令来安装：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">BASH</span><br><span class="line">npm install hexo-cli -g</span><br></pre></td></tr></table></figure>

<p>安装完成的话，顺便看一下 Hexo 相关的版本信息吧：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">BASH</span><br><span class="line">hexo -v</span><br></pre></td></tr></table></figure>

<h3 id="Hexo-基本部署"><a href="#Hexo-基本部署" class="headerlink" title="Hexo 基本部署"></a>Hexo 基本部署</h3><p>将md文件转化为网页！！！</p>
<p>我们建立一个目录，然后到这个目录下初始化 Hexo 环境：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 手动创建一个目录</span></span><br><span class="line"><span class="built_in">mkdir</span> hexo  </span><br><span class="line"></span><br><span class="line"><span class="comment"># 进入目录下并初始化Hexo环境</span></span><br><span class="line"><span class="built_in">cd</span> hexo  </span><br><span class="line">hexo init  </span><br><span class="line"></span><br><span class="line"><span class="comment">#生成静态文件 启动Hexo</span></span><br><span class="line">hexo g</span><br><span class="line">hexo s      </span><br></pre></td></tr></table></figure>

<p>出现问题可以重新安装一下hexo。</p>
<p>出现图片显示问题：</p>
<p>在项目里下载模块</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install https://github.com/CodeFalling/hexo-asset-image --save</span><br></pre></td></tr></table></figure>



<h2 id="安装alist"><a href="#安装alist" class="headerlink" title="安装alist"></a>安装alist</h2><p>Alist 的安装较为简单。打开 termux，输入下面的指令直接安装：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pkg install alist -y</span><br></pre></td></tr></table></figure>



<p>安装好之后，使用下面的指令查看 admin 的账户和密码：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">alist admin</span><br></pre></td></tr></table></figure>



<p><img src="/2024/01/10/termux%E9%83%A8%E7%BD%B2/image-20231125185910009.png" alt="image-20231125185910009"></p>
<p>然后输入下面的指令开启 alist：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">alist server</span><br></pre></td></tr></table></figure>

<p><img src="/2024/01/10/termux%E9%83%A8%E7%BD%B2/image-20231125185809687.png" alt="image-20231125185809687"></p>
<p>可以看到开启的端口号。</p>
<h1 id="数据安全"><a href="#数据安全" class="headerlink" title="数据安全"></a>数据安全</h1><h2 id="安装IP-Tracer"><a href="#安装IP-Tracer" class="headerlink" title="安装IP-Tracer"></a>安装IP-Tracer</h2><p>《追踪ip地址信息》</p>
<p>apt update</p>
<p>apt install git</p>
<p>git clone <a target="_blank" rel="noopener" href="https://github.com/rajkumardusad/IP-Tracer.git">https://github.com/rajkumardusad/IP-Tracer.git</a></p>
<p>进入安装的IP-Tracer工具里</p>
<p>将权限添加到安装文件中</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">chmod</span> +x install  </span><br></pre></td></tr></table></figure>

<p>然后键入</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">./install</span><br></pre></td></tr></table></figure>

<p>键入如下命令查看ip信息</p>
<p>trace  -m  ip </p>
<p>2、安装Ddos-Ripper</p>
<p>可以参考github教程</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">pkg install git -y</span><br><span class="line">pkg install python -y</span><br><span class="line">pkg install python3 -y</span><br><span class="line">git clone https://github.com/palahsu/DDoS-Ripper.git</span><br><span class="line">cd DDoS-Ripper` `$ ls</span><br><span class="line">$ python3 DRipper.py</span><br></pre></td></tr></table></figure>

<h2 id="安装linux系统"><a href="#安装linux系统" class="headerlink" title="安装linux系统"></a>安装linux系统</h2><p>pkg install proot-distro</p>
<p>查看安装的linux系统 </p>
<p>proot-distro list</p>
<p>安装Ubuntu  linux系统 </p>
<p>proot-distro install ubuntu</p>
<p>登录ubuntu系统 </p>
<p>proot-distro login ubuntu</p>
<h3 id="通过Proot安装ubuntu"><a href="#通过Proot安装ubuntu" class="headerlink" title="通过Proot安装ubuntu"></a>通过Proot安装ubuntu</h3><p>参考（<a target="_blank" rel="noopener" href="https://www.dnzp.com/m/jy/202307/190421.html%EF%BC%89">https://www.dnzp.com/m/jy/202307/190421.html）</a></p>
<p>输入</p>
<p>bash &lt;(curl -L gitee.com&#x2F;mo2&#x2F;linux&#x2F;raw&#x2F;2&#x2F;2)</p>
<p>一路 y</p>
<p>选择 中文简体——》 proot容器</p>
<hr>
<h2 id="VNC安装"><a href="#VNC安装" class="headerlink" title="VNC安装"></a>VNC安装</h2><h3 id="VNC使用"><a href="#VNC使用" class="headerlink" title="VNC使用"></a>VNC使用</h3><p><strong>第一步：停止VNC服务</strong></p>
<p>在更改VNC密码之前，您需要确保VNC服务已停止。如果VNC仍在运行，则您不会能够更改密码。您可以使用以下命令停止VNC服务：</p>
<p>sudo systemctl stop vncserver@：1.service</p>
<p><strong>第二步：更改VNC密码</strong></p>
<p>打开终端并键入以下命令更改VNC密码：</p>
<p>vncpasswd</p>
<p>此命令将提示您输入新密码。请确保您输入一个安全的密码。</p>
<p><strong>第三步：启动VNC服务</strong></p>
<p>输入以下命令启动VNC服务：</p>
<p>sudo systemctl start vncserver@：1.service</p>
<p>这将启动VNC服务并使您的新密码生效。</p>
<p>​                       </p>
<h2 id="安装-青龙面板"><a href="#安装-青龙面板" class="headerlink" title="安装  青龙面板"></a>安装  青龙面板</h2><p>手机termux安装Linux发行版实现无root安装青龙面板</p>
<p>参考    <a target="_blank" rel="noopener" href="https://segmentfault.com/a/1190000041976767?sort=newest">https://segmentfault.com/a/1190000041976767?sort=newest</a></p>
<h3 id="termux安装"><a href="#termux安装" class="headerlink" title="termux安装"></a>termux安装</h3><p>【termux官网】<br>【ZeroTermux】<br>【ZeroTermux 安卓5】</p>
<p>ZeroTermux换源（可跳过）</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sed -i <span class="string">&#x27;s@^\(deb.*stable main\)$@#\1\ndeb https://mirrors.tuna.tsinghua.edu.cn/termux/termux-packages-24 stable main@&#x27;</span> <span class="variable">$PREFIX</span>/etc/apt/sources.list &amp;&amp; apt update &amp;&amp; apt upgrade</span><br></pre></td></tr></table></figure>

<h3 id="安装-Linux-发行版-Alpine"><a href="#安装-Linux-发行版-Alpine" class="headerlink" title="安装 Linux 发行版 Alpine"></a>安装 Linux 发行版 Alpine</h3><p>安装</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">curl -LO https://raw.githubusercontents.com/Hax4us/TermuxAlpine/master/TermuxAlpine.sh</span><br><span class="line">bash TermuxAlpine.sh</span><br></pre></td></tr></table></figure>

<p>启动alpine</p>
<p>startalpine</p>
<h3 id="Alpine安装青龙"><a href="#Alpine安装青龙" class="headerlink" title="Alpine安装青龙"></a>Alpine安装青龙</h3><p>这里安装develop分支测试，可以把下面的QL_BRANCH改为master分支来安装稳定版或改为版本号（如v2.11.1）来安装指定版本</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">set</span> -x \</span><br><span class="line">&amp;&amp; <span class="built_in">echo</span> -e <span class="string">&quot;\n\</span></span><br><span class="line"><span class="string">export QL_DIR=/ql\n\</span></span><br><span class="line"><span class="string">export QL_BRANCH=develop\n\</span></span><br><span class="line"><span class="string">export LANG=zh_CN.UTF-8\n\</span></span><br><span class="line"><span class="string">export TERMUX_APK_RELEASE=F-DROID\n\</span></span><br><span class="line"><span class="string">export SHELL=/bin/bash\n\</span></span><br><span class="line"><span class="string">export PNPM_HOME=~/.local/share/pnpm\n\</span></span><br><span class="line"><span class="string">export PATH=<span class="variable">$PATH</span>:~/.local/share/pnpm:~/.local/share/pnpm/global/5/node_modules\n&quot;</span> \</span><br><span class="line">&gt;&gt; /etc/profile.d/ql_env.sh \</span><br><span class="line">&amp;&amp; <span class="built_in">source</span> /etc/profile \</span><br><span class="line">&amp;&amp; <span class="built_in">echo</span> -e <span class="string">&quot;nameserver 119.29.29.29\n\</span></span><br><span class="line"><span class="string">nameserver 8.8.8.8&quot;</span> &gt; /etc/resolv.conf \</span><br><span class="line">&amp;&amp; sed -i <span class="string">&#x27;s/dl-cdn.alpinelinux.org/mirrors.ustc.edu.cn/g&#x27;</span> /etc/apk/repositories \</span><br><span class="line">&amp;&amp; apk update -f \</span><br><span class="line">&amp;&amp; apk upgrade \</span><br><span class="line">&amp;&amp; apk --no-cache add -f bash make nodejs npm \</span><br><span class="line">coreutils moreutils git curl wget tzdata perl \</span><br><span class="line">openssl nginx jq openssh python3 py3-pip \</span><br><span class="line">&amp;&amp; <span class="built_in">rm</span> -rf /var/cache/apk/* \</span><br><span class="line">&amp;&amp; apk update \</span><br><span class="line">&amp;&amp; <span class="built_in">ln</span> -sf /usr/share/zoneinfo/Asia/Shanghai /etc/localtime \</span><br><span class="line">&amp;&amp; <span class="built_in">echo</span> <span class="string">&quot;Asia/Shanghai&quot;</span> &gt; /etc/timezone \</span><br><span class="line">&amp;&amp; npm config <span class="built_in">set</span> registry https://registry.npmmirror.com \</span><br><span class="line">&amp;&amp; npm install -g pnpm \</span><br><span class="line">&amp;&amp; pnpm add -g pm2 ts-node typescript tslib \</span><br><span class="line">&amp;&amp; <span class="built_in">mkdir</span> -p <span class="variable">$QL_DIR</span> \</span><br><span class="line">&amp;&amp; git <span class="built_in">clone</span> -b <span class="variable">$QL_BRANCH</span> https://github.com/whyour/qinglong.git <span class="variable">$QL_DIR</span> \</span><br><span class="line">&amp;&amp; <span class="built_in">cd</span> <span class="variable">$QL_DIR</span> \</span><br><span class="line">&amp;&amp; <span class="built_in">cp</span> -f .env.example .<span class="built_in">env</span> \</span><br><span class="line">&amp;&amp; <span class="built_in">chmod</span> 777 <span class="variable">$QL_DIR</span>/shell/*.sh \</span><br><span class="line">&amp;&amp; <span class="built_in">chmod</span> 777 <span class="variable">$QL_DIR</span>/docker/*.sh \</span><br><span class="line">&amp;&amp; pnpm install --prod \</span><br><span class="line">&amp;&amp; <span class="built_in">mkdir</span> -p <span class="variable">$QL_DIR</span>/static \</span><br><span class="line">&amp;&amp; git <span class="built_in">clone</span> -b <span class="variable">$QL_BRANCH</span> https://github.com/whyour/qinglong-static.git <span class="variable">$QL_DIR</span>/static \</span><br><span class="line">&amp;&amp; <span class="built_in">ln</span> -s /ql/docker/docker-entrypoint.sh /usr/bin/qinglong \</span><br><span class="line">&amp;&amp; qinglong</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>启动alpine</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">startalpine</span><br></pre></td></tr></table></figure>

<p>启动青龙面板</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">qinglong</span><br></pre></td></tr></table></figure>

<p>报错<br>alpine安装失败<br>清除termux数据（再重启手机更好），或者用zerotermux更方便，直接容器切换里新建一个容器就行了，再重新重新执行安装alpine命令<br>sqlite3安装失败<br>原因不清楚，之前查半天解决的，又忘记了，不过不是所有设备都会报错，一般重新安装就可以解决<br>重新执行安装命令，即pnpm install –prod，然后再执行之后的所有命令，也可以直接复制下面这段</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">pnpm install --prod \</span><br><span class="line">&amp;&amp; <span class="built_in">mkdir</span> -p <span class="variable">$QL_DIR</span>/static \</span><br><span class="line">&amp;&amp; git <span class="built_in">clone</span> -b <span class="variable">$QL_BRANCH</span> https://github.com/whyour/qinglong-static.git <span class="variable">$QL_DIR</span>/static \</span><br><span class="line">&amp;&amp; <span class="built_in">ln</span> -s /ql/docker/docker-entrypoint.sh /usr/bin/qinglong \</span><br><span class="line">&amp;&amp; qinglong</span><br></pre></td></tr></table></figure>

<p>手机重启后再次启动青龙面板失败<br>之前是因为环境变量失效，已经解决了，再有的话就不清楚了。<br>拉库报错<br>原因不明，最开始测试是正常的，后来更新之后就不能拉库了，没仔细研究更新了哪里，可能过段时间还能自动变好吧，有兴趣的自己看青龙作者的更新记录。<br>安装</p>
<h2 id="在Termux中运行Docker"><a href="#在Termux中运行Docker" class="headerlink" title="在Termux中运行Docker"></a>在Termux中运行Docker</h2><p><a target="_blank" rel="noopener" href="https://cloud-atlas.readthedocs.io/zh-cn/latest/android/apps/termux_docker.html#termuxdocker"> docker 参考 </a></p>
<p>我们确实可以在Termux中体验 <a target="_blank" rel="noopener" href="https://cloud-atlas.readthedocs.io/zh-cn/latest/android/apps/termux_dev.html#termux-dev">Termux开发环境</a> ，但是毕竟是在Android系统中运行一个并非完整的Linux系统。所以我们会有一个疑惑，是否可以在手机系统中，也就是在Termux之上再运行一个 <a target="_blank" rel="noopener" href="https://cloud-atlas.readthedocs.io/zh-cn/latest/docker/index.html#docker">Docker Atlas</a> 呢？毕竟，只要能够运行Docker，也就意味着打开了一个全新的容器化环境，能够构建不同的应用程序运行环境，更能够把 <a target="_blank" rel="noopener" href="https://cloud-atlas.readthedocs.io/zh-cn/latest/real/mobile_work/mobile_pixel_dev.html#mobile-pixel-dev">移动开发:Pixel手机(Android)开发环境构建</a> 实现得更完美。</p>
<ul>
<li><p>安装:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">pkg install root-repo</span><br><span class="line">pkg install docker</span><br></pre></td></tr></table></figure></li>
</ul>
<p>安装完成提示:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">Setting up libaio (0.3.112-3) ...</span><br><span class="line">Setting up libdevmapper (2.03.09-2) ...</span><br><span class="line">Setting up libseccomp (2.5.4) ...</span><br><span class="line">Setting up runc (1.0.0-rc92-0) ...</span><br><span class="line"></span><br><span class="line">RunC requires support for devices cgroup support in kernel.</span><br><span class="line"></span><br><span class="line">If CONFIG_CGROUP_DEVICE was enabled during compile time,</span><br><span class="line">you need to run the following commands (as root) in order</span><br><span class="line">to use the RunC:</span><br><span class="line"></span><br><span class="line">  mount -t tmpfs -o mode=755 tmpfs /sys/fs/cgroup</span><br><span class="line">  mkdir -p /sys/fs/cgroup/devices</span><br><span class="line">  mount -t cgroup -o devices cgroup /sys/fs/cgroup/devices</span><br><span class="line"></span><br><span class="line">If you got error when running commands listed above, this</span><br><span class="line">usually means that your kernel lacks CONFIG_CGROUP_DEVICE.</span><br><span class="line"></span><br><span class="line">Setting up containerd (1.4.13) ...</span><br><span class="line">Setting up docker (20.10.14) ...</span><br><span class="line">NOTE: Docker requires the kernel to support</span><br><span class="line">device cgroups, namespace, VETH, among others.</span><br><span class="line"></span><br><span class="line">To check a full list of features needed, run the script:</span><br><span class="line">https://github.com/moby/moby/blob/master/contrib/check-config.sh</span><br></pre></td></tr></table></figure>

<p>内核需要定制支持上述选项</p>
<p>Termux:api应用</p>
<h1 id="Termux-趣味应用"><a href="#Termux-趣味应用" class="headerlink" title="Termux 趣味应用"></a>Termux 趣味应用</h1><h2 id="figlet-、toilet命令"><a href="#figlet-、toilet命令" class="headerlink" title="figlet 、toilet命令"></a>figlet 、toilet命令</h2><p>艺术字生成器，由ASCII字符组成，把文本显示成标题栏。此外还有banner这个命令</p>
<p>安装</p>
<p>$sudo apt-get install figlet</p>
<p>$sudo apt-get install toilet</p>
<p>运行</p>
<p>$figlet fuck you !</p>
<p>$toilet i love you</p>
<p><img src="/2024/01/10/termux%E9%83%A8%E7%BD%B2/20190709151118677-1701705897169-3-1701705899425-5.png" alt="img"></p>
<h2 id="安装彩色的字体：lolcat"><a href="#安装彩色的字体：lolcat" class="headerlink" title="安装彩色的字体：lolcat"></a><strong>安装彩色的字体：lolcat</strong></h2><p> 250  apt-get install ruby</p>
<p> 251  ruby -v</p>
<p> 253  cd &#x2F;usr&#x2F;games&#x2F;</p>
<p> 254  wget <a target="_blank" rel="noopener" href="https://github.com/busyloop/lolcat/archive/master.zip">https://github.com/busyloop/lolcat/archive/master.zip</a></p>
<p> 255  unzip master.zip</p>
<p> 256  cd lolcat-master&#x2F;bin</p>
<p> 257  gem install lolcat</p>
<p> 258  lolcat –version</p>
<p> 259  lolcat -h</p>
<p><img src="/2024/01/10/termux%E9%83%A8%E7%BD%B2/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzI0MDM2NDAz,size_16,color_FFFFFF,t_70.png" alt="img"></p>
<p>260  ps | lolcat</p>
<p><img src="/2024/01/10/termux%E9%83%A8%E7%BD%B2/20190709151029120.png" alt="img"></p>
<p> 261  date | lolcat</p>
<p><img src="/2024/01/10/termux%E9%83%A8%E7%BD%B2/20190709151045840.png" alt="img"></p>
<p>262  man cmatrix | lolcat</p>
<p><img src="/2024/01/10/termux%E9%83%A8%E7%BD%B2/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzI0MDM2NDAz,size_16,color_FFFFFF,t_70-1701706374871-7-1701706381046-16.png" alt="img"></p>
<h2 id="图片转字符串"><a href="#图片转字符串" class="headerlink" title="图片转字符串"></a><strong>图片转字符串</strong></h2><p>sudo apt-get install aview imagemagick<br>asciiview luffy.jiff</p>
<p><img src="/2024/01/10/termux%E9%83%A8%E7%BD%B2/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzI0MDM2NDAz,size_16,color_FFFFFF,t_70-1701706721956-18.png" alt="img"></p>
<p><img src="/2024/01/10/termux%E9%83%A8%E7%BD%B2/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzI0MDM2NDAz,size_16,color_FFFFFF,t_70-1701706721957-19.png" alt="img"></p>
<h2 id="fortune-命令随机名言诗句"><a href="#fortune-命令随机名言诗句" class="headerlink" title="fortune 命令随机名言诗句"></a>fortune 命令随机名言诗句</h2><h2 id="Cowsay"><a href="#Cowsay" class="headerlink" title="Cowsay"></a>Cowsay</h2><p>#apt install cowsay   &#x2F;&#x2F;安装这个包</p>
<p>如果显示</p>
<p>root@hsz:&#x2F;usr&#x2F;games# fortune | cowsay</p>
<p>&#x2F;usr&#x2F;bin&#x2F;env: node: No such file or directory</p>
<p>Command ‘fortune’ is available in ‘&#x2F;usr&#x2F;games&#x2F;fortune’</p>
<p>The command could not be located because ‘&#x2F;usr&#x2F;games’ is not included in the PATH environment variable.</p>
<p>fortune: command not found</p>
<p><img src="/2024/01/10/termux%E9%83%A8%E7%BD%B2/20190709151218968.png" alt="img"></p>
<p>那么是因为环境变量没有配置好：</p>
<p>root@hsz:&#x2F;# vim &#x2F;etc&#x2F;profile  &#x2F;&#x2F;里面最后一行加入：export PATH&#x3D;”&#x2F;usr&#x2F;games:$PATH”</p>
<p>root@hsz:&#x2F;# source &#x2F;etc&#x2F;profile</p>
<p>这样就可以使用了。</p>
<p>如：#fortune | cowsay</p>
<p><img src="/2024/01/10/termux%E9%83%A8%E7%BD%B2/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzI0MDM2NDAz,size_16,color_FFFFFF,t_70-1701707139008-24.png" alt="img"></p>
<p>root@hsz:&#x2F;# cowthink today is nice!</p>
<p>root@hsz:&#x2F;# cowsay srsly dude, why?</p>
<p>还有很多操作</p>
<p>cowsay -f tux “坑爹啊”</p>
<p><img src="/2024/01/10/termux%E9%83%A8%E7%BD%B2/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzI0MDM2NDAz,size_16,color_FFFFFF,t_70-1701707139008-25.png" alt="img"></p>
<h2 id="一些彩色的字"><a href="#一些彩色的字" class="headerlink" title="一些彩色的字"></a>一些彩色的字</h2><p># figlet I Love Temint | lolcat</p>
<p><img src="/2024/01/10/termux%E9%83%A8%E7%BD%B2/201907091514368.png" alt="img"></p>
<p>#toilet  I Love Temint | lolcat</p>
<p><img src="/2024/01/10/termux%E9%83%A8%E7%BD%B2/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzI0MDM2NDAz,size_16,color_FFFFFF,t_70-1701707241151-32.png" alt="img"></p>
<p># cowsay -f gnu “Temint” is the best Linux Resource Available online | lolcat</p>
<p><img src="/2024/01/10/termux%E9%83%A8%E7%BD%B2/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzI0MDM2NDAz,size_16,color_FFFFFF,t_70-1701707241151-33.png" alt="img"></p>
<p>8 *<strong>ASCII艺术框：box命令</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-get install boxes</span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;Tongji Univerisity&quot;</span> | boxes</span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;Tongji Univerisity&quot;</span> | boxes -d dog</span><br><span class="line">fortune | boxes -d <span class="built_in">cat</span> | lolcat</span><br><span class="line"></span><br><span class="line"><span class="comment"># fortune | boxes -d mouse | lolcat 等</span></span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p><img src="/2024/01/10/termux%E9%83%A8%E7%BD%B2/image-20231205003117661-1701707485808-46.png" alt="image-20231205003117661"></p>
<h1 id="Termux-API-扩展用法详解"><a href="#Termux-API-扩展用法详解" class="headerlink" title="Termux:API 扩展用法详解"></a>Termux:API 扩展用法详解</h1><p><a target="_blank" rel="noopener" href="https://www.zhihu.com/people/iamhefang"><img src="/2024/01/10/termux%E9%83%A8%E7%BD%B2/v2-0f0577f3cde5d4bb79c2ec4eccf8523c_l.jpg" alt="何方"></a></p>
<p><a target="_blank" rel="noopener" href="https://www.zhihu.com/people/iamhefang">何方</a></p>
<p><a target="_blank" rel="noopener" href="https://iamhefang.cn/">https://iamhefang.cn</a></p>
<p>15 人赞同了该文章</p>
<h2 id="什么是Termux-API？"><a href="#什么是Termux-API？" class="headerlink" title="什么是Termux:API？"></a>什么是Termux:API？</h2><p>Termux:API是Termux的一个扩展包，安装Termux:API以后可以在Termux里面通过命令调用安卓原生的能力，比如调用摄像头拍照、获取定位信息等等。</p>
<p>本文原文来自何方的软件分享站</p>
<p><a href="https://link.zhihu.com/?target=https://soft.iamhefang.cn/content/termux-api-detail.html">Termux:API用法详解 - 何方的软件分享soft.iamhefang.cn&#x2F;content&#x2F;termux-api-detail.html</a></p>
<p>Termux介绍请参考下面这个视频</p>
<p><a target="_blank" rel="noopener" href="https://www.zhihu.com/zvideo/1387475378072576000">如何在安卓中使用完整的Linux系统？6681 播放 · 15 赞同视频<img src="/2024/01/10/termux%E9%83%A8%E7%BD%B2/v2-43a17109c023c6dad69c85fac650c657_r.jpg" alt="点击可播放视频"></a></p>
<h2 id="如何安装Termux-API"><a href="#如何安装Termux-API" class="headerlink" title="如何安装Termux:API"></a>如何安装Termux:API</h2><p>1、 安装一个“Termux:API”的apk包。<br>2、安装完“Termux:API”以后打开termux主程序，执行下面的命令再安装一个“Termux:API”的命令工具。</p>
<figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">apt install termux-api</span><br></pre></td></tr></table></figure>

<h2 id="Termux-API用法"><a href="#Termux-API用法" class="headerlink" title="Termux:API用法"></a>Termux:API用法</h2><p>下面列出的Termux:API的所有api的用法、入参和出参。需要使用哪个api可以在目录中快速跳转。</p>
<h2 id="获取设备电池信息"><a href="#获取设备电池信息" class="headerlink" title="获取设备电池信息"></a>获取设备电池信息</h2><p><strong>命令</strong>：termux-battery-status</p>
<p><strong>出参</strong></p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;health&quot;</span><span class="punctuation">:</span> <span class="string">&quot;GOOD&quot;</span><span class="punctuation">,</span> <span class="comment">// 电池健康状态 </span></span><br><span class="line">  <span class="attr">&quot;percentage&quot;</span><span class="punctuation">:</span> <span class="number">94</span><span class="punctuation">,</span> <span class="comment">// 当前电量百分比</span></span><br><span class="line">  <span class="attr">&quot;plugged&quot;</span><span class="punctuation">:</span> <span class="string">&quot;UNPLUGGED&quot;</span><span class="punctuation">,</span> <span class="comment">// 是否已插入电源</span></span><br><span class="line">  <span class="attr">&quot;status&quot;</span><span class="punctuation">:</span> <span class="string">&quot;DISCHARGING&quot;</span><span class="punctuation">,</span> <span class="comment">// 是否正在充电</span></span><br><span class="line">  <span class="attr">&quot;temperature&quot;</span><span class="punctuation">:</span> <span class="number">33.0</span><span class="punctuation">,</span> <span class="comment">// 电池温度</span></span><br><span class="line">  <span class="attr">&quot;current&quot;</span><span class="punctuation">:</span> <span class="number">252000</span> <span class="comment">// 电池当前放电电流，电位微安，如果设备当前正在充电，则该值是负数</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure>

<h2 id="设置屏幕亮度。"><a href="#设置屏幕亮度。" class="headerlink" title="设置屏幕亮度。"></a>设置屏幕亮度。</h2><p><strong>命令</strong>：</p>
<figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">termux-brightness brightness</span><br></pre></td></tr></table></figure>

<p><strong>权限</strong>：android.permission.WRITE_SETTINGS</p>
<p><strong>入参</strong></p>
<table>
<thead>
<tr>
<th>参数</th>
<th>说明</th>
<th>默认值</th>
<th>可选</th>
</tr>
</thead>
<tbody><tr>
<td>brightness</td>
<td>亮度值</td>
<td>-</td>
<td>0-255</td>
</tr>
</tbody></table>
<h2 id="获取通话记录列表"><a href="#获取通话记录列表" class="headerlink" title="获取通话记录列表"></a>获取通话记录列表</h2><p><strong>命令</strong></p>
<figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">termux-call-log -l limit -o offset</span><br></pre></td></tr></table></figure>

<p><strong>权限</strong>：android.permission.READ_CALL_LOG</p>
<p><strong>入参</strong></p>
<table>
<thead>
<tr>
<th>参数</th>
<th>说明</th>
<th>默认值</th>
<th>可选</th>
</tr>
</thead>
<tbody><tr>
<td>-l limit</td>
<td>每次获取条数</td>
<td>10</td>
<td>✅</td>
</tr>
<tr>
<td>-o offset</td>
<td>从第几条开始获取</td>
<td>0</td>
<td>✅</td>
</tr>
</tbody></table>
<p><strong>出参</strong></p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">[</span></span><br><span class="line">  <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span><span class="string">&quot;名称&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;phone_number&quot;</span><span class="punctuation">:</span><span class="string">&quot;号码&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;date&quot;</span><span class="punctuation">:</span><span class="string">&quot;通话时间&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;duration&quot;</span><span class="punctuation">:</span><span class="string">&quot;通话时长&quot;</span></span><br><span class="line">  <span class="punctuation">&#125;</span></span><br><span class="line">  ...</span><br><span class="line"><span class="punctuation">]</span></span><br></pre></td></tr></table></figure>

<h2 id="获取相机信息"><a href="#获取相机信息" class="headerlink" title="获取相机信息"></a>获取相机信息</h2><p><strong>命令</strong>：termux-camera-info</p>
<p><strong>出参</strong></p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">[</span></span><br><span class="line">  <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;id&quot;</span><span class="punctuation">:</span> <span class="string">&quot;0&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;facing&quot;</span><span class="punctuation">:</span> <span class="string">&quot;back&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;jpeg_output_sizes&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">      <span class="punctuation">&#123;</span></span><br><span class="line">        <span class="attr">&quot;width&quot;</span><span class="punctuation">:</span> <span class="number">4080</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;height&quot;</span><span class="punctuation">:</span> <span class="number">3072</span></span><br><span class="line">      <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">      ...</span><br><span class="line">    <span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;focal_lengths&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">      <span class="number">7.590000152587891</span></span><br><span class="line">    <span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;auto_exposure_modes&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">      <span class="string">&quot;CONTROL_AE_MODE_OFF&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="string">&quot;CONTROL_AE_MODE_ON&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="string">&quot;CONTROL_AE_MODE_ON_AUTO_FLASH&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="string">&quot;CONTROL_AE_MODE_ON_ALWAYS_FLASH&quot;</span></span><br><span class="line">    <span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;physical_size&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">      <span class="attr">&quot;width&quot;</span><span class="punctuation">:</span> <span class="number">11.423999786376953</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;height&quot;</span><span class="punctuation">:</span> <span class="number">8.60159969329834</span></span><br><span class="line">    <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;capabilities&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">      <span class="string">&quot;backward_compatible&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="string">&quot;constrained_high_speed_video&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="string">&quot;raw&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="string">&quot;yuv_reprocessing&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="string">&quot;private_reprocessing&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="string">&quot;read_sensor_settings&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="string">&quot;manual_sensor&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="string">&quot;burst_capture&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="string">&quot;manual_post_processing&quot;</span></span><br><span class="line">    <span class="punctuation">]</span></span><br><span class="line">  <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">  ...</span><br><span class="line"><span class="punctuation">]</span></span><br></pre></td></tr></table></figure>

<h2 id="调用摄像头拍照"><a href="#调用摄像头拍照" class="headerlink" title="调用摄像头拍照"></a>调用摄像头拍照</h2><p><strong>命令</strong>：</p>
<figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">termux-camera-photo -c camera-id filename</span><br></pre></td></tr></table></figure>

<p><strong>权限</strong>：android.permission.CAMERA</p>
<p><strong>入参</strong></p>
<table>
<thead>
<tr>
<th>参数</th>
<th>说明</th>
<th>默认值</th>
<th>可选</th>
</tr>
</thead>
<tbody><tr>
<td>-c camera-id</td>
<td>ermux-camera-info输出的id</td>
<td>0</td>
<td>✅</td>
</tr>
<tr>
<td>filename</td>
<td>文件保存的路径</td>
<td>-</td>
<td>❌</td>
</tr>
</tbody></table>
<h2 id="获取粘贴板数据"><a href="#获取粘贴板数据" class="headerlink" title="获取粘贴板数据"></a>获取粘贴板数据</h2><p><strong>命令</strong>：termux-clipboard-get</p>
<p><strong>权限</strong>：读取粘贴板权限</p>
<p><strong>出参</strong>：直接输出粘贴板内容</p>
<h2 id="设置粘贴板数据"><a href="#设置粘贴板数据" class="headerlink" title="设置粘贴板数据"></a>设置粘贴板数据</h2><p><strong>命令</strong></p>
<figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">termux-clipboard-set text</span><br></pre></td></tr></table></figure>

<p><strong>入参</strong></p>
<table>
<thead>
<tr>
<th>参数</th>
<th>说明</th>
<th>默认值</th>
<th>可选</th>
</tr>
</thead>
<tbody><tr>
<td>text</td>
<td>要复制到粘贴板的内容</td>
<td>-</td>
<td>❌</td>
</tr>
</tbody></table>
<h2 id="获取联系人列表"><a href="#获取联系人列表" class="headerlink" title="获取联系人列表"></a>获取联系人列表</h2><p><strong>命令</strong>：termux-contact-list</p>
<p><strong>权限</strong>：anroid.permission.READ_CONTACTS</p>
<p><strong>出参</strong></p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">[</span></span><br><span class="line">  <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span><span class="string">&quot;名称&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;nuumber&quot;</span><span class="punctuation">:</span><span class="string">&quot;号码&quot;</span></span><br><span class="line">  <span class="punctuation">&#125;</span></span><br><span class="line">  ...</span><br><span class="line"><span class="punctuation">]</span></span><br></pre></td></tr></table></figure>

<h2 id="显示弹窗"><a href="#显示弹窗" class="headerlink" title="显示弹窗"></a>显示弹窗</h2><p><strong>命令</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">termux-dialog confirm -t title -i hint </span><br><span class="line">termux-dialog checkbox -t title -v <span class="string">&quot;,,,&quot;</span> </span><br><span class="line">termux-dialog counter -t title -r min,max,start </span><br><span class="line">termux-dialog <span class="built_in">date</span> -t title -d <span class="string">&quot;dd-MM-yyyy k:m:s&quot;</span></span><br><span class="line">termux-dialog radio -t title -v <span class="string">&quot;,,,&quot;</span></span><br><span class="line">termux-dialog sheet -t title -v <span class="string">&quot;,,,&quot;</span></span><br><span class="line">termux-dialog spinner -t title -i hint </span><br><span class="line">termux-dialog speech -t title -i hint </span><br><span class="line">termux-dialog text -t title -i hint -m -n -p</span><br><span class="line">termux-dialog time -t title</span><br></pre></td></tr></table></figure>

<p><strong>入参</strong></p>
<table>
<thead>
<tr>
<th>参数</th>
<th>说明</th>
<th>默认值</th>
<th>可选</th>
</tr>
</thead>
<tbody><tr>
<td>-t title</td>
<td>弹窗标题</td>
<td>-</td>
<td>✅</td>
</tr>
<tr>
<td>-i hint</td>
<td>弹窗内容</td>
<td>-</td>
<td>✅</td>
</tr>
<tr>
<td>-v “,,,”</td>
<td>以逗号分割的选项列表</td>
<td>-</td>
<td>✅</td>
</tr>
<tr>
<td>-r min,max,start</td>
<td>时数弹窗的数值 min：最小值 max：最大值 start：初始值</td>
<td>-</td>
<td>✅</td>
</tr>
<tr>
<td>-d “dd-MM-yyyy k:m:s”</td>
<td>日期弹窗的输出格式</td>
<td>-</td>
<td>✅</td>
</tr>
<tr>
<td>-m</td>
<td>输入框弹窗多行输入，不能和-n共用</td>
<td>-</td>
<td>✅</td>
</tr>
<tr>
<td>-n</td>
<td>输入框弹窗输入数字，不能和-m共用</td>
<td>-</td>
<td>✅</td>
</tr>
<tr>
<td>-p</td>
<td>输入框弹窗输入密码</td>
<td>-</td>
<td>✅</td>
</tr>
</tbody></table>
<p><strong>出参</strong></p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;code&quot;</span><span class="punctuation">:</span><span class="number">-1</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;text&quot;</span><span class="punctuation">:</span><span class="string">&quot;值&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;values&quot;</span><span class="punctuation">:</span><span class="string">&quot;格式化的值，不同类型的弹窗值不一样&quot;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure>

<h2 id="使用系统下载管理器下载资源。"><a href="#使用系统下载管理器下载资源。" class="headerlink" title="使用系统下载管理器下载资源。"></a>使用系统下载管理器下载资源。</h2><p><strong>命令</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">termux-download -d description -t title -p path url</span><br></pre></td></tr></table></figure>

<p><strong>权限</strong>：无</p>
<p><strong>入参</strong></p>
<table>
<thead>
<tr>
<th>参数</th>
<th>说明</th>
<th>默认值</th>
<th>可选</th>
</tr>
</thead>
<tbody><tr>
<td>-d description</td>
<td>下载通知的描述</td>
<td>-</td>
<td>✅</td>
</tr>
<tr>
<td>-t title</td>
<td>下载通知的标题</td>
<td>-</td>
<td></td>
</tr>
<tr>
<td>-p path</td>
<td>下载文件要保存的路径</td>
<td>-</td>
<td>✅</td>
</tr>
<tr>
<td>url</td>
<td>要下载的url</td>
<td>-</td>
<td>❌</td>
</tr>
</tbody></table>
<h2 id="使用指纹传感器校验身份"><a href="#使用指纹传感器校验身份" class="headerlink" title="使用指纹传感器校验身份"></a>使用指纹传感器校验身份</h2><p><strong>命令</strong>：termux-fingerprint</p>
<p><strong>出参</strong></p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;errors&quot;</span><span class="punctuation">:</span><span class="punctuation">[</span><span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;failed_attempts&quot;</span><span class="punctuation">:</span><span class="number">0</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;auth_result&quot;</span><span class="punctuation">:</span><span class="string">&quot;AUTH_RESULT_SUCCESS&quot;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure>

<h2 id="查询红外发射器支持的载波频率。"><a href="#查询红外发射器支持的载波频率。" class="headerlink" title="查询红外发射器支持的载波频率。"></a>查询红外发射器支持的载波频率。</h2><p><strong>命令</strong>：termux-infrared-frequencies</p>
<p><strong>出参</strong></p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">[</span></span><br><span class="line">  <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;min&quot;</span><span class="punctuation">:</span> <span class="number">30000</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;max&quot;</span><span class="punctuation">:</span> <span class="number">30000</span></span><br><span class="line">  <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">  ...</span><br><span class="line"><span class="punctuation">]</span></span><br></pre></td></tr></table></figure>

<h2 id="发送红外信号"><a href="#发送红外信号" class="headerlink" title="发送红外信号"></a>发送红外信号</h2><p><strong>命令</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">termux-infrared-transmit -f frequency</span><br></pre></td></tr></table></figure>

<p><strong>权限</strong>：无</p>
<p><strong>入参</strong></p>
<table>
<thead>
<tr>
<th>参数</th>
<th>说明</th>
<th>默认值</th>
<th>可选</th>
</tr>
</thead>
<tbody><tr>
<td>frequency</td>
<td>以赫兹为单位的 IR 载波频率。</td>
<td>-</td>
<td>❌</td>
</tr>
</tbody></table>
<h2 id="延迟或定时运行Termux脚本。"><a href="#延迟或定时运行Termux脚本。" class="headerlink" title="延迟或定时运行Termux脚本。"></a>延迟或定时运行Termux脚本。</h2><p><strong>命令</strong>：termux-job-scheduler</p>
<p><strong>权限</strong>：无</p>
<p>获取当前位置。</p>
<p><strong>命令</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">termux-location -p gps/network/passive -r once/last/updates</span><br></pre></td></tr></table></figure>

<p><strong>入参</strong></p>
<table>
<thead>
<tr>
<th>参数</th>
<th>说明</th>
<th>默认值</th>
<th>可选</th>
</tr>
</thead>
<tbody><tr>
<td>-p gps&#x2F;network&#x2F;passive</td>
<td>获取位置的方式</td>
<td>gps</td>
<td>✅</td>
</tr>
<tr>
<td>-r once&#x2F;last&#x2F;updates</td>
<td>获取时机 once：一次 last：上次 updates：更新</td>
<td>once</td>
<td>✅</td>
</tr>
</tbody></table>
<p><strong>出参</strong></p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;latitude&quot;</span><span class="punctuation">:</span> <span class="number">33</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;longitude&quot;</span><span class="punctuation">:</span> <span class="number">114</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;altitude&quot;</span><span class="punctuation">:</span> <span class="number">102</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;accuracy&quot;</span><span class="punctuation">:</span> <span class="number">90</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;vertical_accuracy&quot;</span><span class="punctuation">:</span> <span class="number">961</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;bearing&quot;</span><span class="punctuation">:</span> <span class="number">0.0</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;speed&quot;</span><span class="punctuation">:</span> <span class="number">0.0</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;elapsedMs&quot;</span><span class="punctuation">:</span> <span class="number">38</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;provider&quot;</span><span class="punctuation">:</span> <span class="string">&quot;gps&quot;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure>

<h2 id="播放媒体文件"><a href="#播放媒体文件" class="headerlink" title="播放媒体文件"></a>播放媒体文件</h2><p><strong>命令</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">termux-media-player info</span><br><span class="line">termux-media-player play</span><br><span class="line">termux-media-player play &lt;file&gt;</span><br><span class="line">termux-media-player pause</span><br><span class="line">termux-media-player stop</span><br></pre></td></tr></table></figure>

<p><strong>入参</strong></p>
<table>
<thead>
<tr>
<th>参数</th>
<th>说明</th>
<th>默认值</th>
<th>可选</th>
</tr>
</thead>
<tbody><tr>
<td>info</td>
<td>查看当前播放信息</td>
<td>-</td>
<td>-</td>
</tr>
<tr>
<td>play</td>
<td>暂停后继续播放</td>
<td>-</td>
<td>-</td>
</tr>
<tr>
<td>play 文件路径</td>
<td>播放指定的文件</td>
<td>-</td>
<td>-</td>
</tr>
<tr>
<td>pause</td>
<td>暂停</td>
<td>-</td>
<td>-</td>
</tr>
<tr>
<td>stop</td>
<td>停止</td>
<td>-</td>
<td>-</td>
</tr>
</tbody></table>
<h2 id="媒体扫描"><a href="#媒体扫描" class="headerlink" title="媒体扫描"></a>媒体扫描</h2><p><strong>命令</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">termux-media-scan -r 目录 -v</span><br></pre></td></tr></table></figure>

<p><strong>入参</strong></p>
<table>
<thead>
<tr>
<th>参数</th>
<th>说明</th>
<th>默认值</th>
<th>可选</th>
</tr>
</thead>
<tbody><tr>
<td>-r 目录</td>
<td>要扫描的目录</td>
<td>-</td>
<td>❌</td>
</tr>
<tr>
<td>-v</td>
<td>详细扫描</td>
<td>-</td>
<td>✅</td>
</tr>
</tbody></table>
<h2 id="录音"><a href="#录音" class="headerlink" title="录音"></a>录音</h2><p><strong>命令</strong></p>
<figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">termux-microphone-record -d -f &lt;file&gt; -l &lt;limit&gt; -e &lt;encoder&gt; -b &lt;bitrate&gt; -r &lt;rate&gt; -c &lt;count&gt; -i -q</span><br></pre></td></tr></table></figure>

<p><strong>权限</strong>：android.permission.RECORD_AUDIO</p>
<p><strong>入参</strong></p>
<table>
<thead>
<tr>
<th>参数</th>
<th>说明</th>
<th>默认值</th>
<th>可选</th>
</tr>
</thead>
<tbody><tr>
<td>-d</td>
<td>使用默认值录音</td>
<td>-</td>
<td>-</td>
</tr>
<tr>
<td>-f 文件</td>
<td>录音保存文件</td>
<td>-</td>
<td>-</td>
</tr>
<tr>
<td>-l 时长限制</td>
<td>录音时长限制，单位：秒，0表示不限制</td>
<td>0</td>
<td>-</td>
</tr>
<tr>
<td>-e 格式</td>
<td>指定录音格式 (aac, amr_wb, amr_nb)</td>
<td>-</td>
<td>-</td>
</tr>
<tr>
<td>-b 比特率</td>
<td>指定录音比特率 (单位 kbps)</td>
<td>-</td>
<td>-</td>
</tr>
<tr>
<td>-r 频率</td>
<td>指定录音频率 (单位 Hz)</td>
<td>-</td>
<td>-</td>
</tr>
<tr>
<td>-c 声道数</td>
<td>指定录音声道数 (1, 2, …)</td>
<td>-</td>
<td>-</td>
</tr>
<tr>
<td>-i</td>
<td>获取当前录音信息</td>
<td>-</td>
<td>-</td>
</tr>
<tr>
<td>-q</td>
<td>退出录音</td>
<td>-</td>
<td>-</td>
</tr>
</tbody></table>
<p><strong>出参</strong></p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;isRecording&quot;</span><span class="punctuation">:</span><span class="literal"><span class="keyword">true</span></span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;outputFile&quot;</span><span class="punctuation">:</span><span class="string">&quot;录音文件&quot;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure>

<h2 id="发送通知"><a href="#发送通知" class="headerlink" title="发送通知"></a>发送通知</h2><p><strong>命令</strong></p>
<figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">termux-notification</span><br></pre></td></tr></table></figure>

<p><strong>入参</strong></p>
<table>
<thead>
<tr>
<th>参数</th>
<th>说明</th>
<th>默认值</th>
<th>可选</th>
</tr>
</thead>
<tbody><tr>
<td>–action action</td>
<td>点击通知时执行的动作</td>
<td>-</td>
<td>-</td>
</tr>
<tr>
<td>–alert-once</td>
<td>通知被编辑时不要再次提醒</td>
<td>-</td>
<td>-</td>
</tr>
<tr>
<td>–button1 text</td>
<td>在通知的第一个按钮上显示的文本</td>
<td>-</td>
<td>-</td>
</tr>
<tr>
<td>–button1-action action</td>
<td>点击第一个按钮要执行的动作</td>
<td>-</td>
<td>-</td>
</tr>
<tr>
<td>–button2 text</td>
<td>在通知的第二个按钮上显示的文本</td>
<td>-</td>
<td>-</td>
</tr>
<tr>
<td>–button2-action action</td>
<td>点击第二个按钮要执行的动作</td>
<td>-</td>
<td>-</td>
</tr>
<tr>
<td>–button3 text</td>
<td>在通知的第三个按钮上显示的文本</td>
<td></td>
<td></td>
</tr>
<tr>
<td>–button3-action action</td>
<td>点击第三个按钮要执行的动作</td>
<td></td>
<td></td>
</tr>
<tr>
<td>-c&#x2F;–content content</td>
<td>要在通知中显示的内容，优先级高于标准输入</td>
<td></td>
<td></td>
</tr>
<tr>
<td>–group group</td>
<td>通知分组</td>
<td></td>
<td></td>
</tr>
<tr>
<td>-h&#x2F;–help</td>
<td>显示帮助信息</td>
<td></td>
<td></td>
</tr>
<tr>
<td>–help-actions</td>
<td>显示动作定义帮助信息</td>
<td></td>
<td></td>
</tr>
<tr>
<td>-i&#x2F;–id id</td>
<td>通知id，同一id的通知两次发送时之前的将被替换</td>
<td></td>
<td></td>
</tr>
<tr>
<td>–image-path path</td>
<td>通知中要显示的图片绝对路径</td>
<td></td>
<td></td>
</tr>
<tr>
<td>–led-color rrggbb</td>
<td>呼吸灯颜色</td>
<td>无</td>
<td></td>
</tr>
<tr>
<td>–led-off milliseconds</td>
<td>呼吸灯呼吸时关闭时长</td>
<td>800</td>
<td></td>
</tr>
<tr>
<td>–led-on milliseconds</td>
<td>呼吸灯呼吸时打开时长</td>
<td>800</td>
<td></td>
</tr>
<tr>
<td>–on-delete action</td>
<td>通知被清理时执行的动作</td>
<td>-</td>
<td>-</td>
</tr>
<tr>
<td>–ongoing</td>
<td>发送持久化通知</td>
<td>-</td>
<td>-</td>
</tr>
<tr>
<td>–priority prio</td>
<td>通知优先级</td>
<td>-</td>
<td>high&#x2F;low&#x2F;max&#x2F;min&#x2F;default</td>
</tr>
<tr>
<td>–sound</td>
<td>通知铃声</td>
<td>-</td>
<td>-</td>
</tr>
<tr>
<td>-t&#x2F;–title title</td>
<td>通知标题</td>
<td>-</td>
<td>-</td>
</tr>
<tr>
<td>–vibrate pattern</td>
<td>通知振动，时长以逗号分割 ，500,800,500,900</td>
<td>-</td>
<td>-</td>
</tr>
<tr>
<td>–type type</td>
<td>通知类型</td>
<td></td>
<td>default&#x2F;media</td>
</tr>
<tr>
<td>–media-next</td>
<td>通知类型为media时，显示下一曲按钮</td>
<td></td>
<td></td>
</tr>
<tr>
<td>–media-pause</td>
<td>通知类型为media时，显示暂停按钮</td>
<td>-</td>
<td>-</td>
</tr>
<tr>
<td>–media-play</td>
<td>通知类型为media时，显示播放按钮</td>
<td>-</td>
<td>-</td>
</tr>
<tr>
<td>–media-previous</td>
<td>通知类型为media时，显示上一曲按钮</td>
<td>-</td>
<td>-</td>
</tr>
</tbody></table>
<h2 id="移除通知"><a href="#移除通知" class="headerlink" title="移除通知"></a>移除通知</h2><p><strong>命令</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">termux-notification-remove <span class="built_in">id</span></span><br></pre></td></tr></table></figure>

<p><strong>入参</strong></p>
<table>
<thead>
<tr>
<th>参数</th>
<th>说明</th>
<th>默认值</th>
<th>可选</th>
</tr>
</thead>
<tbody><tr>
<td>id</td>
<td>要移除的通知id，使用termux-notification发送通知时定义的id</td>
<td>-</td>
<td>❌</td>
</tr>
</tbody></table>
<h2 id="获取传感器信息"><a href="#获取传感器信息" class="headerlink" title="获取传感器信息"></a>获取传感器信息</h2><p><strong>命令</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">termux-sensor -h -a -l -s <span class="string">&quot;,,,&quot;</span> -d ms -n num</span><br></pre></td></tr></table></figure>

<p><strong>入参</strong></p>
<table>
<thead>
<tr>
<th>参数</th>
<th>说明</th>
<th>默认值</th>
<th>可选</th>
</tr>
</thead>
<tbody><tr>
<td>-h</td>
<td>显示帮助信息</td>
<td>-</td>
<td>-</td>
</tr>
<tr>
<td>-a</td>
<td>显示全部传感器信息和实时数据（警告：可能对电池有影响）</td>
<td></td>
<td></td>
</tr>
<tr>
<td>-l</td>
<td>显示可用的传感器列表</td>
<td></td>
<td></td>
</tr>
<tr>
<td>-s “,,,”</td>
<td>要监听的传感器，以逗号分割</td>
<td></td>
<td></td>
</tr>
<tr>
<td>-d ms</td>
<td>接收传感器数据之前延迟，单位：ms</td>
<td></td>
<td></td>
</tr>
<tr>
<td>-n num</td>
<td>接收传感器数据次数，最小值为1。 continuous：续续接收</td>
<td>continuous</td>
<td></td>
</tr>
<tr>
<td>-c</td>
<td>释放被占用的传感器</td>
<td></td>
<td></td>
</tr>
</tbody></table>
<p><strong>出参</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="string">&quot;sensors&quot;</span>:[</span><br><span class="line">    <span class="string">&quot;可用的传感器列表&quot;</span>,</span><br><span class="line">    ...</span><br><span class="line">  ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="分享"><a href="#分享" class="headerlink" title="分享"></a>分享</h2><p><strong>命令</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">termux-share -a action -c content-type -d -t title file</span><br></pre></td></tr></table></figure>

<p><strong>入参</strong></p>
<table>
<thead>
<tr>
<th>参数</th>
<th>说明</th>
<th>默认值</th>
<th>可选</th>
</tr>
</thead>
<tbody><tr>
<td>-a action</td>
<td>分享内容要执行的动作类型</td>
<td>view</td>
<td>edit&#x2F;send&#x2F;view</td>
</tr>
<tr>
<td>-c content-type</td>
<td>分享的数据类型</td>
<td>从文件后缀猜测，如果数据是从标准输入来的，默认为</td>
<td>✅</td>
</tr>
<tr>
<td>-d</td>
<td>如果选择一个则分享到默认的接收器而不显示接收器列表</td>
<td>-</td>
<td>✅</td>
</tr>
<tr>
<td>-t title</td>
<td>分享的标题</td>
<td>分享的文件名</td>
<td>✅</td>
</tr>
</tbody></table>
<h2 id="获取短信列表"><a href="#获取短信列表" class="headerlink" title="获取短信列表"></a>获取短信列表</h2><p><strong>命令</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">termux-sms-list -d -l <span class="built_in">limit</span> -n -o offset -t <span class="built_in">type</span></span><br></pre></td></tr></table></figure>

<p><strong>权限</strong>：android.permission.READ_CONTACTS</p>
<p><strong>入参</strong></p>
<table>
<thead>
<tr>
<th>参数</th>
<th>说明</th>
<th>默认值</th>
<th>可选</th>
</tr>
</thead>
<tbody><tr>
<td>-d</td>
<td>显示创建短信的日期</td>
<td></td>
<td></td>
</tr>
<tr>
<td>-l limit</td>
<td>每页显示多少条数据</td>
<td>10</td>
<td></td>
</tr>
<tr>
<td>-n</td>
<td>显示号码</td>
<td>0</td>
<td></td>
</tr>
<tr>
<td>-o offset</td>
<td>从第几个后开始获取</td>
<td></td>
<td></td>
</tr>
<tr>
<td>-t type</td>
<td>要显示的短信类型</td>
<td>inbox</td>
<td>all|inbox|sent|draft|outbox</td>
</tr>
</tbody></table>
<p><strong>出参</strong></p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">[</span></span><br><span class="line">  <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;threadid&quot;</span><span class="punctuation">:</span><span class="number">186</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;type&quot;</span><span class="punctuation">:</span><span class="string">&quot;inbox&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;read&quot;</span><span class="punctuation">:</span><span class="literal"><span class="keyword">true</span></span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;number&quot;</span><span class="punctuation">:</span><span class="string">&quot;号码&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;received&quot;</span><span class="punctuation">:</span><span class="string">&quot;接收时间&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;body&quot;</span><span class="punctuation">:</span><span class="string">&quot;短信内容&quot;</span></span><br><span class="line">  <span class="punctuation">&#125;</span></span><br><span class="line"><span class="punctuation">]</span></span><br></pre></td></tr></table></figure>

<h3 id="发送短信"><a href="#发送短信" class="headerlink" title="发送短信"></a>发送短信</h3><p><strong>命令</strong></p>
<figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">termux-sms-send -n &quot;,,,&quot; text</span><br></pre></td></tr></table></figure>

<p><strong>权限</strong>：android.permission.SEND_SMS</p>
<p><strong>入参</strong></p>
<table>
<thead>
<tr>
<th>参数</th>
<th>说明</th>
<th>默认值</th>
<th>可选</th>
</tr>
</thead>
<tbody><tr>
<td>-n “,,,”</td>
<td>要接收短信的号码，以逗号分割</td>
<td></td>
<td>❌</td>
</tr>
<tr>
<td>text</td>
<td>要发送的短信内容</td>
<td></td>
<td>❌</td>
</tr>
</tbody></table>
<h3 id="选择文件"><a href="#选择文件" class="headerlink" title="选择文件"></a>选择文件</h3><p><strong>命令</strong></p>
<figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">termux-storage-get filename</span><br></pre></td></tr></table></figure>

<p><strong>入参</strong></p>
<table>
<thead>
<tr>
<th>参数</th>
<th>说明</th>
<th>默认值</th>
<th>可选</th>
</tr>
</thead>
<tbody><tr>
<td>filename</td>
<td>要写入的文件</td>
<td>-</td>
<td>❌</td>
</tr>
</tbody></table>
<h2 id="拨打电话"><a href="#拨打电话" class="headerlink" title="拨打电话"></a>拨打电话</h2><p><strong>命令</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">termux-telephony-call number</span><br></pre></td></tr></table></figure>

<p><strong>权限</strong>：andriod.permission.CALL_PHONE</p>
<p><strong>入参</strong></p>
<table>
<thead>
<tr>
<th>参数</th>
<th>说明</th>
<th>默认值</th>
<th>可选</th>
</tr>
</thead>
<tbody><tr>
<td>number</td>
<td>要拨打的号码</td>
<td>-</td>
<td>❌</td>
</tr>
</tbody></table>
<h2 id="获取区域信息"><a href="#获取区域信息" class="headerlink" title="获取区域信息"></a>获取区域信息</h2><p><strong>命令</strong>：termux-telephony-cellinfo</p>
<p><strong>权限</strong>：定位权限</p>
<p><strong>出参</strong></p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;type&quot;</span><span class="punctuation">:</span><span class="string">&quot;类型&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;registered&quot;</span><span class="punctuation">:</span><span class="literal"><span class="keyword">true</span></span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;asu&quot;</span><span class="punctuation">:</span><span class="number">40</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;dbm&quot;</span><span class="punctuation">:</span><span class="number">-97</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;level&quot;</span><span class="punctuation">:</span><span class="number">2</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;ci&quot;</span><span class="punctuation">:</span><span class="number">1936181100</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;pci&quot;</span><span class="punctuation">:</span><span class="number">120</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;tac&quot;</span><span class="punctuation">:</span><span class="number">61292</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;mcc&quot;</span><span class="punctuation">:</span><span class="number">460</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;mnc&quot;</span><span class="punctuation">:</span><span class="number">1</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure>

<h2 id="获取通讯设备信息"><a href="#获取通讯设备信息" class="headerlink" title="获取通讯设备信息"></a>获取通讯设备信息</h2><p><strong>命令</strong>：termux-telephony-deviceinfo</p>
<p><strong>出参</strong></p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;data_enabled&quot;</span><span class="punctuation">:</span> <span class="string">&quot;true&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;data_activity&quot;</span><span class="punctuation">:</span> <span class="string">&quot;none&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;data_state&quot;</span><span class="punctuation">:</span> <span class="string">&quot;connected&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;device_id&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">null</span></span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;device_software_version&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">null</span></span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;phone_count&quot;</span><span class="punctuation">:</span> <span class="number">2</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;phone_type&quot;</span><span class="punctuation">:</span> <span class="string">&quot;gsm&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;network_operator&quot;</span><span class="punctuation">:</span> <span class="string">&quot;46001&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;network_operator_name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;中国联通&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;network_country_iso&quot;</span><span class="punctuation">:</span> <span class="string">&quot;cn&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;network_type&quot;</span><span class="punctuation">:</span> <span class="string">&quot;lte&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;network_roaming&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">false</span></span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;sim_country_iso&quot;</span><span class="punctuation">:</span> <span class="string">&quot;cn&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;sim_operator&quot;</span><span class="punctuation">:</span> <span class="string">&quot;46001&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;sim_operator_name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;中国联通&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;sim_serial_number&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">null</span></span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;sim_subscriber_id&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">null</span></span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;sim_state&quot;</span><span class="punctuation">:</span> <span class="string">&quot;ready&quot;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure>

<h2 id="显示一个Toast"><a href="#显示一个Toast" class="headerlink" title="显示一个Toast"></a>显示一个Toast</h2><p><strong>命令</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">termux-toast -h -b -c -g -s text</span><br></pre></td></tr></table></figure>

<p><strong>入参</strong></p>
<table>
<thead>
<tr>
<th>参数</th>
<th>说明</th>
<th>默认值</th>
<th>可选</th>
</tr>
</thead>
<tbody><tr>
<td>-h</td>
<td>显示帮助信息</td>
<td>-</td>
<td>-</td>
</tr>
<tr>
<td>-b</td>
<td>背景色</td>
<td>gray</td>
<td>✅</td>
</tr>
<tr>
<td>-c</td>
<td>前景色</td>
<td>white</td>
<td>✅</td>
</tr>
<tr>
<td>-g</td>
<td>位置</td>
<td>middle</td>
<td>top, middle, bottom</td>
</tr>
<tr>
<td>-s</td>
<td>短时显示</td>
<td>-</td>
<td>✅</td>
</tr>
<tr>
<td>text</td>
<td>要显示的内容</td>
<td>-</td>
<td>❌</td>
</tr>
</tbody></table>
<h3 id="打开-关闭手电筒"><a href="#打开-关闭手电筒" class="headerlink" title="打开&#x2F;关闭手电筒"></a>打开&#x2F;关闭手电筒</h3><p><strong>命令</strong></p>
<figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">termux-torch status</span><br></pre></td></tr></table></figure>

<p><strong>入参</strong></p>
<table>
<thead>
<tr>
<th>参数</th>
<th>说明</th>
<th>默认值</th>
<th>可选</th>
</tr>
</thead>
<tbody><tr>
<td>status</td>
<td>状态</td>
<td>-</td>
<td>on, off</td>
</tr>
</tbody></table>
<h2 id="获取语音引擎信息"><a href="#获取语音引擎信息" class="headerlink" title="获取语音引擎信息"></a>获取语音引擎信息</h2><p><strong>命令</strong>：termux-tts-engines</p>
<p><strong>出参</strong></p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">[</span></span><br><span class="line">  <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span><span class="string">&quot;包名&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;label&quot;</span><span class="punctuation">:</span><span class="string">&quot;名称&quot;</span></span><br><span class="line">    <span class="attr">&quot;default&quot;</span><span class="punctuation">:</span><span class="literal"><span class="keyword">true</span></span></span><br><span class="line">  <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">  ...</span><br><span class="line"><span class="punctuation">]</span></span><br></pre></td></tr></table></figure>

<h2 id="朗读文本"><a href="#朗读文本" class="headerlink" title="朗读文本"></a>朗读文本</h2><p><strong>命令</strong></p>
<figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">termux-tts-speak -e engine -l language -n region -v variant -r rate  -s stream text</span><br></pre></td></tr></table></figure>

<p><strong>入参</strong></p>
<table>
<thead>
<tr>
<th>参数</th>
<th>说明</th>
<th>默认值</th>
<th>可选</th>
</tr>
</thead>
<tbody><tr>
<td>-e engine</td>
<td>要使用的语音引擎</td>
<td>-</td>
<td>termux-tts-engines输出的引擎</td>
</tr>
<tr>
<td>-l language</td>
<td>要朗读的语言</td>
<td>-</td>
<td>-</td>
</tr>
<tr>
<td>-n region</td>
<td>要朗读语言所在区域</td>
<td>-</td>
<td>-</td>
</tr>
<tr>
<td>-v variant</td>
<td>要朗读语言的变体</td>
<td>-</td>
<td>-</td>
</tr>
<tr>
<td>-p pitch</td>
<td>朗读的声调</td>
<td>1.0</td>
<td>-</td>
</tr>
<tr>
<td>-r rate</td>
<td>朗读的语速</td>
<td>1.0</td>
<td>-</td>
</tr>
<tr>
<td>-s stream</td>
<td>音频流</td>
<td>NOTIFICATION</td>
<td>ALARM, MUSIC, NOTIFICATION, RING, SYSTEM, VOICE_CALL</td>
</tr>
<tr>
<td>text</td>
<td>要朗读的文本</td>
<td>-</td>
<td>❌</td>
</tr>
</tbody></table>
<h2 id="USB设备列表"><a href="#USB设备列表" class="headerlink" title="USB设备列表"></a>USB设备列表</h2><p><strong>命令</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">termux-usb -l -r -e <span class="built_in">command</span></span><br></pre></td></tr></table></figure>

<p><strong>依赖包</strong></p>
<p>要正常使用该功能，需要安装<code>libusb</code>和<code>clang</code>包，可使用<code>apt install libusb clang</code>安装</p>
<p><strong>权限</strong>：USB权限</p>
<p><strong>入参</strong></p>
<table>
<thead>
<tr>
<th>参数</th>
<th>说明</th>
<th>默认值</th>
<th>可选</th>
</tr>
</thead>
<tbody><tr>
<td>-l</td>
<td>列表所有可用的USB设备</td>
<td>-</td>
<td>-</td>
</tr>
<tr>
<td>-r</td>
<td>如果没有权限弹出权限请求弹窗</td>
<td>-</td>
<td>-</td>
</tr>
<tr>
<td>-e command</td>
<td>使用引用设备的文件描述符作为其参数执行指定的命令</td>
<td>-</td>
<td>-</td>
</tr>
</tbody></table>
<p><strong>-l出参</strong></p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">[</span></span><br><span class="line"></span><br><span class="line"><span class="punctuation">]</span></span><br></pre></td></tr></table></figure>

<h2 id="振动"><a href="#振动" class="headerlink" title="振动"></a>振动</h2><p><strong>命令</strong></p>
<figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">termux-vibrate -d duration -f</span><br></pre></td></tr></table></figure>

<p><strong>入参</strong></p>
<table>
<thead>
<tr>
<th>参数</th>
<th>说明</th>
<th>默认值</th>
<th>可选</th>
</tr>
</thead>
<tbody><tr>
<td>-d duration</td>
<td>振动时长</td>
<td>1000</td>
<td>✅</td>
</tr>
<tr>
<td>-f</td>
<td>在静音模式下强制振动</td>
<td>-</td>
<td>✅</td>
</tr>
</tbody></table>
<h2 id="获取-设置音量"><a href="#获取-设置音量" class="headerlink" title="获取&#x2F;设置音量"></a>获取&#x2F;设置音量</h2><p><strong>命令</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">termux-volume stream volume</span><br></pre></td></tr></table></figure>

<p><strong>入参</strong></p>
<table>
<thead>
<tr>
<th>参数</th>
<th>说明</th>
<th>默认值</th>
<th>可选</th>
</tr>
</thead>
<tbody><tr>
<td>stream</td>
<td>要改变的音量</td>
<td>-</td>
<td>alarm, music, notification, ring, system, call</td>
</tr>
<tr>
<td>volume</td>
<td>音量</td>
<td>-</td>
<td>-</td>
</tr>
</tbody></table>
<p><strong>不加参数出参</strong></p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">[</span></span><br><span class="line">  <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;stream&quot;</span><span class="punctuation">:</span> <span class="string">&quot;call&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;volume&quot;</span><span class="punctuation">:</span> <span class="number">11</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;max_volume&quot;</span><span class="punctuation">:</span> <span class="number">11</span></span><br><span class="line">  <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;stream&quot;</span><span class="punctuation">:</span> <span class="string">&quot;system&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;volume&quot;</span><span class="punctuation">:</span> <span class="number">0</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;max_volume&quot;</span><span class="punctuation">:</span> <span class="number">15</span></span><br><span class="line">  <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;stream&quot;</span><span class="punctuation">:</span> <span class="string">&quot;ring&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;volume&quot;</span><span class="punctuation">:</span> <span class="number">10</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;max_volume&quot;</span><span class="punctuation">:</span> <span class="number">15</span></span><br><span class="line">  <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;stream&quot;</span><span class="punctuation">:</span> <span class="string">&quot;music&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;volume&quot;</span><span class="punctuation">:</span> <span class="number">50</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;max_volume&quot;</span><span class="punctuation">:</span> <span class="number">150</span></span><br><span class="line">  <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;stream&quot;</span><span class="punctuation">:</span> <span class="string">&quot;alarm&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;volume&quot;</span><span class="punctuation">:</span> <span class="number">8</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;max_volume&quot;</span><span class="punctuation">:</span> <span class="number">15</span></span><br><span class="line">  <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;stream&quot;</span><span class="punctuation">:</span> <span class="string">&quot;notification&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;volume&quot;</span><span class="punctuation">:</span> <span class="number">10</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;max_volume&quot;</span><span class="punctuation">:</span> <span class="number">15</span></span><br><span class="line">  <span class="punctuation">&#125;</span></span><br><span class="line"><span class="punctuation">]</span></span><br></pre></td></tr></table></figure>

<h3 id="更改桌面壁纸"><a href="#更改桌面壁纸" class="headerlink" title="更改桌面壁纸"></a>更改桌面壁纸</h3><p><strong>命令</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">termux-wallpaper -f file -u url -l</span><br></pre></td></tr></table></figure>

<p><strong>入参</strong></p>
<table>
<thead>
<tr>
<th>参数</th>
<th>说明</th>
<th>默认值</th>
<th>可选</th>
</tr>
</thead>
<tbody><tr>
<td>-f file</td>
<td>使用文件设置桌面壁纸</td>
<td></td>
<td></td>
</tr>
<tr>
<td>-u url</td>
<td>使用网络资源设置桌面壁纸</td>
<td></td>
<td></td>
</tr>
<tr>
<td>-l</td>
<td>设置锁屏壁纸</td>
<td></td>
<td></td>
</tr>
</tbody></table>
<h2 id="获取当前WiFi连接信息"><a href="#获取当前WiFi连接信息" class="headerlink" title="获取当前WiFi连接信息"></a>获取当前WiFi连接信息</h2><p><strong>命令</strong>：termux-wifi-connectioninfo</p>
<p><strong>出参</strong></p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;bssid&quot;</span><span class="punctuation">:</span> <span class="string">&quot;02:00:00:00:00:00&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;frequency_mhz&quot;</span><span class="punctuation">:</span> <span class="number">5745</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;ip&quot;</span><span class="punctuation">:</span> <span class="string">&quot;192.168.31.251&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;link_speed_mbps&quot;</span><span class="punctuation">:</span> <span class="number">260</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;mac_address&quot;</span><span class="punctuation">:</span> <span class="string">&quot;02:00:00:00:00:00&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;network_id&quot;</span><span class="punctuation">:</span> <span class="number">-1</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;rssi&quot;</span><span class="punctuation">:</span> <span class="number">-68</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;ssid&quot;</span><span class="punctuation">:</span> <span class="string">&quot;&lt;unknown ssid&gt;&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;ssid_hidden&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;supplicant_state&quot;</span><span class="punctuation">:</span> <span class="string">&quot;COMPLETED&quot;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure>

<h2 id="打开-关闭WiFi"><a href="#打开-关闭WiFi" class="headerlink" title="打开&#x2F;关闭WiFi"></a>打开&#x2F;关闭WiFi</h2><p><strong>命令</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">termux-wifi-enable status</span><br></pre></td></tr></table></figure>

<p><strong>入参</strong></p>
<table>
<thead>
<tr>
<th>参数</th>
<th>说明</th>
<th>默认值</th>
<th>可选</th>
</tr>
</thead>
<tbody><tr>
<td>status</td>
<td>要更改的wifi状态</td>
<td></td>
<td>true, false</td>
</tr>
</tbody></table>
<h2 id="扫描可用WiFi"><a href="#扫描可用WiFi" class="headerlink" title="扫描可用WiFi"></a>扫描可用WiFi</h2><p><strong>命令</strong>：termux-wifi-scaninfo</p>
<p><strong>权限</strong>：定位权限</p>
<p><strong>出参</strong></p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">[</span></span><br><span class="line">  <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;bssid&quot;</span><span class="punctuation">:</span> <span class="string">&quot;68:8b:0f:f6:6f:96&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;frequency_mhz&quot;</span><span class="punctuation">:</span> <span class="number">2412</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;rssi&quot;</span><span class="punctuation">:</span> <span class="number">-50</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;ssid&quot;</span><span class="punctuation">:</span> <span class="string">&quot;CMCC-nJtm&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;timestamp&quot;</span><span class="punctuation">:</span> <span class="number">584216631835</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;channel_bandwidth_mhz&quot;</span><span class="punctuation">:</span> <span class="string">&quot;20&quot;</span></span><br><span class="line">  <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">  ...</span><br><span class="line"><span class="punctuation">]</span></span><br></pre></td></tr></table></figure>



<p>​                                                                                                                                                                                            </p>
<h3 id="常用操作"><a href="#常用操作" class="headerlink" title="常用操作"></a>常用操作</h3><h4 id="服务启动"><a href="#服务启动" class="headerlink" title="服务启动"></a>服务启动</h4><p>启动 php-fpm</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">php-fpm</span><br></pre></td></tr></table></figure>

<p>查看nginx当前进程</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">ps -ef | grep nginx</span><br><span class="line">--------------------------------------------------------------------</span><br><span class="line">[root sbin]<span class="comment"># ps -ef | grep nginx</span></span><br><span class="line">root      4807     1  0 Feb23 ?        00:00:00 nginx: master process ./nginx</span><br><span class="line">nobody    4855  4807  0 Feb23 ?        00:00:00 nginx: worker process</span><br><span class="line">root     29411 18450  0 11:31 pts/1    00:00:00 grep *--color=auto nginx*</span><br></pre></td></tr></table></figure>







<hr>
<h4 id="Linux常用命令："><a href="#Linux常用命令：" class="headerlink" title="Linux常用命令："></a><strong>Linux常用命令：</strong></h4><p><strong>文件组管理：</strong></p>
<p>cat   &#x2F;etc&#x2F;group  #查看文件系统的所有组信息</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">groups</span>   + 组名   查看组中成员信息</span><br></pre></td></tr></table></figure>

<p>创建一个组，monster</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">groupadd monster</span><br></pre></td></tr></table></figure>

<p>创建一个用户 fox ，并放入到monster组中</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">useradd -g monster fox</span><br></pre></td></tr></table></figure>

<p><img src="/2024/01/10/termux%E9%83%A8%E7%BD%B2/image-20231107105956026.png" alt="image-20231107105956026"></p>
<p>参考</p>
<p><a target="_blank" rel="noopener" href="https://www.cnblogs.com/klb561/p/9157569.html">linux 查看系统信息命令 - konglingbin - 博客园 (cnblogs.com)</a></p>
<h5 id="Linux-查看系统版本"><a href="#Linux-查看系统版本" class="headerlink" title="Linux  查看系统版本"></a><strong>Linux  查看系统版本</strong></h5><p>1、输入uname - a，可以看到操作系统的发行版号和操作系统版本。</p>
<p><img src="/2024/01/10/termux%E9%83%A8%E7%BD%B2/1675945-20230504103454546-1992316802.png" alt="img"></p>
<p> 2、输入uname -v可以查看版本号。</p>
<p><img src="/2024/01/10/termux%E9%83%A8%E7%BD%B2/1675945-20230504103527353-829249101.png" alt="img"></p>
<p> 3、lsb_release -a，查看发行版本信息，并且方法可以适用于所有的Linux发行版本。</p>
<p><img src="/2024/01/10/termux%E9%83%A8%E7%BD%B2/1675945-20230504103607095-1514192478.png" alt="img"></p>
<p> 4、cat &#x2F;etc&#x2F;issue可以查看到当前是Linux什么版本系统。</p>
<p><img src="/2024/01/10/termux%E9%83%A8%E7%BD%B2/1675945-20230504103653515-1472851654.png" alt="img"></p>
<p> 5、cat &#x2F;proc&#x2F;version可以查看内核的版本号。</p>
<p><img src="/2024/01/10/termux%E9%83%A8%E7%BD%B2/1675945-20230504103800269-928250674.png" alt="img"></p>
<p>常见问题</p>
<p>ssh连接报错</p>
<p><img src="/2024/01/10/termux%E9%83%A8%E7%BD%B2/image-20231130141455006.png" alt="image-20231130141455006"></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ssh-keygen -R 192.168.0.105</span><br></pre></td></tr></table></figure>

<p>报错</p>
<p><img src="/2024/01/10/termux%E9%83%A8%E7%BD%B2/image-20231130142356101.png" alt="image-20231130142356101"></p>
<p>修改know_hosts为  know_hosts.bak 或者删除 know_hosts  </p>
<p><img src="/2024/01/10/termux%E9%83%A8%E7%BD%B2/image-20231130142606669.png" alt="image-20231130142606669"></p>
<p>再进行连接</p>
<p><img src="/2024/01/10/termux%E9%83%A8%E7%BD%B2/image-20231130142702886.png" alt="image-20231130142702886"></p>
<p>二、常见报错</p>
<h6 id="Oh-My-Zsh更新报错解决"><a href="#Oh-My-Zsh更新报错解决" class="headerlink" title="Oh My Zsh更新报错解决"></a><strong>Oh My Zsh更新报错解决</strong></h6><p>报错内容：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">[oh-my-zsh] Would you like to update? [Y/n] y</span><br><span class="line">Updating Oh My Zsh</span><br><span class="line">fatal: remote error:</span><br><span class="line">  The unauthenticated git protocol on port 9418 is no longer supported.</span><br><span class="line">Please see https://github.blog/2021-09-01-improving-git-protocol-security-github/ for more information.</span><br><span class="line">There was an error updating. Try again later?</span><br><span class="line">The `osx` plugin is deprecated and has been renamed to `macos`.</span><br><span class="line">Please update your .zshrc to use the `macos` plugin instead.</span><br><span class="line">12345678</span><br></pre></td></tr></table></figure>

<p>执行下面命令解决</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git config --global url.&quot;https://github.com/&quot;.insteadOf git://github.com/</span><br></pre></td></tr></table></figure>









<h1 id="Shell-脚本语法"><a href="#Shell-脚本语法" class="headerlink" title="Shell 脚本语法"></a>Shell 脚本语法</h1><h2 id="shell-概述"><a href="#shell-概述" class="headerlink" title="shell 概述"></a>shell 概述</h2><p><img src="/2024/01/10/termux%E9%83%A8%E7%BD%B2/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MzI4ODIwMQ==,size_16,color_FFFFFF,t_70#pic_center.jpeg" alt="在这里插入图片描述"><br>shell 是一种脚本语言<br>脚本：本质是一个文件，文件里面存放的是 特定格式的指令，系统可以使用脚本解析器 翻译或解析 指令 并执行（它不需要编译）<br>shell 既是应用程序 又是一种脚本语言（应用程序 解析 脚本语言）<br>shell命令解析器：<br>系统提供 shell命令解析器： sh ash bash<br>查看自己linux系统的默认解析：echo $SHELL<br><img src="/2024/01/10/termux%E9%83%A8%E7%BD%B2/20200420202448655.png" alt="在这里插入图片描述"><br><img src="/2024/01/10/termux%E9%83%A8%E7%BD%B2/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MzI4ODIwMQ==,size_16,color_FFFFFF,t_70.png" alt="在这里插入图片描述"><br><img src="/2024/01/10/termux%E9%83%A8%E7%BD%B2/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MzI4ODIwMQ==,size_16,color_FFFFFF,t_70-1701316858936-1.png" alt="在这里插入图片描述"><br>shell脚本是一种脚本语言，我们只需使用任意文本编辑器，按照语法编写相应程序，增加可执行权限，即可在安装shell命令解释器的环境下执行</p>
<h2 id="调用形式"><a href="#调用形式" class="headerlink" title="调用形式"></a>调用形式</h2><p><strong>打开终端时系统自动调用：&#x2F;etc&#x2F;profile 或 ~&#x2F;.bashrc</strong></p>
<p>&#x2F;etc&#x2F;profile<br>此文件为系统的每个用户设置环境信息,当用户第一次登录时,该文件被执行，系统的公共环境变量在这里设置<br>开机自启动的程序，一般也在这里设置<br>~&#x2F;.bashrc<br>用户自己的家目录中的.bashrc<br>登录时会自动调用，打开任意终端时也会自动调用<br>这个文件一般设置与个人用户有关的环境变量，如交叉编译器的路径等等<br>用户手动调用：用户实现的脚本<br><img src="/2024/01/10/termux%E9%83%A8%E7%BD%B2/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MzI4ODIwMQ==,size_16,color_FFFFFF,t_70-1701316858937-2.png" alt="在这里插入图片描述"></p>
<h2 id="shell语法初识"><a href="#shell语法初识" class="headerlink" title="shell语法初识"></a>shell语法初识</h2><h3 id="语法格式"><a href="#语法格式" class="headerlink" title="语法格式"></a>语法格式</h3><p><strong>定义以开头：#!&#x2F;bin&#x2F;bash</strong></p>
<p><strong>#!用来声明脚本由什么shell解释，否则使用默认shell</strong><br><img src="/2024/01/10/termux%E9%83%A8%E7%BD%B2/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MzI4ODIwMQ==,size_16,color_FFFFFF,t_70-1701316858937-3.png" alt="在这里插入图片描述"></p>
<p><strong>单个”#”号代表注释当前行</strong></p>
<p><strong>第一步：编写脚本文件</strong></p>
<p><img src="/2024/01/10/termux%E9%83%A8%E7%BD%B2/20200420203332188.png" alt="在这里插入图片描述"></p>
<p><strong>第二步：加上可执行权限</strong></p>
<p><strong>chmod +x xxxx.sh</strong><br><img src="/2024/01/10/termux%E9%83%A8%E7%BD%B2/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MzI4ODIwMQ==,size_16,color_FFFFFF,t_70-1701316858938-4.png" alt="在这里插入图片描述"></p>
<p><strong>第三步：运行</strong></p>
<p><img src="/2024/01/10/termux%E9%83%A8%E7%BD%B2/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MzI4ODIwMQ==,size_16,color_FFFFFF,t_70-1701316858938-5.png" alt="在这里插入图片描述"></p>
<p>三种执行方式 （.&#x2F;xxx.sh bash xxx.sh . xxx.sh）</p>
<p>三种执行方式的不同点（.&#x2F;xxx.sh bash xxx.sh . xxx.sh）</p>
<p><strong>.&#x2F;xxx.sh :先按照 文件中#!指定的解析器解析</strong></p>
<p>如果#！指定指定的解析器不存在 才会使用系统默认的解析器</p>
<p><strong>bash xxx.sh:指明先用bash解析器解析</strong></p>
<p>如果bash不存在 才会使用默认解析器</p>
<p><strong>. xxx.sh 直接使用默认解析器解析（不会执行第一行的#！指定的解析器）但是第一行还是要写的</strong></p>
<p>三种执行情况：<br>打开终端就会有以后个解释器，我们称为当前解释器<br>我们指定解析器的时候（使用 .&#x2F;xxx.sh 或 bash xxx.sh）时会创建一个子shell解析 脚本<br><img src="/2024/01/10/termux%E9%83%A8%E7%BD%B2/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MzI4ODIwMQ==,size_16,color_FFFFFF,t_70-1701316858938-6.png" alt="在这里插入图片描述"></p>
<p><strong>注意：windows下 写脚本 在linux下执行 注意</strong></p>
<p><img src="/2024/01/10/termux%E9%83%A8%E7%BD%B2/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MzI4ODIwMQ==,size_16,color_FFFFFF,t_70-1701316858938-7.png" alt="在这里插入图片描述"><br>执行结果：<br><img src="/2024/01/10/termux%E9%83%A8%E7%BD%B2/20200420204518515.png" alt="在这里插入图片描述"><br>将windows文件 转换成 unix文件<br>方法一：dos2unix 如果没有该插件 需要安装<br>sudo apt-get install dos2unix<br>dos2unix shell脚本<br>转换成功就可以执行运行<br>方法二：<br>需要用vi打开脚本，在最后一行模式下执行<br>:set ff&#x3D;unix<br><img src="/2024/01/10/termux%E9%83%A8%E7%BD%B2/20200420204601405.png" alt="在这里插入图片描述"></p>
<h3 id="变量"><a href="#变量" class="headerlink" title="变量"></a>变量</h3><p>定义变量<br>变量名&#x3D;变量值<br>如：num&#x3D;10<br>引用变量<br>$变量名<br>unset ：清除变量值<br><img src="/2024/01/10/termux%E9%83%A8%E7%BD%B2/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MzI4ODIwMQ==,size_16,color_FFFFFF,t_70-1701316858939-8.png" alt="在这里插入图片描述"><br>运行结果：<br><img src="/2024/01/10/termux%E9%83%A8%E7%BD%B2/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MzI4ODIwMQ==,size_16,color_FFFFFF,t_70-1701316858939-9.png" alt="在这里插入图片描述"><br>从键盘获取值read</p>
<p><img src="/2024/01/10/termux%E9%83%A8%E7%BD%B2/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MzI4ODIwMQ==,size_16,color_FFFFFF,t_70-1701316858939-10.png" alt="在这里插入图片描述"><br>运行结果：<br><img src="/2024/01/10/termux%E9%83%A8%E7%BD%B2/20200420204743982.png" alt="在这里插入图片描述"></p>
<p><strong>案例：</strong></p>
<p>在一行上显示和添加提示 需要加上-p<br><img src="/2024/01/10/termux%E9%83%A8%E7%BD%B2/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MzI4ODIwMQ==,size_16,color_FFFFFF,t_70-1701316858939-11.png" alt="在这里插入图片描述"><br>运行结果：<br><img src="/2024/01/10/termux%E9%83%A8%E7%BD%B2/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MzI4ODIwMQ==,size_16,color_FFFFFF,t_70-1701316858939-12.png" alt="在这里插入图片描述"></p>
<h4 id="案例：读取多个值"><a href="#案例：读取多个值" class="headerlink" title="案例：读取多个值"></a>案例：读取多个值</h4><p><img src="/2024/01/10/termux%E9%83%A8%E7%BD%B2/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MzI4ODIwMQ==,size_16,color_FFFFFF,t_70-1701316858939-13.png" alt="在这里插入图片描述"><br>运行结果：<br><img src="/2024/01/10/termux%E9%83%A8%E7%BD%B2/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MzI4ODIwMQ==,size_16,color_FFFFFF,t_70-1701316858940-14.png" alt="在这里插入图片描述"></p>
<h4 id="案例只读变量："><a href="#案例只读变量：" class="headerlink" title="案例只读变量："></a>案例只读变量：</h4><p><img src="/2024/01/10/termux%E9%83%A8%E7%BD%B2/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MzI4ODIwMQ==,size_16,color_FFFFFF,t_70-1701316858940-15.png" alt="在这里插入图片描述"><br>运行结果：<br><img src="/2024/01/10/termux%E9%83%A8%E7%BD%B2/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MzI4ODIwMQ==,size_16,color_FFFFFF,t_70-1701316858940-16.png" alt="在这里插入图片描述"></p>
<h3 id="查看环境变量：env"><a href="#查看环境变量：env" class="headerlink" title="查看环境变量：env"></a>查看环境变量：env</h3><p><img src="/2024/01/10/termux%E9%83%A8%E7%BD%B2/20200420210115545.png" alt="在这里插入图片描述"><br><img src="/2024/01/10/termux%E9%83%A8%E7%BD%B2/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MzI4ODIwMQ==,size_16,color_FFFFFF,t_70-1701316858940-17.png" alt="在这里插入图片描述"></p>
<p><strong>导出环境变量 作用：（让其他shell脚本识别该变量，设为全局变量）</strong></p>
<p>source 脚本文件<br>source命令用法:<br>source FileName<br>作用:在当前bash环境下读取并执行FileName中的命令。<br>注:该命令通常用命令“.”来替代。<br>如:source .bash_rc 与 . .bash_rc 是等效的。<br>注意:source命令与shell scripts的区别是，<br>source在当前bash环境下执行命令，而scripts是启动一个子shell来执行命令。这样如果把设置环境变量(或alias等等)的命令写进scripts中，就只会影响子shell,无法改变当前的BASH,所以通过文件(命令列)设置环境变量时，要用source 命令。</p>
<p>06_sh.sh</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">#!/bin/bash</span><br><span class="line">expor DATA=<span class="number">250</span></span><br><span class="line"><span class="number">12</span></span><br></pre></td></tr></table></figure>

<p>用source 是文件生效<br><img src="/2024/01/10/termux%E9%83%A8%E7%BD%B2/20200420210219944.png" alt="在这里插入图片描述"><br>使用 env可以查看到环境变量中已经有 DATA<br><img src="/2024/01/10/termux%E9%83%A8%E7%BD%B2/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MzI4ODIwMQ==,size_16,color_FFFFFF,t_70-1701316858940-18.png" alt="在这里插入图片描述"><br>可以在终端直接中读取：<br><img src="/2024/01/10/termux%E9%83%A8%E7%BD%B2/20200420212551534.png" alt="在这里插入图片描述"><br>在其他sh脚本读取：<br><img src="/2024/01/10/termux%E9%83%A8%E7%BD%B2/20200420212830639.png" alt="在这里插入图片描述"><br>运行结果：<br><img src="/2024/01/10/termux%E9%83%A8%E7%BD%B2/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MzI4ODIwMQ==,size_16,color_FFFFFF,t_70-1701316858941-19.png" alt="在这里插入图片描述"></p>
<h3 id="注意事项："><a href="#注意事项：" class="headerlink" title="注意事项："></a>注意事项：</h3><p>1、变量名只能包含英文字母下划线，不能以数字开头<br>1_num&#x3D;10 错误<br>num_1&#x3D;20 正确<br>2、等号两边不能直接接空格符，若变量中本身就包含了空格，则整个字符串都要用双引号、或单引号括起来<br>3、双引号 单引号的区别<br>双引号：可以解析变量的值<br>单引号：不能解析变量的值<br><img src="/2024/01/10/termux%E9%83%A8%E7%BD%B2/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MzI4ODIwMQ==,size_16,color_FFFFFF,t_70-1701316858942-20.png" alt="在这里插入图片描述"><br>运行结果：<br><img src="/2024/01/10/termux%E9%83%A8%E7%BD%B2/20200420213000523.png" alt="在这里插入图片描述"><br>如果想在PATH变量中 追加一个路径写法如下：（重要！！！！）</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> PATH=$PATH:/需要添加的路径</span><br><span class="line"><span class="number">1</span></span><br></pre></td></tr></table></figure>

<h3 id="预设变量"><a href="#预设变量" class="headerlink" title="预设变量"></a>预设变量</h3><p><strong>shell直接提供无需定义的变量</strong></p>
<p><img src="/2024/01/10/termux%E9%83%A8%E7%BD%B2/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MzI4ODIwMQ==,size_16,color_FFFFFF,t_70-1701316858942-21.png" alt="在这里插入图片描述"></p>
<p><strong>案例：</strong></p>
<p><img src="/2024/01/10/termux%E9%83%A8%E7%BD%B2/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MzI4ODIwMQ==,size_16,color_FFFFFF,t_70-1701316858943-22.png" alt="在这里插入图片描述"><br>运行结果：<br><img src="/2024/01/10/termux%E9%83%A8%E7%BD%B2/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MzI4ODIwMQ==,size_16,color_FFFFFF,t_70-1701316858943-23.png" alt="在这里插入图片描述"></p>
<p><strong>脚本标量的特殊用法</strong></p>
<p><img src="/2024/01/10/termux%E9%83%A8%E7%BD%B2/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MzI4ODIwMQ==,size_16,color_FFFFFF,t_70-1701316858943-24.png" alt="在这里插入图片描述"><br><img src="/2024/01/10/termux%E9%83%A8%E7%BD%B2/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MzI4ODIwMQ==,size_16,color_FFFFFF,t_70-1701316858943-25.png" alt="在这里插入图片描述"><br><img src="/2024/01/10/termux%E9%83%A8%E7%BD%B2/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MzI4ODIwMQ==,size_16,color_FFFFFF,t_70-1701316858944-26.png" alt="在这里插入图片描述"><br>加-e转义 才起换行作用<br><img src="/2024/01/10/termux%E9%83%A8%E7%BD%B2/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MzI4ODIwMQ==,size_16,color_FFFFFF,t_70-1701316858944-27.png" alt="在这里插入图片描述"><br>()由子shell 完成<br><img src="/2024/01/10/termux%E9%83%A8%E7%BD%B2/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MzI4ODIwMQ==,size_16,color_FFFFFF,t_70-1701316858944-28.png" alt="在这里插入图片描述"><br>{}由当前的shell执行</p>
<p><img src="/2024/01/10/termux%E9%83%A8%E7%BD%B2/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MzI4ODIwMQ==,size_16,color_FFFFFF,t_70-1701316858944-29.png" alt="在这里插入图片描述"></p>
<h3 id="变量的扩展"><a href="#变量的扩展" class="headerlink" title="变量的扩展"></a>变量的扩展</h3><h4 id="判断变量是否存在"><a href="#判断变量是否存在" class="headerlink" title="判断变量是否存在"></a>判断变量是否存在</h4><p><img src="/2024/01/10/termux%E9%83%A8%E7%BD%B2/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MzI4ODIwMQ==,size_16,color_FFFFFF,t_70-1701316858944-30.png" alt="在这里插入图片描述"><br><img src="/2024/01/10/termux%E9%83%A8%E7%BD%B2/20200420220154487.png" alt="在这里插入图片描述"></p>
<h4 id="字符串的操作"><a href="#字符串的操作" class="headerlink" title="字符串的操作"></a>字符串的操作</h4><p><img src="/2024/01/10/termux%E9%83%A8%E7%BD%B2/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MzI4ODIwMQ==,size_16,color_FFFFFF,t_70-1701316858945-31.png" alt="在这里插入图片描述"></p>
<h3 id="条件测试"><a href="#条件测试" class="headerlink" title="条件测试"></a>条件测试</h3><p>test命令：用于测试字符串、文件状态和数字<br>test命令有两种格式:<br>test condition 或[ condition ]<br>使用方括号时，要注意在条件两边加上空格。</p>
<h4 id="文件测试"><a href="#文件测试" class="headerlink" title="文件测试"></a>文件测试</h4><p><img src="/2024/01/10/termux%E9%83%A8%E7%BD%B2/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MzI4ODIwMQ==,size_16,color_FFFFFF,t_70-1701316858945-32.png" alt="在这里插入图片描述"><br><img src="/2024/01/10/termux%E9%83%A8%E7%BD%B2/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MzI4ODIwMQ==,size_16,color_FFFFFF,t_70-1701316858945-33.png" alt="在这里插入图片描述"></p>
<h4 id="字符串测试"><a href="#字符串测试" class="headerlink" title="字符串测试"></a>字符串测试</h4><p><img src="/2024/01/10/termux%E9%83%A8%E7%BD%B2/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MzI4ODIwMQ==,size_16,color_FFFFFF,t_70-1701316858945-34.png" alt="在这里插入图片描述"><br><img src="/2024/01/10/termux%E9%83%A8%E7%BD%B2/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MzI4ODIwMQ==,size_16,color_FFFFFF,t_70-1701316858946-35.png" alt="在这里插入图片描述"><br><img src="/2024/01/10/termux%E9%83%A8%E7%BD%B2/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MzI4ODIwMQ==,size_16,color_FFFFFF,t_70-1701316858946-36.png" alt="在这里插入图片描述"></p>
<h4 id="数值测试"><a href="#数值测试" class="headerlink" title="数值测试"></a>数值测试</h4><p><img src="/2024/01/10/termux%E9%83%A8%E7%BD%B2/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MzI4ODIwMQ==,size_16,color_FFFFFF,t_70-1701316858946-37.png" alt="在这里插入图片描述"><br><img src="/2024/01/10/termux%E9%83%A8%E7%BD%B2/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MzI4ODIwMQ==,size_16,color_FFFFFF,t_70-1701316858946-38.png" alt="在这里插入图片描述"><br><img src="/2024/01/10/termux%E9%83%A8%E7%BD%B2/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MzI4ODIwMQ==,size_16,color_FFFFFF,t_70-1701316858946-39.png" alt="在这里插入图片描述"></p>
<h4 id="符合语句测试"><a href="#符合语句测试" class="headerlink" title="符合语句测试"></a>符合语句测试</h4><p><img src="/2024/01/10/termux%E9%83%A8%E7%BD%B2/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MzI4ODIwMQ==,size_16,color_FFFFFF,t_70-1701316858947-40.png" alt="在这里插入图片描述"><br><img src="/2024/01/10/termux%E9%83%A8%E7%BD%B2/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MzI4ODIwMQ==,size_16,color_FFFFFF,t_70-1701316858947-41.png" alt="在这里插入图片描述"></p>
<h3 id="控制语句"><a href="#控制语句" class="headerlink" title="控制语句"></a>控制语句</h3><p><img src="/2024/01/10/termux%E9%83%A8%E7%BD%B2/20200420221147873.png" alt="在这里插入图片描述"></p>
<h4 id="if控制语句"><a href="#if控制语句" class="headerlink" title="if控制语句"></a>if控制语句</h4><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">格式一：</span><br><span class="line"><span class="keyword">if</span> [条件<span class="number">1</span>]; then</span><br><span class="line">    执行第一段程序</span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">    执行第二段程序</span><br><span class="line">fi</span><br><span class="line">格式二：</span><br><span class="line"><span class="keyword">if</span> [条件<span class="number">1</span>]; then</span><br><span class="line">    执行第一段程序</span><br><span class="line">elif [条件<span class="number">2</span>]；then</span><br><span class="line">执行第二段程序</span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">    执行第三段程序</span><br><span class="line">fi</span><br><span class="line"><span class="number">1234567891011121314</span></span><br></pre></td></tr></table></figure>

<h4 id="案例："><a href="#案例：" class="headerlink" title="案例："></a>案例：</h4><p><img src="/2024/01/10/termux%E9%83%A8%E7%BD%B2/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MzI4ODIwMQ==,size_16,color_FFFFFF,t_70-1701316858947-42.png" alt="在这里插入图片描述"></p>
<h4 id="案例：判断当前路径下有没有文件夹-有就进入创建文件-没有-就创建文件夹-再进入创建文件"><a href="#案例：判断当前路径下有没有文件夹-有就进入创建文件-没有-就创建文件夹-再进入创建文件" class="headerlink" title="案例：判断当前路径下有没有文件夹 有就进入创建文件 没有 就创建文件夹 再进入创建文件"></a>案例：判断当前路径下有没有文件夹 有就进入创建文件 没有 就创建文件夹 再进入创建文件</h4><p><img src="/2024/01/10/termux%E9%83%A8%E7%BD%B2/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MzI4ODIwMQ==,size_16,color_FFFFFF,t_70-1701316858947-43.png" alt="在这里插入图片描述"><br>运行结果：<br><img src="/2024/01/10/termux%E9%83%A8%E7%BD%B2/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MzI4ODIwMQ==,size_16,color_FFFFFF,t_70-1701316858947-44.png" alt="在这里插入图片描述"></p>
<h4 id="案例：-1"><a href="#案例：-1" class="headerlink" title="案例："></a>案例：</h4><p><img src="/2024/01/10/termux%E9%83%A8%E7%BD%B2/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MzI4ODIwMQ==,size_16,color_FFFFFF,t_70-1701316858947-45.png" alt="在这里插入图片描述"><br>运行结果：<br><img src="/2024/01/10/termux%E9%83%A8%E7%BD%B2/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MzI4ODIwMQ==,size_16,color_FFFFFF,t_70-1701316858948-46.png" alt="在这里插入图片描述"></p>
<h4 id="case"><a href="#case" class="headerlink" title="case"></a>case</h4><p><img src="/2024/01/10/termux%E9%83%A8%E7%BD%B2/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MzI4ODIwMQ==,size_16,color_FFFFFF,t_70-1701316858948-47.png" alt="在这里插入图片描述"><br><img src="/2024/01/10/termux%E9%83%A8%E7%BD%B2/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MzI4ODIwMQ==,size_16,color_FFFFFF,t_70-1701316858948-48.png" alt="在这里插入图片描述"></p>
<h4 id="for循环语句"><a href="#for循环语句" class="headerlink" title="for循环语句"></a>for循环语句</h4><p><img src="/2024/01/10/termux%E9%83%A8%E7%BD%B2/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MzI4ODIwMQ==,size_16,color_FFFFFF,t_70-1701316858948-49.png" alt="在这里插入图片描述"><br><img src="/2024/01/10/termux%E9%83%A8%E7%BD%B2/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MzI4ODIwMQ==,size_16,color_FFFFFF,t_70-1701316858948-50.png" alt="在这里插入图片描述"><br><img src="/2024/01/10/termux%E9%83%A8%E7%BD%B2/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MzI4ODIwMQ==,size_16,color_FFFFFF,t_70-1701316858948-51.png" alt="在这里插入图片描述"></p>
<h4 id="案例：-2"><a href="#案例：-2" class="headerlink" title="案例："></a>案例：</h4><p><img src="/2024/01/10/termux%E9%83%A8%E7%BD%B2/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MzI4ODIwMQ==,size_16,color_FFFFFF,t_70-1701316858949-52.png" alt="在这里插入图片描述"></p>
<h4 id="案例：扫描当前文件"><a href="#案例：扫描当前文件" class="headerlink" title="案例：扫描当前文件"></a>案例：扫描当前文件</h4><p><img src="/2024/01/10/termux%E9%83%A8%E7%BD%B2/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MzI4ODIwMQ==,size_16,color_FFFFFF,t_70-1701316858949-53.png" alt="在这里插入图片描述"></p>
<h4 id="while"><a href="#while" class="headerlink" title="while"></a>while</h4><p><img src="/2024/01/10/termux%E9%83%A8%E7%BD%B2/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MzI4ODIwMQ==,size_16,color_FFFFFF,t_70-1701316858949-54.png" alt="在这里插入图片描述"><br><img src="/2024/01/10/termux%E9%83%A8%E7%BD%B2/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MzI4ODIwMQ==,size_16,color_FFFFFF,t_70-1701316858949-55.png" alt="在这里插入图片描述"></p>
<h4 id="until"><a href="#until" class="headerlink" title="until"></a>until</h4><p><img src="/2024/01/10/termux%E9%83%A8%E7%BD%B2/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MzI4ODIwMQ==,size_16,color_FFFFFF,t_70-1701316858949-56.png" alt="在这里插入图片描述"><br><img src="/2024/01/10/termux%E9%83%A8%E7%BD%B2/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MzI4ODIwMQ==,size_16,color_FFFFFF,t_70-1701316858949-57.png" alt="在这里插入图片描述"></p>
<h4 id="break-continue"><a href="#break-continue" class="headerlink" title="break continue"></a>break continue</h4><p><img src="/2024/01/10/termux%E9%83%A8%E7%BD%B2/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MzI4ODIwMQ==,size_16,color_FFFFFF,t_70-1701316858950-58.png" alt="在这里插入图片描述"></p>
<h3 id="函数"><a href="#函数" class="headerlink" title="函数"></a>函数</h3><p><img src="/2024/01/10/termux%E9%83%A8%E7%BD%B2/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MzI4ODIwMQ==,size_16,color_FFFFFF,t_70-1701316858950-59.png" alt="在这里插入图片描述"><br>所有函数在使用前必须定义，必须将函数放在脚本开始部分，直至shell解释器首次发现它时，才可以使用<br><img src="/2024/01/10/termux%E9%83%A8%E7%BD%B2/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MzI4ODIwMQ==,size_16,color_FFFFFF,t_70-1701316858950-60.png" alt="在这里插入图片描述"></p>
<h4 id="案例：求最值"><a href="#案例：求最值" class="headerlink" title="案例：求最值"></a>案例：求最值</h4><p><img src="/2024/01/10/termux%E9%83%A8%E7%BD%B2/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MzI4ODIwMQ==,size_16,color_FFFFFF,t_70-1701316858950-61.png" alt="在这里插入图片描述"></p>
<h4 id="案例：函数分文件"><a href="#案例：函数分文件" class="headerlink" title="案例：函数分文件"></a>案例：函数分文件</h4><p><img src="/2024/01/10/termux%E9%83%A8%E7%BD%B2/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MzI4ODIwMQ==,size_16,color_FFFFFF,t_70-1701316858950-62.png" alt="在这里插入图片描述"><br>fun.sh<br><img src="/2024/01/10/termux%E9%83%A8%E7%BD%B2/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MzI4ODIwMQ==,size_16,color_FFFFFF,t_70-1701316858950-63.png" alt="在这里插入图片描述"><br>24_sh.sh<br><img src="/2024/01/10/termux%E9%83%A8%E7%BD%B2/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MzI4ODIwMQ==,size_16,color_FFFFFF,t_70-1701316858951-64.png" alt="在这里插入图片描述"></p>
<h1 id="Shell-脚本补充"><a href="#Shell-脚本补充" class="headerlink" title="Shell 脚本补充"></a>Shell 脚本补充</h1><h2 id="Shell脚本-基础概念"><a href="#Shell脚本-基础概念" class="headerlink" title="Shell脚本 基础概念"></a><a target="_blank" rel="noopener" href="https://so.csdn.net/so/search?q=Shell%E8%84%9A%E6%9C%AC&spm=1001.2101.3001.7020">Shell脚本</a> 基础概念</h2><h3 id="什么是shell"><a href="#什么是shell" class="headerlink" title="什么是shell?"></a>什么是shell?</h3><p>shell英文翻译过来是外壳的意思，作为计算机语言来理解可以认为它是操作系统的外壳。我们可以通过shell命令来操作和控制操作系统，比如Linux中的shell命令就包括<code>ls</code>、<code>cd</code>、<code>pwd</code>等等。</p>
<p>shell是站在内核的基础上编写的一个<strong>应用程序</strong>，它连接了用户和Linux内核，从而让用户能够更加便捷、高效、安全的使用linux内核，这其实就是shell的本质。</p>
<p>使用专业术语的说法来解释，Shell其实是一个命令解释器，它通过接受用户输入的Shell命令来启动、暂停、停止程序的运行或对计算机进行控制。</p>
<h3 id="什么是shell脚本"><a href="#什么是shell脚本" class="headerlink" title="什么是shell脚本"></a>什么是shell脚本</h3><p>shell脚本就是由<strong>Shell命令组成的执行文件</strong>，将一些命令整合到一个文件中，进行处理业务逻辑，脚本不用编译即可运行。它通过解释器解释运行，所以速度相对来说比较慢。</p>
<h3 id="shell脚本的意义"><a href="#shell脚本的意义" class="headerlink" title="shell脚本的意义"></a>shell脚本的意义</h3><p>我们在1.2中也解释道shell脚本其实就是shell命令组成的文件，shell脚本可以记录命令执行的过程和执行逻辑，以便以后重复执行，还可以批量、定时处理主机，方便管理员进行设置或者管理。</p>
<h2 id="创建一个简单的Shell脚本"><a href="#创建一个简单的Shell脚本" class="headerlink" title="创建一个简单的Shell脚本"></a>创建一个简单的Shell脚本</h2><h3 id="创建一个shell脚本文件"><a href="#创建一个shell脚本文件" class="headerlink" title="创建一个shell脚本文件"></a>创建一个shell脚本文件</h3><p>在创建shell脚本时，我们默认新建一个以<code>.sh</code>&#x2F;<code>.script</code>结尾的文件，主要是为了让程序员更加快捷的辨认出该文件是一个shell脚本文件。</p>
<p>我们创建一个<code>test.sh</code>的shell脚本文件，其中具体内容为下：</p>
<figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#!/bin/bash</span></span><br><span class="line"><span class="built_in">echo</span> hello</span><br><span class="line"><span class="number">12</span></span><br></pre></td></tr></table></figure>

<blockquote>
<ul>
<li>“ # ”开头的就是注释，单行注释</li>
<li>&lt;&lt;EOF … EOF 或 :&lt;&lt;! … ! ：多行注释</li>
<li>#!&#x2F;bin&#x2F;bash ： 主要用于指定解释器</li>
<li>Linux中提供的shell解释器有：</li>
</ul>
<ol>
<li>&#x2F;bin&#x2F;sh</li>
<li>&#x2F;bin&#x2F;bash</li>
<li>&#x2F;usr&#x2F;bin&#x2F;sh</li>
<li>&#x2F;usr&#x2F;bin&#x2F;bash</li>
</ol>
</blockquote>
<h3 id="运行一个Shell脚本"><a href="#运行一个Shell脚本" class="headerlink" title="运行一个Shell脚本"></a>运行一个Shell脚本</h3><p>我们根据脚本文件是否具有可执行权限，将运行一个shell脚本的方法分为两大类。</p>
<h4 id="脚本文件无执行权限"><a href="#脚本文件无执行权限" class="headerlink" title="脚本文件无执行权限"></a>脚本文件无执行权限</h4><p>这种情况下我们有三种方式来运行脚本：</p>
<ol>
<li>手动在环境中开启指定解释器：<code>sh test.sh</code><br><img src="/2024/01/10/termux%E9%83%A8%E7%BD%B2/623e50ff76c2439eba84733680bc6568.png" alt="在这里插入图片描述"></li>
<li>直接在当前环境中运行的shell中运行脚本:<code>. test.sh</code><br><img src="/2024/01/10/termux%E9%83%A8%E7%BD%B2/41b56da7c0b444b7b6df3fdca8064c02.png" alt="在这里插入图片描述"></li>
<li>直接在当前环境中运行的shell中运行脚本:<code>source test.sh</code><br><img src="/2024/01/10/termux%E9%83%A8%E7%BD%B2/6837982a98854ccab7862d5858a31a01.png" alt="在这里插入图片描述"></li>
</ol>
<h4 id="脚本文件有执行权限"><a href="#脚本文件有执行权限" class="headerlink" title="脚本文件有执行权限"></a>脚本文件有执行权限</h4><p>在这一部分由于我们假设脚本文件有可执行器权限，所以我们使用<code>chmod +x test.sh</code>为我们的<code>test.sh</code>文件增加了可执行权限。</p>
<p>我们知道当一个文件具有可执行权限时我们可以使用该文件的路径名直接运行该文件，有两种方式可以运行脚本：</p>
<ol>
<li>绝对路径名运行脚本文件<br>绝对路径就是从根目录下开始记录文件路径名，是文件在计算机上真正存在的路径。（如果不知道你的文件路径名，可以在当前位置的shell中使用<code>pwd</code>查询当前所在位置）<br><img src="/2024/01/10/termux%E9%83%A8%E7%BD%B2/3435dd6cc3da483dbf771fb8ac2dc278.png" alt="在这里插入图片描述"></li>
<li><code>./相对路径名</code>的格式运行脚本文件<br>相对路径是指以当前的文件作为起点，相较于当前目录的位置而被指向并且加以引用的文件资源。<br>比如我们知道<code>test.sh</code>文件的绝对路径为<code>/home/westos/Desktop/textcpp/test.sh</code>，那么当我们在testcpp文件夹中时，<code>test.sh</code>文件的相对路径为<code>test.sh</code>。<br>又因为<code>.</code>代表当前所在位置，故而为其实<code>./test.sh</code>其实就是该文件的绝对路径，只是表示的方式不同。<br><img src="/2024/01/10/termux%E9%83%A8%E7%BD%B2/bc66dec660b04198bcb6a932ea781fc6.png" alt="在这里插入图片描述"></li>
</ol>
<h2 id="基本语法"><a href="#基本语法" class="headerlink" title="基本语法"></a>基本语法</h2><h3 id="变量-1"><a href="#变量-1" class="headerlink" title="变量"></a>变量</h3><p>变量名其实就是一片内存区域的地址或者可以说是寻址符号，有了变量我们就可以使用一串固定的字符来表示不固定的目标。</p>
<h4 id="变量类型"><a href="#变量类型" class="headerlink" title="变量类型"></a>变量类型</h4><p>在shell中会同时存在三种类型变量。</p>
<ol>
<li>局部变量：局部变量在脚本或命令中定义，仅在当前shell实例中有效，其他shell启动的程序不能访问局部变量。</li>
<li>环境变量：所有的程序，包括shell启动的程序，都能访问环境变量，有些程序需要环境变量来保证其正常运行。必要的时候shell脚本也可以定义环境变量。</li>
<li>shell变量：shell变量是由shell程序设置的特殊变量。shell变量中有一部分是环境变量，有一部分是局部变量，这些变量保证了shell的正常运行</li>
</ol>
<h4 id="变量操作"><a href="#变量操作" class="headerlink" title="变量操作"></a>变量操作</h4><ol>
<li>创建普通变量：<code>name=“test”</code>，组要注意的是等号两边不能有空格。</li>
<li>创建局部变量：<code>local name=“test”</code>，使用<strong>local</strong>修饰的变量在函数体外无法访问，只能在函数体中使用。</li>
<li>创建只读变量：<code>name=“only_read” -&gt; readonly name</code>，这种变量不可以被修改。</li>
<li>使用变量：<code>echo $name</code>或者<code>echo $&#123;name&#125;</code></li>
<li>删除变量：<code>unset name</code>，删除之后的变量无法被访问，需要注意无法删除只读变量。</li>
</ol>
<h4 id="字符串变量"><a href="#字符串变量" class="headerlink" title="字符串变量"></a>字符串变量</h4><h5 id="字符串变量的创建"><a href="#字符串变量的创建" class="headerlink" title="字符串变量的创建"></a>字符串变量的创建</h5><ol>
<li>使用单引号创建：<code>var=&#39;test&#39;</code>。<br>这种方式创建的变量只能原样输出，变量无效，我们可以借用c中的“字符串常量”的定义理解这种特性。除此以外，单引号中不能出现单独的单引号，转义也是不可以的。</li>
<li>使用双引号创建：<code>var=&quot;my name is $&#123;name&#125;&quot;</code>，这种方式创建的字符串变量有效，也可以出现转义符。</li>
</ol>
<h5 id="拼接字符串"><a href="#拼接字符串" class="headerlink" title="拼接字符串"></a>拼接字符串</h5><ol>
<li>字面量拼接<br><code>str01=&quot;1&quot;&quot;2&quot;</code>或者<code>str01=&quot;1&quot;&#39;2&#39;</code>，这样就将<code>1</code>和<code>2</code>两个字符拼接在了一起。需要注意的是两个串之间不可以有空格。</li>
<li>变量拼接<br><code>str03=$&#123;part01&#125;$&#123;part02&#125;</code>或<code>str04=$&#123;part01&#125;&quot;end&quot;</code>或<code>str05=&quot;$&#123;part01&#125; $&#123;part02&#125;&quot;</code>这三种方式都可以拼接字符串变量。</li>
<li>命令拼接<br><code>str02= date</code>“end”，这里的date是一个shell命令，需要使用引用，具体如下：</li>
</ol>
<figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">str02=`date`&quot;<span class="keyword">end</span><span class="string">&quot;</span></span><br><span class="line"><span class="string">1</span></span><br></pre></td></tr></table></figure>

<h5 id="获取字符串长度"><a href="#获取字符串长度" class="headerlink" title="获取字符串长度"></a><a target="_blank" rel="noopener" href="https://so.csdn.net/so/search?q=%E8%8E%B7%E5%8F%96%E5%AD%97%E7%AC%A6%E4%B8%B2%E9%95%BF%E5%BA%A6&spm=1001.2101.3001.7020">获取字符串长度</a></h5><ol>
<li>使用<code>wc -L</code>命令<br><code>wc -L</code>可以获取到当前行的长度，因此对于单独行的字符串可以用这个简单的方法获取，另外<code>wc -l</code>则是获取当前字符串内容的行数。</li>
</ol>
<figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">echo</span> <span class="string">&quot;abc&quot;</span> |wc <span class="literal">-L</span></span><br><span class="line"><span class="number">1</span></span><br></pre></td></tr></table></figure>

<ol>
<li>使用<code>expr length</code>可以获取string的长度</li>
</ol>
<figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">expr length <span class="variable">$</span>&#123;str&#125;</span><br><span class="line"><span class="number">1</span></span><br></pre></td></tr></table></figure>

<ol>
<li><code>awk</code>获取域的个数<br>但是如果大于10个字符的长度时是否存在问题需要后面确认</li>
</ol>
<figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">echo</span> <span class="string">&quot;abc&quot;</span> |awk <span class="operator">-F</span> <span class="string">&quot;&quot;</span> <span class="string">&#x27;&#123;print NF&#125;&#x27;</span></span><br><span class="line"><span class="number">1</span></span><br></pre></td></tr></table></figure>

<ol>
<li>通过<code>awk+length</code>的方式获取字符串长度</li>
</ol>
<figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">echo</span> “Alex”|awk <span class="string">&#x27;&#123;print length($0)&#125;&#x27;</span></span><br><span class="line"><span class="number">1</span></span><br></pre></td></tr></table></figure>

<ol>
<li>通过&#96;echo $</li>
</ol>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  


  



          </div>
          

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <p class="site-author-name" itemprop="name">阿呆</p>
  <div class="site-description" itemprop="description">书山有路勤为径，学海无涯苦作舟。</div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">4</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/tags/">
          
        <span class="site-state-item-count">5</span>
        <span class="site-state-item-name">标签</span></a>
      </div>
  </nav>
</div>
  <div class="cc-license motion-element" itemprop="license">
    <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/zh-CN" class="cc-opacity" rel="noopener" target="_blank"><img src="/images/cc-by-nc-sa.svg" alt="Creative Commons"></a>
  </div>



      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2024</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">阿呆</span>
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item-icon">
      <i class="fa fa-chart-area"></i>
    </span>
    <span title="站点总字数">67k</span>
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item-icon">
      <i class="fa fa-coffee"></i>
    </span>
    <span title="站点阅读时长">2:01</span>
</div>



<!-- 网站运行时间的设置 -->
<span id="timeDate">载入天数...</span>
<span id="times">载入时分秒...</span>
<script>
    var now = new Date();
    function createtime() {
        var grt= new Date("03/01/2023 10:00:00"); //此处修改你的建站时间或者网站上线时间
        now.setTime(now.getTime()+250);
        days = (now - grt ) / 1000 / 60 / 60 / 24; dnum = Math.floor(days);
        hours = (now - grt ) / 1000 / 60 / 60 - (24 * dnum); hnum = Math.floor(hours);
        if(String(hnum).length ==1 ){hnum = "0" + hnum;} minutes = (now - grt ) / 1000 /60 - (24 * 60 * dnum) - (60 * hnum);
        mnum = Math.floor(minutes); if(String(mnum).length ==1 ){mnum = "0" + mnum;}
        seconds = (now - grt ) / 1000 - (24 * 60 * 60 * dnum) - (60 * 60 * hnum) - (60 * mnum);
        snum = Math.round(seconds); if(String(snum).length ==1 ){snum = "0" + snum;}
        document.getElementById("timeDate").innerHTML = "本站已安全运行 "+dnum+" 天 ";
        document.getElementById("times").innerHTML = hnum + " 小时 " + mnum + " 分 " + snum + " 秒.";
    }
setInterval("createtime()",250);
</script>
        
<div class="busuanzi-count">
  <script async src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
    <span class="post-meta-item" id="busuanzi_container_site_uv" style="display: none;">
      <span class="post-meta-item-icon">
        <i class="fa fa-user"></i>
      </span>
      <span class="site-uv" title="总访客量">
        <span id="busuanzi_value_site_uv"></span>
      </span>
    </span>
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item" id="busuanzi_container_site_pv" style="display: none;">
      <span class="post-meta-item-icon">
        <i class="fa fa-eye"></i>
      </span>
      <span class="site-pv" title="总访问量">
        <span id="busuanzi_value_site_pv"></span>
      </span>
    </span>
</div>








      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/pisces.js"></script>


<script src="/js/next-boot.js"></script>


  <script defer src="/lib/three/three.min.js"></script>
    <script defer src="/lib/three/canvas_sphere.min.js"></script>


  




  
<script src="//cdn.jsdelivr.net/npm/algoliasearch@4/dist/algoliasearch-lite.umd.js"></script>
<script src="//cdn.jsdelivr.net/npm/instantsearch.js@4/dist/instantsearch.production.min.js"></script>
<script src="/js/algolia-search.js"></script>














  

  

<script src="/live2dw/lib/L2Dwidget.min.js?094cbace49a39548bed64abff5988b05"></script><script>L2Dwidget.init({"log":false,"pluginJsPath":"lib/","pluginModelPath":"assets/","pluginRootPath":"live2dw/","tagMode":false});</script></body>

</html>


<!-- 页面点击小红心 -->
<script type="text/javascript" src="/js/src/clicklove.js"></script>

<!-- 添加看板娘 -->
<script src="https://cdn.jsdelivr.net/gh/ddldydd/live2d-widget/autoload.js"></script>